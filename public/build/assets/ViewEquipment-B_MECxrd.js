import{c as Q,r as i,j as e,H as D}from"./app-BqP9fq4e.js";import{A as _}from"./app-sidebar-BpfjOgHt.js";import{S as L,a as $,b as T,c as I}from"./index-Ii11vvi3.js";import{B as f}from"./button-DczwWVNh.js";import{Q as b}from"./index-CKtJj1ec.js";import{B as A,a as H,b as M,c as u,d as q}from"./breadcrumb-ihyTUp3t.js";import{D as V,a as U,b as P,c as G}from"./dialog-D4GzttwF.js";import"./chevron-right-i5JBqaJC.js";import"./createLucideIcon-CNSGljFc.js";import"./dropdown-menu-BCqLog4I.js";import"./index-HD3G7E3O.js";import"./index-BwjF0EZf.js";import"./index-CiJ5rwUa.js";import"./index-B91vCwf7.js";import"./index-CpmCDVr0.js";import"./input-CoZXYllS.js";import"./index-BPy9ohjS.js";import"./index-By4IRM55.js";function ue(){const{props:S}=Q(),t=S.equipment,[w,h]=i.useState(!1),[v,g]=i.useState(!1),[n,N]=i.useState(""),[o,R]=i.useState(""),[a,C]=i.useState(""),c=i.useRef(null);if(!t)return e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("p",{className:"text-lg text-gray-500",children:"Loading equipment..."})});const d=`${window.location.origin}/equipment/${t.equipment_code}`,k=(l,j,m)=>{N(l),C(j),R(m),h(!0)},y=async()=>{n&&(await navigator.clipboard.writeText(n),g(!0),setTimeout(()=>g(!1),2e3))},z=()=>{if(!c.current)return;const l=c.current.querySelector("svg"),m=new XMLSerializer().serializeToString(l),B=new Blob([m],{type:"image/svg+xml;charset=utf-8"}),E=URL.createObjectURL(B),x=new Image;x.onload=()=>{const s=document.createElement("canvas"),r=s.getContext("2d");s.width=220,s.height=260,r.fillStyle="#fff",r.fillRect(0,0,s.width,s.height),r.drawImage(x,10,10,200,200),r.fillStyle="#000",r.font="bold 16px sans-serif",r.textAlign="center",r.fillText(`ROOM ${a} - ${o}`,s.width/2,235);const O=s.toDataURL("image/png"),p=document.createElement("a");p.href=O,p.download=`ROOM-${a}_${o}-QR.png`,p.click()},x.src=E};return e.jsxs(L,{children:[e.jsx(_,{}),e.jsxs($,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 border-b bg-white",children:[e.jsx(T,{}),e.jsx(I,{orientation:"vertical",className:"h-6 mx-3"}),e.jsx(A,{children:e.jsx(H,{children:e.jsxs(M,{children:[e.jsx(u,{href:"#","aria-current":"page",children:"Assets"}),e.jsx(q,{}),e.jsx(u,{href:"/equipments",children:"Equipment List"}),e.jsx(q,{}),e.jsx(u,{href:`${d}`,"aria-current":"page",className:"font-semibold text-foreground",children:"View Equipment"})]})})})]}),e.jsx(D,{title:`View ${t.equipment_code}`}),e.jsxs("main",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Equipment Information"}),e.jsxs("div",{className:"bg-white shadow rounded p-6 max-w-3xl mx-auto grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Equipment Code:"})," ",t.equipment_code]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Equipment Name:"})," ",t.equipment_name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Type:"})," ",t.type]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Brand:"})," ",t.brand||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Condition:"})," ",t.condition]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Room Number:"})," ",t.room?.room_number]}),e.jsxs("div",{className:"col-span-2 flex flex-col items-center mt-4 cursor-pointer",onClick:()=>k(d,t.room?.room_number,t.equipment_code),children:[e.jsx(b,{value:d,size:128}),e.jsx("span",{className:"mt-2 text-sm text-muted-foreground",children:"Click QR code to expand"})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx(f,{variant:"secondary",onClick:()=>window.history.back(),children:"Go Back"})}),e.jsx(V,{open:w,onOpenChange:h,children:e.jsxs(U,{className:"max-w-sm mx-auto",children:[e.jsx(P,{children:e.jsxs(G,{children:["QR Code - ROOM ",a," -"," ",o]})}),e.jsxs("div",{className:"flex flex-col items-center",ref:c,children:[e.jsx(b,{id:"qr-download",value:n,size:200,className:"cursor-pointer",onClick:y}),e.jsx("p",{className:"text-xs mt-2 text-muted-foreground",children:"Click QR to copy link"}),v&&e.jsx("p",{className:"text-green-600 text-sm text-center mt-1",children:"Copied to clipboard!"}),e.jsx(f,{className:"mt-4",onClick:z,children:"Download QR"})]})]})})]})]})]})}export{ue as default};
