import{b as Y,r as j,u as V,j as e,R as Z,a as M}from"./app-B9kSQkmQ.js";import{B as p}from"./button-D6enptyQ.js";import{T as J}from"./technician-app-sidebar-BhfMbIjo.js";import{S as W,a as ee,b as se,c as re}from"./avatar-BORcRcCe.js";import{a as oe,c as O}from"./utils-Af2usUM9.js";import{I as m}from"./input-B-MHS-Ok.js";import{N as te}from"./Notification-2USu7jOc.js";import{S as y}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{T as ae,a as le,b as k,c as v,d as ne,e as b}from"./table-Dp_53-Qq.js";import{B as ie,a as ce,b as de,c as D,d as me}from"./breadcrumb-DuKiltA7.js";import{P as he,a as xe,b as ue}from"./popover-7fNcQyy-.js";import{S as R,a as A,b as B,c as I,d as U}from"./select-gEahueus.js";import{D as G,e as pe,a as q,b as $,c as Q}from"./dialog-Dhh9Kf2n.js";import{L as C}from"./label-BKJ5LoVq.js";import{Q as je}from"./index-2KO7GnMe.js";import{P as ge}from"./pen-D63oh-Mi.js";import{T as be}from"./trash-2-DQQ03wCd.js";import{F as fe}from"./funnel-6AGW6l03.js";import{X as E}from"./index-CfKFMfcm.js";import"./index-BbpWZQ5o.js";import"./index-DQNUgxHz.js";import"./index-BLAfcpvr.js";import"./index-dHGCp27w.js";import"./chevron-right-DZP4HsyT.js";import"./dropdown-menu-BwBII75Y.js";import"./index-UcG2geEh.js";import"./boxes-CPX7uog5.js";import"./index-Dj0Ccuv6.js";import"./index-f9wodJTA.js";import"./bell-lRT1t-R6.js";import"./index-BBMBmwDM.js";import"./chevron-down-C39dhmAd.js";/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],Ne=oe("qr-code",ve),L=[{label:"Functional",color:"bg-green-500"},{label:"Defective",color:"bg-red-500"},{label:"Under Maintenance",color:"bg-yellow-500"},{label:"Needs Upgrade",color:"bg-blue-500"},{label:"For Disposal",color:"bg-gray-500"}];function Ce(){const{rooms:l}=Y().props,[h,g]=j.useState(!1),{data:i,setData:c,post:d,processing:f,errors:r,reset:w}=V({unit_code:"",processor:"",ram:"",storage:"",gpu:"",motherboard:"",condition:"",room_id:""}),N=o=>{const S=L.find(F=>F.label.toLowerCase()===o.toLowerCase());return S?S.color:"bg-muted"},n=o=>{o.preventDefault(),d("/technician/units/create",{onSuccess:()=>{w(),g(!1),y.fire({title:"System Unit added successfully!",icon:"success",showConfirmButton:!1,timer:1500,customClass:{popup:"technician-success-message"}})},onError:S=>{y.fire({title:S.unit_code||"Error adding unit",icon:"error",showConfirmButton:!0,customClass:{popup:"technician-error-message"}})}})},[a,x]=j.useState("");return j.useEffect(()=>{const o=l.find(S=>`ROOM ${S.room_number}`.toLowerCase()===a.toLowerCase());o?c("room_id",o.id):c("room_id","")},[a]),e.jsxs(G,{open:h,onOpenChange:g,children:[e.jsx(pe,{asChild:!0,children:e.jsx(p,{className:"bg-[hsl(142,31%,51%)] hover:bg-[hsl(142,31%,45%)] text-white font-medium",children:"Add Unit"})}),e.jsxs(q,{className:"sm:max-w-xl max-h-[90vh] overflow-y-auto",children:[e.jsx($,{children:e.jsx(Q,{children:"Add System Unit"})}),e.jsxs("form",{onSubmit:n,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(C,{htmlFor:"room_number",children:"Room"}),e.jsx(m,{id:"room_number",list:"room-options",value:a,onChange:o=>x(o.target.value),placeholder:"Search or select room"}),e.jsx("datalist",{id:"room-options",children:l.map(o=>e.jsx("option",{value:`ROOM ${o.room_number}`},o.id))}),r.room_id&&e.jsx("p",{className:"text-sm text-red-500",children:r.room_id})]}),e.jsxs("div",{children:[e.jsx(C,{htmlFor:"unit_code",children:"Pc Code"}),e.jsx(m,{id:"unit_code",name:"unit_code",value:i.unit_code,onChange:o=>c("unit_code",o.target.value),placeholder:"01",required:!0}),r.unit_code&&e.jsx("p",{className:"text-sm text-red-500",children:r.unit_code})]}),e.jsxs("div",{children:[e.jsx(C,{htmlFor:"processor",children:"Processor"}),e.jsx(m,{id:"processor",name:"processor",value:i.processor,onChange:o=>c("processor",o.target.value),placeholder:"Intel Core i5-10400"}),r.processor&&e.jsx("p",{className:"text-sm text-red-500",children:r.processor})]}),e.jsxs("div",{children:[e.jsx(C,{htmlFor:"ram",children:"RAM"}),e.jsx(m,{id:"ram",name:"ram",value:i.ram,onChange:o=>c("ram",o.target.value),placeholder:"16GB DDR5"}),r.ram&&e.jsx("p",{className:"text-sm text-red-500",children:r.ram})]}),e.jsxs("div",{children:[e.jsx(C,{htmlFor:"storage",children:"Storage"}),e.jsx(m,{id:"storage",name:"storage",value:i.storage,onChange:o=>c("storage",o.target.value),placeholder:"512GB NVME SATA SSD"}),r.storage&&e.jsx("p",{className:"text-sm text-red-500",children:r.storage})]}),e.jsxs("div",{children:[e.jsx(C,{htmlFor:"gpu",children:"GPU"}),e.jsx(m,{id:"gpu",name:"gpu",value:i.gpu,onChange:o=>c("gpu",o.target.value),placeholder:"NVIDIA GeForce RTX 5090"}),r.gpu&&e.jsx("p",{className:"text-sm text-red-500",children:r.gpu})]}),e.jsxs("div",{children:[e.jsx(C,{htmlFor:"motherboard",children:"Motherboard"}),e.jsx(m,{id:"motherboard",name:"motherboard",value:i.motherboard,onChange:o=>c("motherboard",o.target.value),placeholder:"ASUS ROG Maximus Z790 Dark Hero (Intel)"}),r.motherboard&&e.jsx("p",{className:"text-sm text-red-500",children:r.motherboard})]}),e.jsxs("div",{children:[e.jsx(C,{htmlFor:"condition",children:"Condition"}),e.jsx(m,{id:"condition",list:"condition-options",value:i.condition,onChange:o=>c("condition",o.target.value),placeholder:"Type or select Condition"}),e.jsx("datalist",{id:"condition-options",children:L.map(o=>e.jsx("option",{value:o.label},o.label))}),i.condition&&e.jsxs("div",{className:"mt-1 text-sm flex items-center gap-2",children:[e.jsx("span",{className:O("inline-block w-3 h-3 rounded-full",N(i.condition))}),e.jsx("span",{className:"capitalize",children:i.condition})]}),r.condition&&e.jsx("p",{className:"text-sm text-red-500",children:r.condition})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(p,{type:"submit",disabled:f,className:"bg-[hsl(142,31%,51%)] hover:bg-[hsl(142,31%,45%)] text-white font-medium",children:"Submit"})})]})]})]})}const z=[{label:"Functional",color:"bg-green-500"},{label:"Defective",color:"bg-red-500"},{label:"Under Maintenance",color:"bg-yellow-500"},{label:"Needs Upgrade",color:"bg-blue-500"},{label:"For Disposal",color:"bg-gray-500"}];function we({unit:l,rooms:h,onClose:g}){const{data:i,setData:c,put:d,processing:f,errors:r}=V({unit_code:l.unit_code,processor:l.processor,ram:l.ram,storage:l.storage,gpu:l.gpu,motherboard:l.motherboard,condition:l.condition,room_id:l.room_id}),w=n=>{n.preventDefault(),d(`/technician/units/${l.id}`,{onSuccess:()=>{g(),y.fire({title:"System Unit updated successfully!",icon:"success",showConfirmButton:!1,timer:1500,customClass:{popup:"technician-success-message"}})},onError:a=>{y.fire({title:"Error updating system unit",text:Object.values(a).join(`
`),icon:"error",showConfirmButton:!0,customClass:{popup:"technician-error-message"}})}})},N=n=>{const a=z.find(x=>x.label.toLowerCase()===n.toLowerCase());return a?a.color:"bg-gray-300"};return e.jsx(G,{open:!0,onOpenChange:n=>!n&&g(),children:e.jsxs(q,{children:[e.jsx($,{children:e.jsxs(Q,{children:["Edit ROOM -"," ",h.find(n=>n.id===l.room_id)?.room_number||"N/A"," ","- ",l.unit_code]})}),e.jsxs("form",{onSubmit:w,className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{value:i.unit_code,onChange:n=>c("unit_code",n.target.value),placeholder:"Unit Code"}),r.unit_code&&e.jsx("p",{className:"text-sm text-red-500",children:r.unit_code})]}),e.jsxs("div",{children:[e.jsx(m,{value:i.processor,onChange:n=>c("processor",n.target.value),placeholder:"Processor"}),r.processor&&e.jsx("p",{className:"text-sm text-red-500",children:r.processor})]}),e.jsxs("div",{children:[e.jsx(m,{value:i.ram,onChange:n=>c("ram",n.target.value),placeholder:"RAM"}),r.ram&&e.jsx("p",{className:"text-sm text-red-500",children:r.ram})]}),e.jsxs("div",{children:[e.jsx(m,{value:i.storage,onChange:n=>c("storage",n.target.value),placeholder:"Storage"}),r.storage&&e.jsx("p",{className:"text-sm text-red-500",children:r.storage})]}),e.jsxs("div",{children:[e.jsx(m,{value:i.gpu,onChange:n=>c("gpu",n.target.value),placeholder:"GPU"}),r.gpu&&e.jsx("p",{className:"text-sm text-red-500",children:r.gpu})]}),e.jsxs("div",{children:[e.jsx(m,{value:i.motherboard,onChange:n=>c("motherboard",n.target.value),placeholder:"Motherboard"}),r.motherboard&&e.jsx("p",{className:"text-sm text-red-500",children:r.motherboard})]}),e.jsxs("div",{children:[e.jsx(C,{htmlFor:"condition",children:"Condition"}),e.jsx(m,{id:"condition",list:"condition-options",value:i.condition,onChange:n=>c("condition",n.target.value),placeholder:"Type or select"}),e.jsx("datalist",{id:"condition-options",children:z.map(n=>e.jsx("option",{value:n.label},n.label))}),i.condition&&e.jsxs("div",{className:"mt-1 text-sm flex items-center gap-2",children:[e.jsx("span",{className:O("inline-block w-3 h-3 rounded-full",N(i.condition))}),e.jsx("span",{className:"capitalize",children:i.condition})]}),r.condition&&e.jsx("p",{className:"text-sm text-red-500",children:r.condition})]}),e.jsx(p,{type:"submit",disabled:f,children:"Update"})]})]})})}const Se=[{label:"Functional",color:"bg-green-500"},{label:"Defective",color:"bg-red-500"},{label:"Under Maintenance",color:"bg-yellow-500"},{label:"Needs Upgrade",color:"bg-blue-500"},{label:"For Disposal",color:"bg-gray-500"}];function ye({filters:l={},filterOptions:h,onApplyFilters:g,onReset:i}){const[c,d]=j.useState(""),[f,r]=j.useState("");j.useEffect(()=>{const x=["unit_code","room_id","processor","ram","storage","gpu","motherboard","condition"].find(o=>!!l[o]);x?(d(x),r(String(l[x]))):(d(""),r(""))},[l]);const w=[{value:"unit_code",label:"Unit Code"},{value:"room_id",label:"Room"},{value:"processor",label:"Processor"},{value:"ram",label:"RAM"},{value:"storage",label:"Storage"},{value:"gpu",label:"GPU"},{value:"motherboard",label:"Motherboard"},{value:"condition",label:"Condition"}];function N(a){const x=a==="all"?"":a;r(x);const o={...l};c&&(o[c]=x),g(o)}const n=Object.values(l).some(a=>!!a);return e.jsxs(he,{children:[e.jsx(xe,{asChild:!0,children:e.jsxs(p,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4"}),"Filter",n&&e.jsx(E,{className:"h-4 w-4 ml-1 cursor-pointer",onClick:a=>{a.stopPropagation(),d(""),r(""),i()}})]})}),e.jsxs(ue,{className:"w-[calc(100vw-2rem)] sm:w-[380px] p-4",children:[e.jsx("h4",{className:"font-medium mb-3 text-lg",children:"Filter Options"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs(R,{value:c,onValueChange:a=>{d(a),r("")},children:[e.jsx(A,{className:"w-full",children:e.jsx(B,{placeholder:"Select Field"})}),e.jsx(I,{children:w.map(a=>e.jsx(U,{value:a.value,children:a.label},a.value))})]}),c&&(h[c+"s"]||h[c])&&e.jsxs(R,{value:f||"all",onValueChange:N,children:[e.jsx(A,{className:"w-full",children:e.jsx(B,{placeholder:"Select Value"})}),e.jsxs(I,{children:[e.jsx(U,{value:"all",children:"All"}),Array.isArray(h[c+"s"])?h[c+"s"].map(a=>e.jsx(U,{value:a,children:a},a)):Object.entries(h[c]).map(([a,x])=>e.jsxs(U,{value:a,children:["Room ",x]},a))]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(p,{size:"sm",variant:"outline",onClick:()=>{d(""),r(""),i()},children:[e.jsx(E,{className:"mr-1 h-4 w-4"})," Reset"]})})]})]})]})}function ts({units:l,rooms:h,filters:g={}}){const[i,c]=j.useState(g.search||""),[d,f]=j.useState(1),[r,w]=j.useState(null),[N,n]=j.useState(null),a=10,x=j.useMemo(()=>{const s=t=>[...new Set(t.filter(u=>u!==null&&u!==""))].sort();return{rooms:Object.fromEntries(h.map(t=>[String(t.id),t.room_number])),unit_codes:s(l.map(t=>t.unit_code)),processors:s(l.map(t=>t.processor)),rams:s(l.map(t=>t.ram)),storages:s(l.map(t=>t.storage)),gpus:s(l.map(t=>t.gpu)),motherboards:s(l.map(t=>t.motherboard)),conditions:s(l.map(t=>t.condition))}},[l,h]);function o(s){const t=Object.fromEntries(Object.entries({...s,search:i||void 0}).filter(([,u])=>u!==""&&u!==void 0));M.get("/technician/units",t,{preserveState:!0,replace:!0})}function S(){c(""),M.get("/technician/units",{},{preserveState:!0,replace:!0})}function F(s){s.key==="Enter"&&o(g)}const P=j.useMemo(()=>{if(!i)return l;const s=i.toLowerCase();return l.filter(t=>{const u=t.unit_code?.toLowerCase()||"",X=t.room?.room_number?.toLowerCase()||"";return u.includes(s)||X.includes(s)})},[l,i]),_=Math.ceil(P.length/a)||1,T=P.slice((d-1)*a,d*a),H=s=>{const t=Se.find(u=>u.label.toLowerCase()===(s||"").toLowerCase());return t?t.color:"bg-muted"},K=s=>{y.fire({title:"Are you sure?",text:"This action will permanently delete the system unit.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&M.delete(`/technician/units/${s}`,{onSuccess:()=>{y.fire({title:"Deleted!",text:"System unit has been deleted.",icon:"success",timer:1500,showConfirmButton:!1})},onError:u=>{y.fire({title:"Error!",text:"Failed to delete the system unit.",icon:"error"})}})})};return e.jsxs(W,{children:[e.jsx(J,{}),e.jsxs(ee,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 border-b bg-white",children:[e.jsx(se,{}),e.jsx(re,{orientation:"vertical",className:"h-6 mx-3"}),e.jsx(ie,{children:e.jsx(ce,{children:e.jsxs(de,{children:[e.jsx(D,{href:"/technician/dashboard",children:"Dashboard"}),e.jsx(me,{}),e.jsx(D,{href:"/technician/units","aria-current":"page",className:"font-semibold text-foreground",children:"System Units"})]})})})]}),e.jsxs("main",{className:"w-full px-6 py-4",children:[e.jsx(te,{}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"System Units"}),e.jsx(Ce,{rooms:h})]}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-2 items-stretch sm:items-center justify-between mb-4",children:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(ye,{filters:g,filterOptions:x,onApplyFilters:o,onReset:S}),e.jsx(m,{placeholder:"Search Unit Code or Room",value:i,onChange:s=>{c(s.target.value),f(1)},onKeyDown:F,className:"w-64"})]})}),e.jsx("div",{className:"overflow-x-auto rounded-lg shadow-lg",children:e.jsxs(ae,{children:[e.jsx(le,{children:e.jsxs(k,{className:"bg-[hsl(142,34%,85%)] text-[hsl(142,34%,25%)] hover:bg-[hsl(142,34%,80%)] h-10",children:[e.jsx(v,{children:"#"}),e.jsx(v,{children:"Pc Code"}),e.jsx(v,{children:"Room"}),e.jsx(v,{children:"Processor"}),e.jsx(v,{children:"RAM"}),e.jsx(v,{children:"Storage"}),e.jsx(v,{children:"GPU"}),e.jsx(v,{children:"Motherboard"}),e.jsx(v,{children:"Condition"}),e.jsx(v,{children:"Actions"})]})}),e.jsx(ne,{children:T.length>0?T.map((s,t)=>e.jsxs(k,{children:[e.jsx(b,{children:(d-1)*a+t+1}),e.jsx(b,{children:s.unit_code}),e.jsxs(b,{children:["ROOM ",s.room?.room_number||"N/A"]}),e.jsx(b,{children:s.processor}),e.jsx(b,{children:s.ram}),e.jsx(b,{children:s.storage}),e.jsx(b,{children:s.gpu}),e.jsx(b,{children:s.motherboard}),e.jsx(b,{children:s.condition&&e.jsxs("div",{className:"mt-1 text-sm flex items-center gap-2",children:[e.jsx("span",{className:O("inline-block w-3 h-3 rounded-full",H(s.condition))}),e.jsx("span",{className:"capitalize",children:s.condition})]})}),e.jsx(b,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(p,{size:"sm",className:"flex items-center gap-2 bg-[hsl(142,34%,51%)] text-white border-none hover:bg-[hsl(142,34%,45%)]",onClick:()=>w(s),children:[e.jsx(ge,{className:"h-4 w-4"}),"Edit"]}),e.jsxs(p,{size:"sm",className:"flex items-center gap-2 bg-[hsl(142,34%,51%)] text-white border-none hover:bg-[hsl(142,34%,45%)]",onClick:()=>n(s),children:[e.jsx(Ne,{className:"h-4 w-4"}),"QR"]}),e.jsxs(p,{size:"sm",variant:"destructive",className:"flex items-center gap-2",onClick:()=>K(s.id),children:[e.jsx(be,{className:"h-4 w-4"}),"Delete"]})]})})]},s.id)):e.jsx(k,{children:e.jsx(b,{colSpan:10,className:"text-center py-4",children:"No matching units found."})})})]})}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",d," of ",_]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(p,{size:"sm",variant:"outline",disabled:d===1,onClick:()=>f(s=>s-1),children:"Previous"}),Array.from({length:_},(s,t)=>t+1).filter(s=>s===1||s===_?!0:s>=d-2&&s<=d+2).map((s,t,u)=>e.jsxs(Z.Fragment,{children:[t>0&&u[t]-u[t-1]>1&&e.jsx("span",{className:"px-1",children:"..."}),e.jsx(p,{size:"sm",variant:d===s?"default":"outline",onClick:()=>f(s),children:s})]},s)),e.jsx(p,{size:"sm",variant:"outline",disabled:d===_,onClick:()=>f(s=>s+1),children:"Next"})]})]})]})]}),r&&e.jsx(we,{unit:r,rooms:h,open:!!r,onClose:()=>w(null)}),N&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black/50 z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg text-center",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["QR Code - ",N.unit_code]}),e.jsx(je,{value:`Unit: ${N.unit_code}`,size:200}),e.jsx("div",{className:"mt-4",children:e.jsx(p,{variant:"outline",onClick:()=>n(null),children:"Close"})})]})})]})}export{ts as default};
