import{r,u as Y,j as s,b as J}from"./app-CIkTpY6h.js";import{I as K,c as Q,B as i}from"./input-BpDz82gW.js";import{A as W}from"./app-sidebar-B2Jjt4jQ.js";import{S as X,a as Z,b as ee,c as se}from"./index-B7G2ZUjb.js";import re from"./AddUnitModal-BHiZgZ06.js";import te from"./EditUnitModal-D9Cx59pW.js";import{S as P}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{T as ae,a as le,b as v,c as a,d as oe,e as t}from"./table-BL8-_IbH.js";import"./index-D-Upz9DL.js";import{B as ne,a as ce,b as ie,c as F,d as de}from"./breadcrumb-DwJEa0M-.js";import"./index-BQxaN_px.js";import"./index-DVsC1RVt.js";import"./index-D0woING1.js";import"./dialog-BBAqj5CN.js";import"./label-HuXPnHqC.js";const me=[{label:"Functional",color:"bg-green-500"},{label:"Defective",color:"bg-red-500"},{label:"Under Maintenance",color:"bg-yellow-500"},{label:"Needs Upgrade",color:"bg-blue-500"},{label:"For Disposal",color:"bg-gray-500"}];function Pe({units:l,rooms:f}){const[d,U]=r.useState(""),[o,N]=r.useState(1),[A,S]=r.useState(null),m=10,{delete:M}=Y(),[x,B]=r.useState("All Rooms"),[h,R]=r.useState("All Processors"),[p,T]=r.useState("All RAM"),[u,_]=r.useState("All Storage"),[j,L]=r.useState("All GPU"),[b,k]=r.useState("All Motherboards"),[g,q]=r.useState("All Conditions"),I=["All Rooms",...new Set(l.map(e=>e.room?.room_number||"N/A"))],z=["All Processors",...new Set(l.map(e=>e.processor||"N/A"))],D=["All RAM",...new Set(l.map(e=>e.ram||"N/A"))],O=["All Storage",...new Set(l.map(e=>e.storage||"N/A"))],G=["All GPU",...new Set(l.map(e=>e.gpu||"N/A"))],E=["All Motherboards",...new Set(l.map(e=>e.motherboard||"N/A"))],$=["All Conditions",...new Set(l.map(e=>e.condition||"N/A"))],C=r.useMemo(()=>l.filter(e=>{const n=e.unit_code.toLowerCase().includes(d.toLowerCase()),c=e.room?.room_number?.toLowerCase().includes(d.toLowerCase()),V=(x==="All Rooms"||e.room?.room_number===x)&&(h==="All Processors"||e.processor===h)&&(p==="All RAM"||e.ram===p)&&(u==="All Storage"||e.storage===u)&&(j==="All GPU"||e.gpu===j)&&(b==="All Motherboards"||e.motherboard===b)&&(g==="All Conditions"||e.condition===g);return(n||c)&&V}),[l,d,x,h,p,u,j,b,g]),y=Math.ceil(C.length/m),w=C.slice((o-1)*m,o*m),H=e=>{const n=me.find(c=>c.label.toLowerCase()===e.toLowerCase());return n?n.color:"bg-muted"};return s.jsxs(X,{children:[s.jsx(W,{}),s.jsxs(Z,{children:[s.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 border-b bg-white",children:[s.jsx(ee,{}),s.jsx(se,{orientation:"vertical",className:"h-6 mx-3"}),s.jsx(ne,{children:s.jsx(ce,{children:s.jsxs(ie,{children:[s.jsx(F,{href:"#","aria-current":"page",children:"Assets"}),s.jsx(de,{}),s.jsx(F,{href:"/units","aria-current":"page",className:"font-semibold text-foreground",children:"System Unit Lists"})]})})})]}),s.jsxs("main",{className:"w-full px-6 py-4",children:[s.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"System Units"}),s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx(K,{placeholder:"Search Unit Code...",value:d,onChange:e=>{U(e.target.value),N(1)},className:"mb-4 w-full sm:w-1/3"}),s.jsx(re,{rooms:f})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(ae,{children:[s.jsx(le,{children:s.jsxs(v,{className:"h-10",children:[s.jsx(a,{className:"px-2 py-1",children:"#"}),s.jsx(a,{className:"px-2 py-1",children:"Unit Code"}),s.jsx(a,{className:"px-2 py-1",children:s.jsx("select",{className:"border rounded px-1 pr-7 py-0.5 text-xs",value:x,onChange:e=>B(e.target.value),children:I.map(e=>s.jsx("option",{value:e,children:e},e))})}),s.jsx(a,{className:"px-2 py-1",children:s.jsx("select",{className:"border rounded px-1 py-0.5 text-xs",value:h,onChange:e=>R(e.target.value),children:z.map(e=>s.jsx("option",{value:e,children:e},e))})}),s.jsx(a,{className:"px-2 py-1",children:s.jsx("select",{className:"border rounded px-1 py-0.5 text-xs",value:p,onChange:e=>T(e.target.value),children:D.map(e=>s.jsx("option",{value:e,children:e},e))})}),s.jsx(a,{className:"px-2 py-1",children:s.jsx("select",{className:"border rounded px-1 py-0.5 text-xs",value:u,onChange:e=>_(e.target.value),children:O.map(e=>s.jsx("option",{value:e,children:e},e))})}),s.jsx(a,{className:"px-2 py-1",children:s.jsx("select",{className:"border rounded px-1 py-0.5 text-xs",value:j,onChange:e=>L(e.target.value),children:G.map(e=>s.jsx("option",{value:e,children:e},e))})}),s.jsx(a,{className:"px-2 py-1",children:s.jsx("select",{className:"border rounded px-1 py-0.5 text-xs",value:b,onChange:e=>k(e.target.value),children:E.map(e=>s.jsx("option",{value:e,children:e},e))})}),s.jsx(a,{className:"px-2 py-1",children:s.jsx("select",{className:"border rounded px-1 py-0.5 text-xs",value:g,onChange:e=>q(e.target.value),children:$.map(e=>s.jsx("option",{value:e,children:e},e))})}),s.jsx(a,{className:"px-2 py-1 text-center",children:"Actions"})]})}),s.jsx(oe,{children:w.length>0?w.map((e,n)=>s.jsxs(v,{children:[s.jsx(t,{children:(o-1)*m+n+1}),s.jsx(t,{children:e.unit_code}),s.jsxs(t,{children:["ROOM"," ",e.room?.room_number||"N/A"]}),s.jsx(t,{children:e.processor}),s.jsx(t,{children:e.ram}),s.jsx(t,{children:e.storage}),s.jsx(t,{children:e.gpu}),s.jsx(t,{children:e.motherboard}),s.jsx(t,{children:e.condition&&s.jsxs("div",{className:"mt-1 text-sm flex items-center gap-2",children:[s.jsx("span",{className:Q("inline-block w-3 h-3 rounded-full",H(e.condition))}),s.jsx("span",{className:"capitalize",children:e.condition})]})}),s.jsx(t,{children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(i,{size:"sm",variant:"secondary",onClick:()=>J.visit(`/system-units/view/${e.unit_code}`),children:"View"}),s.jsx(i,{size:"sm",variant:"secondary",onClick:()=>S(e),children:"Edit"}),s.jsx(i,{size:"sm",variant:"destructive",onClick:()=>{P.fire({title:`Delete ${e.unit_code}?`,text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(c=>{c.isConfirmed&&(M(`/system-units/${e.id}`),P.fire("Deleted!",`Unit ${e.unit_code} has been deleted.`,"success"))})},children:"Delete"})]})})]},e.id)):s.jsx(v,{children:s.jsx(t,{colSpan:10,className:"text-center py-4",children:"No matching units found."})})})]})}),s.jsxs("div",{className:"flex justify-between items-center mt-4",children:[s.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",o," of ",y]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(i,{size:"sm",variant:"outline",disabled:o===1,onClick:()=>N(e=>e-1),children:"Previous"}),s.jsx(i,{size:"sm",variant:"outline",disabled:o===y,onClick:()=>N(e=>e+1),children:"Next"})]})]}),A&&s.jsx(te,{unit:A,rooms:f,onClose:()=>S(null)})]})]})]})}export{Pe as default};
