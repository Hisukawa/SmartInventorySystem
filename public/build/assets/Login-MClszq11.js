import{r as p,j as e,u as W,H as X,a as _}from"./app-DDhUnE2m.js";import{b as Y,c as $,d as Q}from"./card-Bsnenf1n.js";import{I as S}from"./input-C2X0hyCy.js";import{L as A}from"./label-jeL0nPtL.js";import{B as D}from"./button-B1c6q6Il.js";import{u as F}from"./index-Dw4Tfyon.js";import{c as Z,d as ee,P as E,a as te,b as L}from"./index-DLKgAtZo.js";import{u as re}from"./index-Ba3CwDPH.js";import{u as se,C as ae}from"./index-B49AGyY0.js";import{c as T}from"./createLucideIcon-BxFlknb0.js";import"./index-4lmQzus2.js";var k="Checkbox",[oe,we]=Z(k),[ne,I]=oe(k);function ce(t){const{__scopeCheckbox:n,checked:r,children:o,defaultChecked:i,disabled:a,form:l,name:f,onCheckedChange:u,required:x,value:s="on",internal_do_not_use_render:m}=t,[c,w]=te({prop:r,defaultProp:i??!1,onChange:u,caller:k}),[g,b]=p.useState(null),[v,d]=p.useState(null),h=p.useRef(!1),y=g?!!l||!!g.closest("form"):!0,N={checked:c,disabled:a,setChecked:w,control:g,setControl:b,name:f,form:l,value:s,hasConsumerStoppedPropagationRef:h,required:x,defaultChecked:C(i)?!1:i,isFormControl:y,bubbleInput:v,setBubbleInput:d};return e.jsx(ne,{scope:n,...N,children:ie(m)?m(N):o})}var H="CheckboxTrigger",M=p.forwardRef(({__scopeCheckbox:t,onKeyDown:n,onClick:r,...o},i)=>{const{control:a,value:l,disabled:f,checked:u,required:x,setControl:s,setChecked:m,hasConsumerStoppedPropagationRef:c,isFormControl:w,bubbleInput:g}=I(H,t),b=F(i,s),v=p.useRef(u);return p.useEffect(()=>{const d=a?.form;if(d){const h=()=>m(v.current);return d.addEventListener("reset",h),()=>d.removeEventListener("reset",h)}},[a,m]),e.jsx(E.button,{type:"button",role:"checkbox","aria-checked":C(u)?"mixed":u,"aria-required":x,"data-state":z(u),"data-disabled":f?"":void 0,disabled:f,value:l,...o,ref:b,onKeyDown:L(n,d=>{d.key==="Enter"&&d.preventDefault()}),onClick:L(r,d=>{m(h=>C(h)?!0:!h),g&&w&&(c.current=d.isPropagationStopped(),c.current||d.stopPropagation())})})});M.displayName=H;var R=p.forwardRef((t,n)=>{const{__scopeCheckbox:r,name:o,checked:i,defaultChecked:a,required:l,disabled:f,value:u,onCheckedChange:x,form:s,...m}=t;return e.jsx(ce,{__scopeCheckbox:r,checked:i,defaultChecked:a,disabled:f,required:l,onCheckedChange:x,name:o,form:s,value:u,internal_do_not_use_render:({isFormControl:c})=>e.jsxs(e.Fragment,{children:[e.jsx(M,{...m,ref:n,__scopeCheckbox:r}),c&&e.jsx(K,{__scopeCheckbox:r})]})})});R.displayName=k;var O="CheckboxIndicator",q=p.forwardRef((t,n)=>{const{__scopeCheckbox:r,forceMount:o,...i}=t,a=I(O,r);return e.jsx(ee,{present:o||C(a.checked)||a.checked===!0,children:e.jsx(E.span,{"data-state":z(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:n,style:{pointerEvents:"none",...t.style}})})});q.displayName=O;var U="CheckboxBubbleInput",K=p.forwardRef(({__scopeCheckbox:t,...n},r)=>{const{control:o,hasConsumerStoppedPropagationRef:i,checked:a,defaultChecked:l,required:f,disabled:u,name:x,value:s,form:m,bubbleInput:c,setBubbleInput:w}=I(U,t),g=F(r,w),b=re(a),v=se(o);p.useEffect(()=>{const h=c;if(!h)return;const y=window.HTMLInputElement.prototype,P=Object.getOwnPropertyDescriptor(y,"checked").set,J=!i.current;if(b!==a&&P){const V=new Event("click",{bubbles:J});h.indeterminate=C(a),P.call(h,C(a)?!1:a),h.dispatchEvent(V)}},[c,b,a,i]);const d=p.useRef(C(a)?!1:a);return e.jsx(E.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??d.current,required:f,disabled:u,name:x,value:s,form:m,...n,tabIndex:-1,ref:g,style:{...n.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});K.displayName=U;function ie(t){return typeof t=="function"}function C(t){return t==="indeterminate"}function z(t){return C(t)?"indeterminate":t?"checked":"unchecked"}const G=p.forwardRef(({className:t,...n},r)=>e.jsx(R,{ref:r,className:T("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...n,children:e.jsx(q,{className:T("flex items-center justify-center text-current"),children:e.jsx(ae,{className:"h-4 w-4"})})}));G.displayName=R.displayName;function B(t){const n="=".repeat((4-t.length%4)%4),r=(t+n).replace(/-/g,"+").replace(/_/g,"/"),o=atob(r);return Uint8Array.from([...o].map(i=>i.charCodeAt(0)))}function j(t){const n=new Uint8Array(t);let r="";for(let o=0;o<n.byteLength;o++)r+=String.fromCharCode(n[o]);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function ve({status:t,canResetPassword:n}){const{data:r,setData:o,post:i,processing:a,errors:l,reset:f}=W({email:"",password:"",remember:!1}),u=s=>{s.preventDefault(),i(route("login"),{onFinish:()=>f("password")})},x=async()=>{try{const{data:s}=await _.post("/webauthn/login/options",{email:r.email});s.challenge=B(s.challenge),s.allowCredentials=s.allowCredentials.map(b=>({...b,id:B(b.id)}));const m={...s,authenticatorSelection:{authenticatorAttachment:"platform",userVerification:"required"}},c=await navigator.credentials.get({publicKey:m}),w={id:c.id,rawId:j(c.rawId),type:c.type,response:{clientDataJSON:j(c.response.clientDataJSON),authenticatorData:j(c.response.authenticatorData),signature:j(c.response.signature),userHandle:c.response.userHandle?j(c.response.userHandle):null}};(await _.post("/webauthn/login",{email:r.email,credential:w})).data.success?window.location.href="/faculty/dashboard":alert("Login failed.")}catch(s){console.error(s),alert("WebAuthn login failed.")}};return e.jsxs(e.Fragment,{children:[e.jsx(X,{title:"Log in"}),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 px-4",children:e.jsxs("div",{className:"w-full max-w-5xl grid grid-cols-1 md:grid-cols-2 bg-white shadow-lg rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"hidden md:flex flex-col items-center justify-center bg-green-500 text-white p-8 relative",children:[e.jsxs("div",{className:"flex space-x-4 mb-6",children:[e.jsx("div",{className:"w-28 h-28 rounded-full overflow-hidden border-4 border-white bg-white shadow-md",children:e.jsx("img",{src:"logo.png",alt:"Logo 1",className:"w-full h-full object-contain"})}),e.jsx("div",{className:"w-28 h-28 rounded-full overflow-hidden border-4 border-white bg-white shadow-md",children:e.jsx("img",{src:"/ict.png",alt:"Logo 2",className:"w-full h-full object-contain"})})]}),e.jsx("h2",{className:"text-2xl font-bold text-center",children:"ICT INVENTORY SYSTEM MANAGEMENT"}),e.jsx("p",{className:"mt-3 text-sm opacity-90 text-center",children:"Secure • Fast • Organized"})]}),e.jsxs("div",{className:"p-8 flex flex-col justify-center",children:[e.jsxs(Y,{className:"p-0 mb-6",children:[e.jsx($,{className:"text-2xl font-bold",children:"Login Account"}),e.jsx(Q,{children:"Please enter your details to log in"})]}),t&&e.jsx("div",{className:"mb-4 text-sm font-medium text-green-600",children:t}),e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(A,{htmlFor:"email",children:"Email Address"}),e.jsx(S,{id:"email",type:"email",name:"email",value:r.email,autoComplete:"username",onChange:s=>o("email",s.target.value)}),l.email&&e.jsx("p",{className:"text-sm text-red-500",children:l.email})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"flex justify-between",children:e.jsx(A,{htmlFor:"password",children:"Password"})}),e.jsx(S,{id:"password",type:"password",name:"password",value:r.password,autoComplete:"current-password",onChange:s=>o("password",s.target.value)}),l.password&&e.jsx("p",{className:"text-sm text-red-500",children:l.password})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{id:"remember",checked:r.remember,onCheckedChange:s=>o("remember",!!s)}),e.jsx("label",{htmlFor:"remember",className:"text-sm text-muted-foreground",children:"Remember me"})]}),e.jsx(D,{type:"submit",className:"w-full mt-2 bg-green-500 hover:bg-green-600 text-white",disabled:a,children:"Login"}),e.jsx(D,{type:"button",className:"w-full mt-4 bg-blue-500 hover:bg-blue-600 text-white",onClick:x,children:"Login with Device"}),e.jsxs("div",{className:"text-center text-sm mt-6",children:["Don’t have an account?"," ",e.jsx("span",{className:"text-gray-600",children:"Please contact the ICT Department Chairperson to request one."})]})]})]})]})})]})}export{ve as default};
