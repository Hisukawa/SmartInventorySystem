import{r as N,u as B,j as e,a as A,R as I}from"./app-kHyNT4lF.js";import{B as f}from"./button-BgwjlOXr.js";import{A as L}from"./app-sidebar-BDf5C8Bq.js";import{S as z,a as O,b as D,c as q}from"./avatar-dWCEBJmI.js";import G from"./EditUnitModal-DnYIkOL7.js";import{S as H}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{I as K}from"./input-Dsp5oAY_.js";import{N as $}from"./Notification-B3BTBmqC.js";import{T as X,a as J,b as _,c as C,d as Q,e as w}from"./table-Bm2NdiAG.js";import"./index-BmGysbAO.js";import{B as W,a as Y,b as Z,c as T,d as ee}from"./breadcrumb-BWUyEGrM.js";import{P as se,a as le,b as ae}from"./popover-R54zmfgv.js";import{S as u,a as p,b as j,c as b,d as o}from"./select-DOMRehfk.js";import{E as re}from"./eye-COEHxM-N.js";import{P as oe}from"./pen-D37IRQpO.js";import{F as te}from"./funnel-mZ_j2WNc.js";import{X as k}from"./index-BJLUWxVu.js";import"./index-ubtGDsgd.js";import"./index-CqqteC9B.js";import"./utils-D7BRKK_T.js";import"./dropdown-menu-BS64u0u2.js";import"./index-DZ837DVK.js";import"./index-Oi76tYVx.js";import"./chevron-right-jK4_JSOk.js";import"./sparkles-DTPrnIDa.js";import"./bell-B32XzaiO.js";import"./keyboard-zuznPr_q.js";import"./boxes-DRxdKIe-.js";import"./users-BSdM2OBp.js";import"./chevron-down-DpvZMe1T.js";import"./index-BznXTi43.js";import"./index-BoQ7LiMj.js";import"./dialog-CwmAS0wi.js";import"./label-DHLOXW11.js";import"./index-DXef1cMQ.js";const ne=[{label:"Functional",color:"bg-green-500"},{label:"Defective",color:"bg-red-500"},{label:"Under Maintenance",color:"bg-yellow-500"},{label:"Needs Upgrade",color:"bg-blue-500"},{label:"For Disposal",color:"bg-gray-500"}];function ce({filters:r={},filterOptions:d,onApplyFilters:S,onReset:g}){const[n,t]=N.useState(""),[c,x]=N.useState("");N.useEffect(()=>{const h=["unit_code","room_id","processor","ram","storage","gpu","motherboard","condition"].find(v=>!!r[v]);h?(t(h),x(String(r[h]))):(t(""),x(""))},[r]);const y=[{value:"unit_code",label:"Unit Code"},{value:"room_id",label:"Room"},{value:"processor",label:"Processor"},{value:"ram",label:"RAM"},{value:"storage",label:"Storage"},{value:"gpu",label:"GPU"},{value:"motherboard",label:"Motherboard"},{value:"condition",label:"Condition"}];function i(s){const h=s==="all"?"":s;x(h);const v={...r};n&&(v[n]=h),S(v)}const U=!!r.unit_code||!!r.room_id||!!r.processor||!!r.ram||!!r.storage||!!r.gpu||!!r.motherboard||!!r.condition;return e.jsxs(se,{children:[e.jsx(le,{asChild:!0,children:e.jsxs(f,{className:"flex items-center gap-2 bg-[hsl(142,34%,51%)] text-white border-none hover:bg-[hsl(142,34%,45%)]",children:[e.jsx(te,{className:"h-4 w-4"}),"Filter",U&&e.jsx(k,{className:"h-4 w-4 ml-1 cursor-pointer",onClick:s=>{s.stopPropagation(),t(""),x(""),g()}})]})}),e.jsxs(ae,{className:"w-[calc(100vw-2rem)] sm:w-[380px] p-4",children:[e.jsx("h4",{className:"font-medium mb-3 text-lg",children:"Filter Options"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs(u,{value:n,onValueChange:s=>{t(s),x("")},children:[e.jsx(p,{className:"w-full",children:e.jsx(j,{placeholder:"Select Field"})}),e.jsx(b,{children:y.map(s=>e.jsx(o,{value:s.value,children:s.label},s.value))})]}),n==="unit_code"&&e.jsxs(u,{value:c||"all",onValueChange:i,children:[e.jsx(p,{className:"w-full",children:e.jsx(j,{placeholder:"Select Unit Code"})}),e.jsxs(b,{children:[e.jsx(o,{value:"all",children:"All"}),d.unit_codes.map(s=>e.jsx(o,{value:s,children:s},s))]})]}),n==="room_id"&&e.jsxs(u,{value:c||"all",onValueChange:i,children:[e.jsx(p,{className:"w-full",children:e.jsx(j,{placeholder:"Select Room"})}),e.jsxs(b,{children:[e.jsx(o,{value:"all",children:"All"}),Object.entries(d.rooms).map(([s,h])=>e.jsxs(o,{value:s,children:["Room ",h]},s))]})]}),n==="processor"&&e.jsxs(u,{value:c||"all",onValueChange:i,children:[e.jsx(p,{className:"w-full",children:e.jsx(j,{placeholder:"Select Processor"})}),e.jsxs(b,{children:[e.jsx(o,{value:"all",children:"All"}),d.processors.map(s=>e.jsx(o,{value:s,children:s},s))]})]}),n==="ram"&&e.jsxs(u,{value:c||"all",onValueChange:i,children:[e.jsx(p,{className:"w-full",children:e.jsx(j,{placeholder:"Select RAM"})}),e.jsxs(b,{children:[e.jsx(o,{value:"all",children:"All"}),d.rams.map(s=>e.jsx(o,{value:s,children:s},s))]})]}),n==="storage"&&e.jsxs(u,{value:c||"all",onValueChange:i,children:[e.jsx(p,{className:"w-full",children:e.jsx(j,{placeholder:"Select Storage"})}),e.jsxs(b,{children:[e.jsx(o,{value:"all",children:"All"}),d.storages.map(s=>e.jsx(o,{value:s,children:s},s))]})]}),n==="gpu"&&e.jsxs(u,{value:c||"all",onValueChange:i,children:[e.jsx(p,{className:"w-full",children:e.jsx(j,{placeholder:"Select GPU"})}),e.jsxs(b,{children:[e.jsx(o,{value:"all",children:"All"}),d.gpus.map(s=>e.jsx(o,{value:s,children:s},s))]})]}),n==="motherboard"&&e.jsxs(u,{value:c||"all",onValueChange:i,children:[e.jsx(p,{className:"w-full",children:e.jsx(j,{placeholder:"Select Motherboard"})}),e.jsxs(b,{children:[e.jsx(o,{value:"all",children:"All"}),d.motherboards.map(s=>e.jsx(o,{value:s,children:s},s))]})]}),n==="condition"&&e.jsxs(u,{value:c||"all",onValueChange:i,children:[e.jsx(p,{className:"w-full",children:e.jsx(j,{placeholder:"Select Condition"})}),e.jsxs(b,{children:[e.jsx(o,{value:"all",children:"All"}),d.conditions.map(s=>e.jsx(o,{value:s,children:s},s))]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(f,{size:"sm",variant:"outline",onClick:()=>{t(""),x(""),g()},children:[e.jsx(k,{className:"mr-1 h-4 w-4"})," Reset"]})})]})]})]})}function Ge({units:r,rooms:d,filters:S={}}){const[g,n]=N.useState(S.search||""),[t,c]=N.useState(1),[x,y]=N.useState(null),i=10;B();const U=()=>{H.fire({icon:"success",title:"Updated!",text:"The system unit has been updated successfully."})},s=N.useMemo(()=>{const l=a=>[...new Set(a.filter(m=>m!==null&&m!==""))].sort();return{rooms:Object.fromEntries(d.map(a=>[String(a.id),a.room_number])),unit_codes:l(r.map(a=>a.unit_code)),processors:l(r.map(a=>a.processor)),rams:l(r.map(a=>a.ram)),storages:l(r.map(a=>a.storage)),gpus:l(r.map(a=>a.gpu)),motherboards:l(r.map(a=>a.motherboard)),conditions:l(r.map(a=>a.condition))}},[r,d]);function h(l){const a=Object.fromEntries(Object.entries({...l,search:g||void 0}).filter(([,m])=>m!==""&&m!==void 0));A.get(route("system-units.index"),a,{preserveState:!0,replace:!0})}function v(){n(""),A.get(route("system-units.index"),{},{preserveState:!0,replace:!0})}function M(l){l.key==="Enter"&&h(S)}const F=N.useMemo(()=>{if(!g)return r;const l=g.toLowerCase();return r.filter(a=>{const m=a.unit_code?.toLowerCase()||"",E=a.room?.room_number?.toLowerCase()||"";return m.includes(l)||E.includes(l)})},[r,g]),P=Math.ceil(F.length/i)||1,V=F.slice((t-1)*i,t*i),R=l=>ne.find(m=>m.label.toLowerCase()===(l||"").toLowerCase())||{label:l||"Unknown",color:"bg-slate-400"};return e.jsxs(z,{children:[e.jsx(L,{}),e.jsxs(O,{children:[e.jsx("header",{className:"sticky top-0 z-20 bg-white border-b px-6 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{}),e.jsx(q,{orientation:"vertical",className:"h-6 mx-3"}),e.jsx(W,{children:e.jsx(Y,{children:e.jsxs(Z,{children:[e.jsx(T,{href:"#","aria-current":"page",children:"Assets"}),e.jsx(ee,{}),e.jsx(T,{href:"/admin/system-units","aria-current":"page",className:"font-semibold text-foreground",children:"System Unit Lists"})]})})}),e.jsx("div",{className:"flex-1"}),e.jsx($,{})]})}),e.jsxs("main",{className:"w-full px-6 py-4",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"System Units"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-stretch sm:items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(ce,{filters:S,filterOptions:s,onApplyFilters:h,onReset:v}),e.jsx(K,{placeholder:"Search Unit Code or Room",value:g,onChange:l=>{const a=l.target.value;n(a),c(1)},onKeyDown:M,className:`flex-1 min-w-0 sm:max-w-xs w-full 
                                border-[hsl(142,34%,51%)] text-[hsl(142,34%,20%)] 
                                focus:border-[hsl(142,34%,45%)] focus:ring-[hsl(142,34%,45%)] 
                                placeholder:text-[hsl(142,34%,40%)]`})]}),e.jsx(f,{className:"bg-[hsl(142,34%,51%)] text-white border-none hover:bg-[hsl(142,34%,45%)]",onClick:()=>A.visit(route("admin.system-units.create")),children:"Add New Unit"})]}),e.jsx("div",{className:"overflow-x-auto rounded-lg shadow-lg",children:e.jsxs(X,{className:"w-full bg-white table-fixed",children:[e.jsx(J,{children:e.jsxs(_,{className:"bg-[hsl(142,34%,85%)] text-[hsl(142,34%,25%)] hover:bg-[hsl(142,34%,80%)] h-10",children:[e.jsx(C,{className:"px-5 py-1",children:"#"}),e.jsx(C,{className:"px-5 py-1",children:"PC Code"}),e.jsx(C,{className:"px-5 py-1",children:"Room"}),e.jsx(C,{className:"px-5 py-1",children:"Condition"}),e.jsx(C,{className:"px-5 py-1",children:"Action"})]})}),e.jsx(Q,{children:V.length>0?V.map((l,a)=>e.jsxs(_,{className:"hover:shadow-sm",children:[e.jsx(w,{className:"px-5 py-1",children:(t-1)*i+a+1}),e.jsx(w,{className:"px-5 py-1",children:l.unit_code}),e.jsxs(w,{className:"px-5 py-1",children:["ROOM"," ",l.room?.room_number||"N/A"]}),e.jsx(w,{className:"px-5 py-1",children:l.condition?e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium text-white ${R(l.condition).color}`,children:R(l.condition).label}):"N/A"}),e.jsx(w,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(f,{size:"sm",className:"flex items-center gap-2 bg-[hsl(142,34%,51%)] text-white border-none hover:bg-[hsl(142,34%,45%)]",onClick:()=>A.visit(`/system-units/view/${l.unit_code}`),children:[e.jsx(re,{className:"h-4 w-4"}),"View"]}),e.jsxs(f,{size:"sm",className:"flex items-center gap-2 bg-[hsl(142,34%,51%)] text-white border-none hover:bg-[hsl(142,34%,45%)]",onClick:()=>{y(l),setShowModal(!0)},children:[e.jsx(oe,{className:"h-4 w-4"}),"Edit"]})]})})]},l.id)):e.jsx(_,{children:e.jsx(w,{colSpan:5,className:"text-center py-4",children:"No matching units found."})})})]})}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",t," of ",P]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(f,{size:"sm",variant:"outline",disabled:t===1,onClick:()=>c(l=>l-1),children:"Previous"}),Array.from({length:P},(l,a)=>a+1).filter(l=>l===1||l===P?!0:l>=t-2&&l<=t+2).map((l,a,m)=>e.jsxs(I.Fragment,{children:[a>0&&m[a]-m[a-1]>1&&e.jsx("span",{className:"px-1",children:"..."}),e.jsx(f,{size:"sm",variant:t===l?"default":"outline",onClick:()=>c(l),children:l})]},l)),e.jsx(f,{size:"sm",variant:"outline",disabled:t===P,onClick:()=>c(l=>l+1),children:"Next"})]})]}),x&&e.jsx(G,{unit:x,rooms:d,onClose:()=>y(null),onSuccess:U})]})]})]})}export{Ge as default};
