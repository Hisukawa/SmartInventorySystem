import{u as O,r as p,b as C,j as e,H as w}from"./app-BIjSPbTs.js";import{B}from"./button-zoQErkYR.js";import{C as P,a as A}from"./card-DYcyojCr.js";import{I as E}from"./input-Bd_sEB19.js";import{L as a}from"./label-DcrK2R5i.js";import{S as M,a as k,b as F,c as D}from"./avatar-KF4Ic1q3.js";import{T as I}from"./technician-app-sidebar-9roH2eKo.js";import{S as j}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{B as L,a as R,b as T,c as u,d as f}from"./breadcrumb-DeHw0c_A.js";import"./index-UR7owYEk.js";import"./utils-CBfrqCZ4.js";import"./index-JGFnjXQz.js";import"./index-CULORmfT.js";import"./createLucideIcon-Bjp0wylh.js";import"./index-C14JqLgY.js";import"./index-R7N4lbby.js";import"./dropdown-menu-CJfZ9yh7.js";import"./index-VxKqmO_x.js";import"./chevron-right-B6fVEe24.js";import"./index-D77uxBlS.js";import"./index-D2IJIATQ.js";import"./index-CS2k7xiV.js";import"./boxes-B8l1w8L3.js";function le({existingRooms:l=[],existingUnits:x=[],existingBrands:b=[],existingModels:v=[]}){const{data:i,setData:o,post:_,reset:y,processing:g,errors:t}=O({type:"",brand:"",model:"",serial_number:"",condition:"Working",room_id:"",unit_id:""}),[c,h]=p.useState([]),{flash:m}=C().props;p.useEffect(()=>{m?.success&&j.fire({icon:"success",title:"Peripheral Added",text:m.success,timer:2e3,showConfirmButton:!1})},[m]),p.useEffect(()=>{if(i.room_id){const r=x.filter(s=>String(s.room_id)===String(i.room_id));h(r),r.find(s=>s.id===i.unit_id)||o("unit_id","")}else h([]),o("unit_id","")},[i.room_id,x]);function N(r){r.preventDefault(),_("/technician/peripherals/create",i,{onSuccess:()=>{y()},onError:s=>{j.fire({icon:"error",title:"Error",text:s?.type||"Failed to add peripheral. Please check your input."})}})}return e.jsxs(M,{children:[e.jsx(w,{title:"Add Peripheral"}),e.jsx(I,{}),e.jsxs(k,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 border-b bg-white",children:[e.jsx(F,{}),e.jsx(D,{orientation:"vertical",className:"h-6 mx-3"}),e.jsx(L,{children:e.jsx(R,{children:e.jsxs(T,{children:[e.jsx(u,{href:"#",children:"Assets"}),e.jsx(f,{}),e.jsx(u,{href:"/technician/peripherals",children:"Peripherals"}),e.jsx(f,{}),e.jsx(u,{href:"/technician/peripherals/create",className:"font-semibold text-foreground",children:"Add Peripheral"})]})})})]}),e.jsxs("main",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-5 text-center",children:"Add Peripheral"}),e.jsx(P,{className:"max-w-xl mx-auto",children:e.jsx(A,{children:e.jsxs("form",{onSubmit:N,className:"space-y-4 mt-4",children:[e.jsxs("div",{children:[e.jsx(a,{children:"Type"}),e.jsx("input",{list:"typeOptions",value:i.type,onChange:r=>o("type",r.target.value),placeholder:"Select or type peripheral type",className:"w-full border rounded px-2 py-1"}),e.jsxs("datalist",{id:"typeOptions",children:[e.jsx("option",{value:"Mouse"}),e.jsx("option",{value:"Keyboard"})]}),t.type&&e.jsx("div",{className:"text-red-500 text-sm",children:t.type})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"room_number",children:"Room"}),e.jsx("input",{id:"room_number",list:"roomOptions",value:i.room_id?`ROOM ${l.find(r=>r.id===i.room_id)?.room_number}`:"",onChange:r=>{const s=r.target.value,d=s.startsWith("ROOM ")?s.slice(5):s,n=l.find(S=>String(S.room_number)===d);o("room_id",n?n.id:"")},placeholder:"Select or type room",className:"w-full border rounded px-2 py-1"}),e.jsx("datalist",{id:"roomOptions",children:l.map(r=>e.jsx("option",{value:`ROOM ${r.room_number}`},r.id))}),t.room_id&&e.jsx("div",{className:"text-red-500 text-sm",children:t.room_id})]}),e.jsxs("div",{children:[e.jsx(a,{children:"Unit Code"}),e.jsx("input",{list:"unitOptions",value:i.unit_id&&c.find(r=>r.id===i.unit_id)?.unit_code||"",onChange:r=>{const s=r.target.value,d=c.find(n=>n.unit_code===s);o("unit_id",d?d.id:"")},placeholder:"Select or type unit code",className:"w-full border rounded px-2 py-1",disabled:!i.room_id}),e.jsx("datalist",{id:"unitOptions",children:c.map(r=>e.jsx("option",{value:r.unit_code},r.id))}),t.unit_id&&e.jsx("div",{className:"text-red-500 text-sm",children:t.unit_id})]}),e.jsxs("div",{children:[e.jsx(a,{children:"Brand"}),e.jsx("input",{list:"brandOptions",value:i.brand,onChange:r=>o("brand",r.target.value),placeholder:"Select or type brand",className:"w-full border rounded px-2 py-1"}),e.jsx("datalist",{id:"brandOptions",children:b.map(r=>e.jsx("option",{value:r},r))}),t.brand&&e.jsx("div",{className:"text-red-500 text-sm",children:t.brand})]}),e.jsxs("div",{children:[e.jsx(a,{children:"Model"}),e.jsx("input",{list:"modelOptions",value:i.model,onChange:r=>o("model",r.target.value),placeholder:"Select or type model",className:"w-full border rounded px-2 py-1"}),e.jsx("datalist",{id:"modelOptions",children:v.map(r=>e.jsx("option",{value:r},r))}),t.model&&e.jsx("div",{className:"text-red-500 text-sm",children:t.model})]}),e.jsxs("div",{children:[e.jsx(a,{children:"Serial Number"}),e.jsx(E,{value:i.serial_number,onChange:r=>o("serial_number",r.target.value),placeholder:"Enter serial number",className:"w-full border rounded px-2 py-1"})]}),e.jsxs("div",{children:[e.jsx(a,{children:"Condition"}),e.jsxs("select",{value:i.condition,onChange:r=>o("condition",r.target.value),className:"w-full border rounded px-2 py-1",children:[e.jsx("option",{value:"Working",children:"ðŸŸ¢ Working"}),e.jsx("option",{value:"Defective",children:"ðŸ”´ Defective"}),e.jsx("option",{value:"Maintenance",children:"ðŸŸ¡ Maintenance"})]}),t.condition&&e.jsx("div",{className:"text-red-500 text-sm",children:t.condition})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(B,{type:"submit",disabled:g,className:"bg-[hsl(142,31%,51%)] hover:bg-[hsl(142,31%,45%)] text-white font-medium",children:"Submit"})})]})})})]})]})]})}export{le as default};
