import{b as y,u as k,r as c,j as e,H as w}from"./app-FC1U-uTU.js";import{B as O}from"./button-DQdr5HDf.js";import{C as U,c as P}from"./card-D1Z4z_lb.js";import{I as m}from"./input-BJ8Z-0jM.js";import{L as d}from"./label-BWGMQjzL.js";import{S as $,a as L,b as R,c as B}from"./avatar-DUETvLSO.js";import{A as D}from"./app-sidebar-JjNZzTDp.js";import{c as I}from"./utils-BE88PE2l.js";import{B as M,a as A,b as T,c as u,d as h}from"./breadcrumb-CXgt-dVw.js";import"./index-D8I8jTRo.js";import"./index-BbcJaTle.js";import"./index-DrezYJLL.js";import"./index-BClNLk5S.js";import"./dropdown-menu-Bes4Wl3l.js";import"./index-CZujx-lZ.js";import"./chevron-right-DzZnjBIF.js";import"./index-pZ6jIi2w.js";import"./index-DDek2YJZ.js";import"./sparkles-BcDgX7xg.js";import"./bell-BN1MZd3Y.js";import"./keyboard-CVHosXw-.js";import"./boxes-ut5YPV1R.js";import"./file-text-DrrBmEVG.js";import"./users-omEQPJM7.js";import"./chevron-down-2-A9pIXt.js";const g=[{label:"Functional",color:"bg-green-500"},{label:"Needs Boot / Pending Check",color:"bg-orange-500"},{label:"Defective",color:"bg-red-500"},{label:"Under Maintenance",color:"bg-yellow-500"},{label:"Needs Upgrade",color:"bg-blue-500"},{label:"For Disposal",color:"bg-gray-500"}],E=["Working","Needs Boot / Check-up","Needs Upgrade","Defective","Under Maintenance","Not Present"],a=["Processor","RAM","Storage","GPU","Motherboard"];function ue(){const{rooms:x}=y().props,{data:n,setData:i,post:b,processing:j,errors:r,reset:f}=k({unit_code:"",condition:"",room_id:"",condition_locked:!1,...a.reduce((o,t)=>(o[`${t.toLowerCase()}_condition`]="",o[`${t.toLowerCase()}_remark`]="",o),{})}),N=o=>{if(!o)return"bg-muted";const t=g.find(s=>s.label.toLowerCase()===o.toLowerCase());return t?t.color:"bg-muted"},v=o=>{o.preventDefault(),b("/admin/system-units",{onSuccess:()=>f()})},[l,C]=c.useState("");c.useEffect(()=>{const o=x.find(t=>`ROOM ${t.room_number}`.toLowerCase()===l.toLowerCase());o?i("room_id",o.id):i("room_id","")},[l]);const p=()=>{const o=a.map(s=>n[`${s.toLowerCase()}_condition`]);return o.every(s=>s===""||s===null||s===void 0)?"Needs Boot / Pending Check":o.includes("Defective")?"Defective":o.includes("Needs Upgrade")?"Needs Upgrade":o.includes("Under Maintenance")?"Under Maintenance":o.includes("Not Present")?"Needs Upgrade":"Functional"},_=a.map(o=>n[`${o.toLowerCase()}_condition`]);c.useEffect(()=>{if(n.condition_locked)return;const o=p();n.condition!==o&&i("condition",o)},[n.condition_locked,..._]);const S=()=>{const o=p();i("condition",o),i("condition_locked",!1)};return e.jsxs($,{children:[e.jsx(w,{title:"Add System Unit"}),e.jsx(D,{}),e.jsxs(L,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 border-b bg-white",children:[e.jsx(R,{}),e.jsx(B,{orientation:"vertical",className:"h-6 mx-3"}),e.jsx(M,{children:e.jsx(A,{children:e.jsxs(T,{children:[e.jsx(u,{href:"#",children:"Assets"}),e.jsx(h,{}),e.jsx(u,{href:"/admin/system-units",children:"System Units"}),e.jsx(h,{}),e.jsx(u,{href:"/admin/system-units/create",className:"font-semibold text-foreground",children:"Add Unit"})]})})})]}),e.jsxs("main",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-5 text-center",children:"Add System Unit"}),e.jsx(U,{className:"max-w-3xl mx-auto",children:e.jsx(P,{children:e.jsxs("form",{onSubmit:v,className:"space-y-6 mt-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"room_number",children:"Room"}),e.jsx(m,{id:"room_number",list:"room-options",value:l,onChange:o=>C(o.target.value),placeholder:"Search or select room"}),e.jsx("datalist",{id:"room-options",children:x.map(o=>e.jsx("option",{value:`ROOM ${o.room_number}`},o.id))}),r.room_id&&e.jsx("p",{className:"text-sm text-red-500",children:r.room_id})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"unit_code",children:"Unit Code"}),e.jsx(m,{id:"unit_code",value:n.unit_code,onChange:o=>i("unit_code",o.target.value),placeholder:"e.g. PC-01",required:!0}),r.unit_code&&e.jsx("p",{className:"text-sm text-red-500",children:r.unit_code})]}),e.jsxs("div",{children:[e.jsx(d,{className:"mb-2 block text-sm font-medium",children:"Components & Conditions"}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:a.map(o=>{const t=o.toLowerCase();return e.jsxs("div",{className:"border rounded-lg p-3 bg-white shadow-sm",children:[e.jsx("div",{className:"flex items-center justify-between gap-3",children:e.jsx(d,{className:"font-medium",children:o})}),e.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2",children:[e.jsxs("select",{id:`${t}_condition`,className:"w-full border rounded p-2",value:n[`${t}_condition`]||"",onChange:s=>i(`${t}_condition`,s.target.value),children:[e.jsx("option",{value:"",children:"-- Select Condition --"}),E.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsx(m,{id:`${t}_remark`,value:n[`${t}_remark`]||"",onChange:s=>i(`${t}_remark`,s.target.value),placeholder:`Remarks (optional) â€” e.g. ${o} overheating / slot not detected`}),r[`${t}_condition`]&&e.jsx("p",{className:"text-sm text-red-500",children:r[`${t}_condition`]})]})]},o)})})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"condition",className:"mb-1",children:"Overall PC Condition"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{id:"condition",className:"flex-1 border rounded p-2",value:n.condition||"",onChange:o=>{i("condition",o.target.value),i("condition_locked",!0)},children:[e.jsx("option",{value:"",children:"-- Select Overall Condition --"}),g.map(o=>e.jsx("option",{value:o.label,children:o.label},o.label))]}),n.condition_locked?e.jsx("button",{type:"button",onClick:S,className:"text-sm px-3 py-1 border rounded bg-white hover:bg-gray-50",title:"Reset to suggested based on components",children:"Reset to Suggested"}):e.jsx("span",{className:"text-sm italic text-muted-foreground",children:"Auto-suggested"})]}),n.condition&&e.jsxs("div",{className:"mt-2 text-sm flex items-center gap-2",children:[e.jsx("span",{className:I("inline-block w-3 h-3 rounded-full",N(n.condition))}),e.jsx("span",{className:"capitalize",children:n.condition})]}),r.condition&&e.jsx("p",{className:"text-sm text-red-500",children:r.condition})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(O,{type:"submit",disabled:j,className:"bg-[hsl(142,31%,51%)] hover:bg-[hsl(142,31%,45%)] text-white font-medium",children:"Submit"})})]})})})]})]})]})}export{ue as default};
