import{b as n,r as x,j as e,H as d,c}from"./app-BHFLZkgY.js";import{S as a}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{S as p,a as h,b as u,c as y}from"./avatar-W39o4vho.js";import{N as f}from"./Notification-DKd5kOQ-.js";import{B as j,a as N,b as g,c as b}from"./breadcrumb-BE4EEQtI.js";import{A as w}from"./app-sidebar-BFxBWQaW.js";import{T as v}from"./TopNavBar-BiglzTCJ.js";import"./index-CfEcHikG.js";import"./button-D3kxKWVq.js";import"./utils-CBfrqCZ4.js";import"./input-CqTxF5Gi.js";import"./index-YIhg1bg3.js";import"./index-C4tL8Hzj.js";import"./createLucideIcon-7fKX-80X.js";import"./index-DLJowjBa.js";import"./dropdown-menu-BP2CP2oH.js";import"./index-AsWrxraX.js";import"./chevron-right-CfjM-mey.js";import"./index-CHraPEnO.js";import"./index-LNMs_Plz.js";import"./bell-CmyMQHpQ.js";import"./house-NUu1h43w.js";import"./user-C5MtAH5l.js";import"./log-out-DXPEp6Vd.js";import"./keyboard-BF2PNz6p.js";import"./boxes-MuMkonc8.js";import"./users-oPZ7jLZI.js";import"./chevron-down-CJ6VoiBg.js";import"./cpu-NLjPAz1A.js";import"./hard-drive-beEBPMLr.js";function ee(){const{histories:o}=n().props,[s,m]=x.useState(o||[]),l=async t=>{a.fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(async r=>{if(r.isConfirmed)try{await c.delete(`/equipment-history/${t}`),m(s.filter(i=>i.id!==t)),a.fire({title:"Deleted!",text:"History has been deleted.",icon:"success",timer:1e3,showConfirmButton:!1})}catch(i){console.error("Error deleting history:",i),a.fire("Error!","Failed to delete history.","error")}})};return e.jsxs(p,{children:[e.jsx(w,{}),e.jsxs(h,{children:[e.jsx("header",{className:"sticky top-0 z-20 bg-white border-b px-6 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{}),e.jsx(y,{orientation:"vertical",className:"h-6 mx-3"}),e.jsx(j,{children:e.jsx(N,{children:e.jsx(g,{children:e.jsx(b,{href:"/equipment-history","aria-current":"page",className:"font-semibold text-foreground",children:"Equipment History"})})})}),e.jsx("div",{className:"flex-1"}),e.jsx(f,{})]})}),e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsx(v,{}),e.jsx(d,{title:"Equipment History"}),e.jsx("h1",{className:"text-2xl text-center font-bold mt-5 mb-4",children:"Equipment History"}),s.length===0?e.jsx("p",{className:"text-center mt-10",children:"No equipment history found."}):e.jsx("div",{className:"overflow-x-auto bg-white shadow rounded-lg",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500",children:"#"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500",children:"User Name"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500",children:"Equipment Name"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500",children:"Action"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500",children:"Component"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500",children:"Old Value"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500",children:"New Value"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500",children:"Room Number"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500",children:"Date & Time"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500",children:"Manage"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map((t,r)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:r+1}),e.jsx("td",{className:"px-4 py-2",children:t.user?.name||"N/A"}),e.jsx("td",{className:"px-4 py-2",children:t.equipment_name}),e.jsx("td",{className:"px-4 py-2",children:t.action}),e.jsx("td",{className:"px-4 py-2",children:t.component}),e.jsx("td",{className:"px-4 py-2",children:t.old_value||"-"}),e.jsx("td",{className:"px-4 py-2",children:t.new_value||"-"}),e.jsxs("td",{className:"px-4 py-2",children:["Room"," ",t.room?.room_number||"N/A"]}),e.jsx("td",{className:"px-4 py-2",children:new Date(t.created_at).toLocaleString()}),e.jsx("td",{className:"px-4 py-2",children:t.action!=="Deleted"&&e.jsx("button",{className:"px-2 py-1 text-white bg-red-500 rounded hover:bg-red-600",onClick:()=>l(t.id),children:"Delete"})})]},t.id))})]})})]})]})]})}export{ee as default};
