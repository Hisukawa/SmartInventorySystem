import{r as n,j as s,L as v,b as A}from"./app-5DmUN0kF.js";import{I as U,B as c}from"./input-DEkMsTr8.js";import{C as E,a as M}from"./card-Cyo8HWk1.js";import{S as Q,a as H,b as O,c as $}from"./index-CbG2odkv.js";import{S as K}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{Q as Y}from"./index-BrDr4AWl.js";import{T as G,a as J,b as C,c as i,d as V,e as a}from"./table-Dt4aZB_I.js";import{B as W,a as X,b as Z,c as g,d as ee}from"./breadcrumb-DiAyElkC.js";import{A as se}from"./app-sidebar-B7RsHeaW.js";import"./index-CusqpUmW.js";import"./index-DdpRtl3t.js";import"./index-Df0Jxxao.js";import"./index-C2TVYirP.js";import"./chevron-right-CdF2Q6da.js";function be({peripherals:l,search:w}){const[re,te]=n.useState(l||[]),[r,N]=n.useState(w||""),[d,y]=n.useState("All Types"),[m,_]=n.useState("All Serials"),[h,T]=n.useState("All Conditions"),[u,L]=n.useState("All Rooms"),[x,B]=n.useState("All Unit Codes"),[o,p]=n.useState(1),j=10,P=["All Types",...new Set(l.map(e=>e.type||"N/A"))],F=["All Serials",...new Set(l.map(e=>e.serial_number||"N/A"))],R=["All Conditions",...new Set(l.map(e=>e.condition||"N/A"))],k=["All Rooms",...new Set(l.map(e=>e.room?.room_number||"N/A"))],q=["All Unit Codes",...new Set(l.map(e=>e.unit_code||"N/A"))];function z(e){K.fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&A.delete(`/admin/peripherals/${e}`)})}const D=e=>{e.key==="Enter"&&A.get("/admin/peripherals",{search:r})},b=n.useMemo(()=>l.filter(e=>{const t=r===""||e.peripheral_code?.toLowerCase().includes(r.toLowerCase())||e.type?.toLowerCase().includes(r.toLowerCase())||e.serial_number?.toLowerCase().includes(r.toLowerCase())||e.condition?.toLowerCase().includes(r.toLowerCase())||(e.room?.room_number||"N/A").toLowerCase().includes(r.toLowerCase())||e.unit_code?.toLowerCase().includes(r.toLowerCase()),I=(d==="All Types"||e.type===d)&&(m==="All Serials"||e.serial_number===m)&&(h==="All Conditions"||e.condition===h)&&(u==="All Rooms"||(e.room?.room_number||"N/A")===u)&&(x==="All Unit Codes"||e.unit_code===x);return t&&I}),[l,r,d,m,h,u,x]),f=Math.ceil(b.length/j),S=b.slice((o-1)*j,o*j);return s.jsxs(Q,{children:[s.jsx(se,{}),s.jsxs(H,{children:[s.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 border-b bg-white",children:[s.jsx(O,{}),s.jsx($,{orientation:"vertical",className:"h-6 mx-3"}),s.jsx(W,{children:s.jsx(X,{children:s.jsxs(Z,{children:[s.jsx(g,{href:"#",children:"Assets"}),s.jsx(ee,{}),s.jsx(g,{href:"/admin/peripherals","aria-current":"page",className:"font-semibold text-foreground",children:"Peripherals"})]})})})]}),s.jsx("main",{children:s.jsxs("div",{className:"p-6",children:[s.jsx("h1",{className:"text-2xl font-bold mb-5",children:"Peripherals"}),s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx(U,{placeholder:"Search peripherals...",value:r,onChange:e=>N(e.target.value),onKeyDown:D,className:"w-full sm:w-1/3"}),s.jsx("div",{className:"flex items-center space-x-4",children:s.jsx(v,{href:"/admin/peripherals/create",children:s.jsx(c,{children:"Add Peripheral"})})})]}),s.jsx(E,{children:s.jsxs(M,{children:[s.jsxs(G,{children:[s.jsx(J,{children:s.jsxs(C,{children:[s.jsx(i,{children:"#"}),s.jsx(i,{children:"Peripheral Code"}),s.jsx(i,{children:s.jsx("select",{className:"border rounded px-1 pr-7 py-0.5 text-xs",value:d,onChange:e=>y(e.target.value),children:P.map(e=>s.jsx("option",{value:e,children:e},e))})}),s.jsx(i,{children:s.jsx("select",{className:"border rounded px-1 pr-7 py-0.5 text-xs",value:m,onChange:e=>_(e.target.value),children:F.map(e=>s.jsx("option",{value:e,children:e},e))})}),s.jsx(i,{children:s.jsx("select",{className:"border rounded px-1 pr-7 py-0.5 text-xs",value:h,onChange:e=>T(e.target.value),children:R.map(e=>s.jsx("option",{value:e,children:e},e))})}),s.jsx(i,{children:s.jsx("select",{className:"border rounded px-1 pr-7 py-0.5 text-xs",value:u,onChange:e=>L(e.target.value),children:k.map(e=>s.jsx("option",{value:e,children:e},e))})}),s.jsx(i,{children:s.jsx("select",{className:"border rounded px-1 pr-7 py-0.5 text-xs",value:x,onChange:e=>B(e.target.value),children:q.map(e=>s.jsx("option",{value:e,children:e},e))})}),s.jsx(i,{children:"QR Code"}),s.jsx(i,{children:"Actions"})]})}),s.jsx(V,{children:S.length>0?S.map((e,t)=>s.jsxs(C,{children:[s.jsx(a,{children:(o-1)*j+t+1}),s.jsx(a,{children:e.peripheral_code}),s.jsx(a,{children:e.type}),s.jsx(a,{children:e.serial_number}),s.jsx(a,{children:e.condition}),s.jsxs(a,{children:["ROOM"," ",e.room?e.room.room_number:"N/A"]}),s.jsx(a,{children:e.unit_code}),s.jsx(a,{children:e.qr_code_path&&s.jsx(Y,{value:e.qr_code_path,size:48})}),s.jsxs(a,{className:"space-x-2",children:[s.jsx(v,{href:`/admin/peripherals/${e.id}/edit`,children:s.jsx(c,{variant:"outline",size:"sm",children:"Edit"})}),s.jsx(c,{variant:"destructive",size:"sm",onClick:()=>z(e.id),children:"Delete"})]})]},e.id)):s.jsx(C,{children:s.jsx(a,{colSpan:"9",className:"text-center",children:"No peripherals found."})})})]}),s.jsxs("div",{className:"flex justify-center mt-4 space-x-2",children:[s.jsx(c,{variant:"outline",size:"sm",disabled:o===1,onClick:()=>p(o-1),children:"Previous"}),[...Array(f)].map((e,t)=>s.jsx(c,{variant:o===t+1?"default":"outline",size:"sm",onClick:()=>p(t+1),children:t+1},t)),s.jsx(c,{variant:"outline",size:"sm",disabled:o===f,onClick:()=>p(o+1),children:"Next"})]})]})})]})})]})]})}export{be as default};
