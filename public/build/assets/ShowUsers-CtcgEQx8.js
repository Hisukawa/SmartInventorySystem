import{r as n,u as j,j as e,H as g}from"./app-BXEL7I3D.js";import{S as b,a as v,b as N,c as w}from"./avatar-VePTvp79.js";import{A as S}from"./app-sidebar-BkqBmsXw.js";import{B as C,a as P,b as d,c as p,d as D}from"./breadcrumb-CwAhrUmb.js";import{B as a}from"./button-CXIWFdOM.js";import{D as y,a as B,b as A,c as k,d as L,e as R}from"./dialog-CDb98rS0.js";import{A as U}from"./arrow-left-DktgRf-e.js";import"./index-DZGxOCx4.js";import"./utils-CBfrqCZ4.js";import"./input-DuaXU4SU.js";import"./index-CXW272yM.js";import"./index-CJgs40Fr.js";import"./createLucideIcon-C4nke5B-.js";import"./index-DYsNqI6P.js";import"./dropdown-menu-B1e4DepK.js";import"./index-CaIAb45n.js";import"./chevron-right-C5dNCxl-.js";import"./index-C7R1yl_2.js";import"./index-DSoZh-_N.js";import"./house-ClUO6xOi.js";import"./user-Cg-2Q1EP.js";import"./log-out-DZCODJYO.js";import"./keyboard-BDnFpmg_.js";import"./boxes-Cqi7D-sc.js";import"./users-Cbm18cet.js";import"./chevron-down-D_3W57lQ.js";function ie({user:s}){const[c,h]=n.useState(s.photo?`/storage/${s.photo}`:"/logo.png"),[x,t]=n.useState(!1),m=n.useRef(null),r=j({photo:null}),f=o=>{const i=o.target.files[0];if(i){r.setData("photo",i);const l=new FileReader;l.onloadend=()=>h(l.result),l.readAsDataURL(i)}},u=o=>{o.preventDefault(),r.post(route("admin.users.updatePhoto",s.id),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{r.reset("photo"),t(!1)}})};return e.jsxs(b,{children:[e.jsx(g,{title:`${s.name} - Profile`}),e.jsx(S,{}),e.jsxs(v,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 border-b bg-white",children:[e.jsx(N,{}),e.jsx(w,{orientation:"vertical",className:"h-6 mx-3"}),e.jsx(C,{children:e.jsxs(P,{children:[e.jsx(d,{children:e.jsx(p,{href:"/admin/users",children:"User Lists"})}),e.jsx(D,{}),e.jsx(d,{children:e.jsx(p,{href:"#",className:"font-semibold text-foreground",children:"User Profile"})})]})})]}),e.jsx("main",{className:"mt-10",children:e.jsxs("div",{className:"max-w-lg mx-auto p-6 bg-white shadow-lg rounded-lg relative",children:[e.jsx(a,{variant:"outline",size:"icon",className:"absolute top-4 left-4",asChild:!0,children:e.jsx("a",{href:route("admin.users.index"),children:e.jsx(U,{className:"w-5 h-5"})})}),e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("img",{src:c,alt:s.name,className:"w-32 h-32 rounded-full object-cover border"}),e.jsx("h1",{className:"text-xl font-bold",children:s.name}),e.jsx("p",{className:"text-gray-600",children:s.role||"N/A"}),e.jsxs("div",{className:"flex gap-3 mt-4",children:[e.jsx(a,{onClick:()=>t(!0),variant:"secondary",children:"Change Photo"}),e.jsx(a,{asChild:!0,children:e.jsx("a",{href:route("admin.users.edit",s.id),children:"Edit Profile"})})]})]})]})})]}),e.jsx(y,{open:x,onOpenChange:t,children:e.jsxs(B,{className:"sm:max-w-md",children:[e.jsxs(A,{children:[e.jsx(k,{children:"Update Profile Photo"}),e.jsxs(L,{children:["Choose a new profile photo for ",s.name,"."]})]}),e.jsxs("form",{onSubmit:u,className:"flex flex-col items-center gap-4 mt-2",encType:"multipart/form-data",children:[e.jsx("img",{src:c,alt:"Preview",className:"w-32 h-32 rounded-full object-cover border"}),e.jsx("input",{type:"file",accept:"image/*",onChange:f,ref:m,className:"hidden"}),e.jsx(a,{type:"button",variant:"secondary",onClick:()=>m.current.click(),children:"Choose Photo"}),r.data.photo&&e.jsx("span",{className:"text-sm text-gray-600",children:r.data.photo.name}),e.jsxs(R,{className:"mt-4",children:[e.jsx(a,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),e.jsx(a,{type:"submit",disabled:r.processing,children:r.processing?"Saving...":"Save"})]})]})]})})]})}export{ie as default};
