import{r as h,j as e,u as X,H as Y,a as P}from"./app-KzmSa3sm.js";import{b as $,c as V,d as Q}from"./card-DUxgAX48.js";import{I as S}from"./input-DIwK7LmT.js";import{L as D}from"./label-DFeF5HlN.js";import{B as L}from"./button-hYdFYK8I.js";import{u as F}from"./index-DAPu61EO.js";import{c as Z,d as ee,P as E,a as te,b as A}from"./index-0QRKOzG1.js";import{u as re}from"./index-BZJd1kOQ.js";import{u as se,C as ae}from"./index-DCY9jUvw.js";import{c as T}from"./createLucideIcon-LJS6rdIj.js";import"./index-CtY6hdqH.js";var k="Checkbox",[oe,we]=Z(k),[ne,I]=oe(k);function ce(t){const{__scopeCheckbox:s,checked:o,children:n,defaultChecked:c,disabled:r,form:p,name:f,onCheckedChange:d,required:a,value:i="on",internal_do_not_use_render:m}=t,[x,b]=te({prop:o,defaultProp:c??!1,onChange:d,caller:k}),[C,w]=h.useState(null),[v,l]=h.useState(null),u=h.useRef(!1),y=C?!!p||!!C.closest("form"):!0,N={checked:x,disabled:r,setChecked:b,control:C,setControl:w,name:f,form:p,value:i,hasConsumerStoppedPropagationRef:u,required:a,defaultChecked:g(c)?!1:c,isFormControl:y,bubbleInput:v,setBubbleInput:l};return e.jsx(ne,{scope:s,...N,children:ie(m)?m(N):n})}var H="CheckboxTrigger",M=h.forwardRef(({__scopeCheckbox:t,onKeyDown:s,onClick:o,...n},c)=>{const{control:r,value:p,disabled:f,checked:d,required:a,setControl:i,setChecked:m,hasConsumerStoppedPropagationRef:x,isFormControl:b,bubbleInput:C}=I(H,t),w=F(c,i),v=h.useRef(d);return h.useEffect(()=>{const l=r?.form;if(l){const u=()=>m(v.current);return l.addEventListener("reset",u),()=>l.removeEventListener("reset",u)}},[r,m]),e.jsx(E.button,{type:"button",role:"checkbox","aria-checked":g(d)?"mixed":d,"aria-required":a,"data-state":G(d),"data-disabled":f?"":void 0,disabled:f,value:p,...n,ref:w,onKeyDown:A(s,l=>{l.key==="Enter"&&l.preventDefault()}),onClick:A(o,l=>{m(u=>g(u)?!0:!u),C&&b&&(x.current=l.isPropagationStopped(),x.current||l.stopPropagation())})})});M.displayName=H;var R=h.forwardRef((t,s)=>{const{__scopeCheckbox:o,name:n,checked:c,defaultChecked:r,required:p,disabled:f,value:d,onCheckedChange:a,form:i,...m}=t;return e.jsx(ce,{__scopeCheckbox:o,checked:c,defaultChecked:r,disabled:f,required:p,onCheckedChange:a,name:n,form:i,value:d,internal_do_not_use_render:({isFormControl:x})=>e.jsxs(e.Fragment,{children:[e.jsx(M,{...m,ref:s,__scopeCheckbox:o}),x&&e.jsx(z,{__scopeCheckbox:o})]})})});R.displayName=k;var O="CheckboxIndicator",q=h.forwardRef((t,s)=>{const{__scopeCheckbox:o,forceMount:n,...c}=t,r=I(O,o);return e.jsx(ee,{present:n||g(r.checked)||r.checked===!0,children:e.jsx(E.span,{"data-state":G(r.checked),"data-disabled":r.disabled?"":void 0,...c,ref:s,style:{pointerEvents:"none",...t.style}})})});q.displayName=O;var U="CheckboxBubbleInput",z=h.forwardRef(({__scopeCheckbox:t,...s},o)=>{const{control:n,hasConsumerStoppedPropagationRef:c,checked:r,defaultChecked:p,required:f,disabled:d,name:a,value:i,form:m,bubbleInput:x,setBubbleInput:b}=I(U,t),C=F(o,b),w=re(r),v=se(n);h.useEffect(()=>{const u=x;if(!u)return;const y=window.HTMLInputElement.prototype,_=Object.getOwnPropertyDescriptor(y,"checked").set,J=!c.current;if(w!==r&&_){const W=new Event("click",{bubbles:J});u.indeterminate=g(r),_.call(u,g(r)?!1:r),u.dispatchEvent(W)}},[x,w,r,c]);const l=h.useRef(g(r)?!1:r);return e.jsx(E.input,{type:"checkbox","aria-hidden":!0,defaultChecked:p??l.current,required:f,disabled:d,name:a,value:i,form:m,...s,tabIndex:-1,ref:C,style:{...s.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});z.displayName=U;function ie(t){return typeof t=="function"}function g(t){return t==="indeterminate"}function G(t){return g(t)?"indeterminate":t?"checked":"unchecked"}const K=h.forwardRef(({className:t,...s},o)=>e.jsx(R,{ref:o,className:T("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...s,children:e.jsx(q,{className:T("flex items-center justify-center text-current"),children:e.jsx(ae,{className:"h-4 w-4"})})}));K.displayName=R.displayName;function j(t){const s=new Uint8Array(t);let o="";for(let n=0;n<s.byteLength;n++)o+=String.fromCharCode(s[n]);return btoa(o).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function B(t){const s="=".repeat((4-t.length%4)%4),o=(t+s).replace(/-/g,"+").replace(/_/g,"/"),n=atob(o);return Uint8Array.from([...n].map(c=>c.charCodeAt(0)))}function ve({status:t}){const{data:s,setData:o,post:n,processing:c,errors:r,reset:p}=X({email:"",password:"",remember:!1}),f=a=>{a.preventDefault(),n(route("login"),{onFinish:()=>p("password")})},d=async()=>{try{const{data:a}=await P.post("/webauthn/login/options",{email:s.email});a.challenge=B(a.challenge),a.allowCredentials=a.allowCredentials.map(b=>({...b,id:B(b.id)}));const i=await navigator.credentials.get({publicKey:a}),m={id:i.id,rawId:j(i.rawId),type:i.type,response:{clientDataJSON:j(i.response.clientDataJSON),authenticatorData:j(i.response.authenticatorData),signature:j(i.response.signature),userHandle:i.response.userHandle?j(i.response.userHandle):null}};(await P.post("/webauthn/login",{email:s.email,credential:m})).data.success?window.location.href="/faculty/dashboard":alert("Login failed.")}catch(a){console.error(a),alert("WebAuthn login failed.")}};return e.jsxs(e.Fragment,{children:[e.jsx(Y,{title:"Log in"}),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 px-4",children:e.jsxs("div",{className:"w-full max-w-5xl grid grid-cols-1 md:grid-cols-2 bg-white shadow-lg rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"hidden md:flex flex-col items-center justify-center bg-green-500 text-white p-8 relative",children:[e.jsxs("div",{className:"flex space-x-4 mb-6",children:[e.jsx("div",{className:"w-28 h-28 rounded-full overflow-hidden border-4 border-white bg-white shadow-md",children:e.jsx("img",{src:"logo.png",alt:"Logo 1",className:"w-full h-full object-contain"})}),e.jsx("div",{className:"w-28 h-28 rounded-full overflow-hidden border-4 border-white bg-white shadow-md",children:e.jsx("img",{src:"/ict.png",alt:"Logo 2",className:"w-full h-full object-contain"})})]}),e.jsx("h2",{className:"text-2xl font-bold text-center",children:"ICT INVENTORY SYSTEM MANAGEMENT"}),e.jsx("p",{className:"mt-3 text-sm opacity-90 text-center",children:"Secure • Fast • Organized"})]}),e.jsxs("div",{className:"p-8 flex flex-col justify-center",children:[e.jsxs($,{className:"p-0 mb-6",children:[e.jsx(V,{className:"text-2xl font-bold",children:"Login Account"}),e.jsx(Q,{children:"Please enter your details to log in"})]}),t&&e.jsx("div",{className:"mb-4 text-sm font-medium text-green-600",children:t}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(D,{htmlFor:"email",children:"Email Address"}),e.jsx(S,{id:"email",type:"email",name:"email",value:s.email,autoComplete:"username",onChange:a=>o("email",a.target.value)}),r.email&&e.jsx("p",{className:"text-sm text-red-500",children:r.email})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"flex justify-between",children:e.jsx(D,{htmlFor:"password",children:"Password"})}),e.jsx(S,{id:"password",type:"password",name:"password",value:s.password,autoComplete:"current-password",onChange:a=>o("password",a.target.value)}),r.password&&e.jsx("p",{className:"text-sm text-red-500",children:r.password})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(K,{id:"remember",checked:s.remember,onCheckedChange:a=>o("remember",!!a)}),e.jsx("label",{htmlFor:"remember",className:"text-sm text-muted-foreground",children:"Remember me"})]}),e.jsx(L,{type:"submit",className:"w-full mt-2 bg-green-500 hover:bg-green-600 text-white",disabled:c,children:"Login"}),e.jsx(L,{type:"button",className:"w-full mt-4 bg-blue-500 hover:bg-blue-600 text-white",onClick:d,children:"Login with Device"}),e.jsxs("div",{className:"text-center text-sm mt-6",children:["Don’t have an account?"," ",e.jsx("span",{className:"text-gray-600",children:"Please contact the ICT Department Chairperson to request one."})]})]})]})]})})]})}export{ve as default};
