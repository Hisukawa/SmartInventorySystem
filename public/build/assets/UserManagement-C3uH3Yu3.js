import{b as C,r as h,j as e,H as S,a as k}from"./app-DdILD_Xr.js";import{B as i}from"./button-B0uisR27.js";import{S as B,a as P,b as T,c as z}from"./avatar-Bfg13Dtv.js";import{A as U}from"./app-sidebar-DC5Aby7c.js";import{N as D}from"./Notification-DwvKy6xc.js";import{T as E,a as L,b as u,c,d as M,e as l}from"./table-0jYuqNjh.js";import{B as A,a as I,b as H,c as R}from"./breadcrumb-C-_aZniV.js";import{I as V}from"./input-CXn4W12X.js";import{S as x}from"./sweetalert2.esm.all-BQIkj5Wb.js";import"./index-DQ6gBxz6.js";import"./utils-CBfrqCZ4.js";import"./index-DBap2f8a.js";import"./index-CGosRKdT.js";import"./createLucideIcon-CkT6gbJA.js";import"./index-DGMrQ7cP.js";import"./dropdown-menu-F0b7ObYn.js";import"./index-CMrceUIp.js";import"./chevron-right-BbSpC2r2.js";import"./index-CLmbfdwx.js";import"./index-BEKW_y2j.js";import"./house-JDEa_Sq2.js";import"./user-B85dqUwB.js";import"./log-out-pVFsRlAE.js";import"./keyboard-DZwEhqI6.js";import"./boxes-TAWYbDpx.js";import"./users-DFlG4yg7.js";import"./chevron-down-DatpAlHd.js";import"./bell-LAf6ccnB.js";function ue({users:f}){const{props:b}=C(),y=b.auth.user.id,[m,N]=h.useState(""),[r,n]=h.useState(1),o=10,g={admin:1,technician:2,faculty:3,guest:4},d=h.useMemo(()=>f.filter(s=>s.name.toLowerCase().includes(m.toLowerCase())||s.email.toLowerCase().includes(m.toLowerCase())).sort((s,a)=>{const t=g[s.role]-g[a.role];return t!==0?t:s.name.localeCompare(a.name)}),[f,m]),j=Math.ceil(d.length/o)||1,p=d.slice((r-1)*o,r*o),w=s=>{s.key==="Enter"&&n(1)};return e.jsxs(B,{children:[e.jsx(S,{children:e.jsx("title",{children:"User Management"})}),e.jsx(U,{}),e.jsxs(P,{children:[e.jsx("header",{className:"sticky top-0 z-20 bg-white border-b px-6 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{}),e.jsx(z,{orientation:"vertical",className:"h-6 mx-3"}),e.jsx(A,{children:e.jsx(I,{children:e.jsx(H,{children:e.jsx(R,{href:"/admin/users","aria-current":"page",className:"font-semibold text-foreground",children:"User Lists"})})})}),e.jsx("div",{className:"flex-1"}),e.jsx(D,{})]})}),e.jsxs("main",{className:"w-full px-6 py-4",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"User Management"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-stretch sm:items-center justify-between mb-4",children:[e.jsx("div",{className:"flex gap-2 items-center",children:e.jsx(V,{placeholder:"Search Name or Email",value:m,onChange:s=>{N(s.target.value),n(1)},onKeyDown:w,className:"w-64"})}),e.jsx(i,{asChild:!0,className:"text-sm sm:text-base px-3 py-1 sm:py-2 bg-[hsl(142,31%,51%)] hover:bg-[hsl(142,31%,45%)] text-white font-medium",children:e.jsx("a",{href:route("register"),children:"Register User"})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs(E,{className:"w-full",children:[e.jsx(L,{children:e.jsxs(u,{className:"bg-[hsl(142,34%,85%)] text-[hsl(142,34%,25%)] hover:bg-[hsl(142,34%,80%)]",children:[e.jsx(c,{className:"w-12 px-4 py-3 text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"#"}),e.jsx(c,{className:"px-4 py-3 text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Name"}),e.jsx(c,{className:"px-4 py-3 text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Email"}),e.jsx(c,{className:"px-4 py-3 text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Role"}),e.jsx(c,{className:"px-4 py-3 text-xs font-semibold text-gray-600 uppercase tracking-wide text-center",children:"Actions"})]})}),e.jsx(M,{children:p.length>0?p.map((s,a)=>e.jsxs(u,{className:"hover:bg-gray-50 even:bg-gray-50/50 transition-colors",children:[e.jsx(l,{className:"px-4 py-3 text-sm text-gray-700",children:(r-1)*o+a+1}),e.jsx(l,{className:"px-4 py-3 text-sm font-medium text-gray-900",children:s.name}),e.jsx(l,{className:"px-4 py-3 text-sm text-gray-700",children:s.email}),e.jsx(l,{className:"px-4 py-3 text-sm capitalize text-gray-700",children:s.role}),e.jsx(l,{className:"px-4 py-3 text-center",children:s.id!==y&&e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(i,{size:"sm",variant:"outline",className:"px-3",asChild:!0,children:e.jsx("a",{href:route("admin.users.show",s.id),children:"View"})}),e.jsx(i,{size:"sm",variant:"destructive",className:"px-3",onClick:()=>{x.fire({title:`Delete ${s.name}?`,text:"Please verify your password to continue.",icon:"warning",input:"password",inputPlaceholder:"Enter your password",inputAttributes:{autocapitalize:"off",autocorrect:"off"},showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Confirm Delete",preConfirm:t=>t?k.post(route("admin.users.verifyAndDelete"),{user_id:s.id,password:t},{preserveScroll:!0,onError:v=>{x.showValidationMessage(v.password||"Password verification failed.")}}):(x.showValidationMessage("Password is required"),!1)}).then(t=>{t.isConfirmed&&x.fire("Deleted!",`${s.name} has been successfully deleted.`,"success")})},children:"Delete"})]})})]},s.id)):e.jsx(u,{children:e.jsx(l,{colSpan:5,className:"text-center py-6 px-4 text-gray-500",children:"No users found."})})})]}),d.length>o&&e.jsxs("div",{className:"flex justify-between items-center mt-4 px-4 py-2 border-t bg-gray-50 rounded-b",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["Showing ",p.length," of"," ",d.length," users"]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(i,{size:"sm",variant:"outline",disabled:r===1,onClick:()=>n(s=>s-1),children:"Previous"}),Array.from({length:j},(s,a)=>a+1).map(s=>e.jsx(i,{size:"sm",variant:s===r?"default":"outline",onClick:()=>n(s),children:s},s)),e.jsx(i,{size:"sm",variant:"outline",disabled:r===j,onClick:()=>n(s=>s+1),children:"Next"})]})]})]})]})]})]})}export{ue as default};
