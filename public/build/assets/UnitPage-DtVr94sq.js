import{r as w,u as I,j as e,a as A,R as L}from"./app-DpVfWwIa.js";import{B as v}from"./button-BIJ7I28M.js";import{A as D}from"./app-sidebar-CibsznEs.js";import{S as O,a as $,b as G,c as q}from"./avatar-RA861kI_.js";import H from"./AddUnitModal-BO3b1FFo.js";import K from"./EditUnitModal-ByseiRNw.js";import{S as _}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{I as X}from"./input-Cldoq0Pi.js";import{N as Y}from"./Notification-UkIKd2cs.js";import{T as J,a as Q,b as T,c as u,d as W,e as h}from"./table-s0912E_-.js";import"./index-XAakybnK.js";import{B as Z,a as ee,b as se,c as R,d as le}from"./breadcrumb-BXCYgfCA.js";import{P as ae,a as re,b as oe,S as j,c as b,d as g,e as f,f as o}from"./select-BmCUnxwu.js";import{E as te}from"./eye-C7oNmvdD.js";import{P as ne}from"./pen-xbs4MNBD.js";import{T as ce}from"./trash-2-D0YpkjAm.js";import{F as ie}from"./funnel-BazJyMYB.js";import{X as B}from"./index-DlFG9ft2.js";import"./index-D5ducR0X.js";import"./index-6ic6AYgv.js";import"./createLucideIcon-Dk4lCYyT.js";import"./dropdown-menu-XEGQPnCV.js";import"./index-CiXBdE1i.js";import"./index-_HPkj5RN.js";import"./chevron-right-D7r8_AMT.js";import"./sparkles-DCW1G32V.js";import"./keyboard-B4m-Xq-z.js";import"./user-CxFqTgIJ.js";import"./file-text-Dxsjq4uB.js";import"./users-BYd0OysU.js";import"./chevron-down-BS5431_g.js";import"./index-B-XQDOc2.js";import"./dialog-P0n-CHHA.js";import"./label-CKOYPAeM.js";import"./index-D75Y7cUv.js";const de=[{label:"Functional",color:"bg-green-500"},{label:"Defective",color:"bg-red-500"},{label:"Under Maintenance",color:"bg-yellow-500"},{label:"Needs Upgrade",color:"bg-blue-500"},{label:"For Disposal",color:"bg-gray-500"}];function me({filters:r={},filterOptions:i,onApplyFilters:C,onReset:N}){const[n,t]=w.useState(""),[d,p]=w.useState("");w.useEffect(()=>{const x=["unit_code","room_id","processor","ram","storage","gpu","motherboard","condition"].find(S=>!!r[S]);x?(t(x),p(String(r[x]))):(t(""),p(""))},[r]);const y=[{value:"unit_code",label:"Unit Code"},{value:"room_id",label:"Room"},{value:"processor",label:"Processor"},{value:"ram",label:"RAM"},{value:"storage",label:"Storage"},{value:"gpu",label:"GPU"},{value:"motherboard",label:"Motherboard"},{value:"condition",label:"Condition"}];function m(l){const x=l==="all"?"":l;p(x);const S={...r};n&&(S[n]=x),C(S)}const U=!!r.unit_code||!!r.room_id||!!r.processor||!!r.ram||!!r.storage||!!r.gpu||!!r.motherboard||!!r.condition;return e.jsxs(ae,{children:[e.jsx(re,{asChild:!0,children:e.jsxs(v,{className:"flex items-center gap-2 bg-[hsl(142,34%,51%)] text-white border-none hover:bg-[hsl(142,34%,45%)]",children:[e.jsx(ie,{className:"h-4 w-4"}),"Filter",U&&e.jsx(B,{className:"h-4 w-4 ml-1 cursor-pointer",onClick:l=>{l.stopPropagation(),t(""),p(""),N()}})]})}),e.jsxs(oe,{className:"w-[calc(100vw-2rem)] sm:w-[380px] p-4",children:[e.jsx("h4",{className:"font-medium mb-3 text-lg",children:"Filter Options"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs(j,{value:n,onValueChange:l=>{t(l),p("")},children:[e.jsx(b,{className:"w-full",children:e.jsx(g,{placeholder:"Select Field"})}),e.jsx(f,{children:y.map(l=>e.jsx(o,{value:l.value,children:l.label},l.value))})]}),n==="unit_code"&&e.jsxs(j,{value:d||"all",onValueChange:m,children:[e.jsx(b,{className:"w-full",children:e.jsx(g,{placeholder:"Select Unit Code"})}),e.jsxs(f,{children:[e.jsx(o,{value:"all",children:"All"}),i.unit_codes.map(l=>e.jsx(o,{value:l,children:l},l))]})]}),n==="room_id"&&e.jsxs(j,{value:d||"all",onValueChange:m,children:[e.jsx(b,{className:"w-full",children:e.jsx(g,{placeholder:"Select Room"})}),e.jsxs(f,{children:[e.jsx(o,{value:"all",children:"All"}),Object.entries(i.rooms).map(([l,x])=>e.jsxs(o,{value:l,children:["Room ",x]},l))]})]}),n==="processor"&&e.jsxs(j,{value:d||"all",onValueChange:m,children:[e.jsx(b,{className:"w-full",children:e.jsx(g,{placeholder:"Select Processor"})}),e.jsxs(f,{children:[e.jsx(o,{value:"all",children:"All"}),i.processors.map(l=>e.jsx(o,{value:l,children:l},l))]})]}),n==="ram"&&e.jsxs(j,{value:d||"all",onValueChange:m,children:[e.jsx(b,{className:"w-full",children:e.jsx(g,{placeholder:"Select RAM"})}),e.jsxs(f,{children:[e.jsx(o,{value:"all",children:"All"}),i.rams.map(l=>e.jsx(o,{value:l,children:l},l))]})]}),n==="storage"&&e.jsxs(j,{value:d||"all",onValueChange:m,children:[e.jsx(b,{className:"w-full",children:e.jsx(g,{placeholder:"Select Storage"})}),e.jsxs(f,{children:[e.jsx(o,{value:"all",children:"All"}),i.storages.map(l=>e.jsx(o,{value:l,children:l},l))]})]}),n==="gpu"&&e.jsxs(j,{value:d||"all",onValueChange:m,children:[e.jsx(b,{className:"w-full",children:e.jsx(g,{placeholder:"Select GPU"})}),e.jsxs(f,{children:[e.jsx(o,{value:"all",children:"All"}),i.gpus.map(l=>e.jsx(o,{value:l,children:l},l))]})]}),n==="motherboard"&&e.jsxs(j,{value:d||"all",onValueChange:m,children:[e.jsx(b,{className:"w-full",children:e.jsx(g,{placeholder:"Select Motherboard"})}),e.jsxs(f,{children:[e.jsx(o,{value:"all",children:"All"}),i.motherboards.map(l=>e.jsx(o,{value:l,children:l},l))]})]}),n==="condition"&&e.jsxs(j,{value:d||"all",onValueChange:m,children:[e.jsx(b,{className:"w-full",children:e.jsx(g,{placeholder:"Select Condition"})}),e.jsxs(f,{children:[e.jsx(o,{value:"all",children:"All"}),i.conditions.map(l=>e.jsx(o,{value:l,children:l},l))]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(v,{size:"sm",variant:"outline",onClick:()=>{t(""),p(""),N()},children:[e.jsx(B,{className:"mr-1 h-4 w-4"})," Reset"]})})]})]})]})}function Ke({units:r,rooms:i,filters:C={}}){const[N,n]=w.useState(C.search||""),[t,d]=w.useState(1),[p,y]=w.useState(null),m=10,{delete:U}=I(),l=()=>{_.fire({icon:"success",title:"Updated!",text:"The system unit has been updated successfully."})},x=w.useMemo(()=>{const s=a=>[...new Set(a.filter(c=>c!==null&&c!==""))].sort();return{rooms:Object.fromEntries(i.map(a=>[String(a.id),a.room_number])),unit_codes:s(r.map(a=>a.unit_code)),processors:s(r.map(a=>a.processor)),rams:s(r.map(a=>a.ram)),storages:s(r.map(a=>a.storage)),gpus:s(r.map(a=>a.gpu)),motherboards:s(r.map(a=>a.motherboard)),conditions:s(r.map(a=>a.condition))}},[r,i]);function S(s){const a=Object.fromEntries(Object.entries({...s,search:N||void 0}).filter(([,c])=>c!==""&&c!==void 0));A.get(route("system-units.index"),a,{preserveState:!0,replace:!0})}function k(){n(""),A.get(route("system-units.index"),{},{preserveState:!0,replace:!0})}function E(s){s.key==="Enter"&&S(C)}const F=w.useMemo(()=>{if(!N)return r;const s=N.toLowerCase();return r.filter(a=>{const c=a.unit_code?.toLowerCase()||"",z=a.room?.room_number?.toLowerCase()||"";return c.includes(s)||z.includes(s)})},[r,N]),P=Math.ceil(F.length/m)||1,V=F.slice((t-1)*m,t*m),M=s=>de.find(c=>c.label.toLowerCase()===(s||"").toLowerCase())||{label:s||"Unknown",color:"bg-slate-400"};return e.jsxs(O,{children:[e.jsx(D,{}),e.jsxs($,{children:[e.jsx("header",{className:"sticky top-0 z-20 bg-white border-b px-6 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{}),e.jsx(q,{orientation:"vertical",className:"h-6 mx-3"}),e.jsx(Z,{children:e.jsx(ee,{children:e.jsxs(se,{children:[e.jsx(R,{href:"#","aria-current":"page",children:"Assets"}),e.jsx(le,{}),e.jsx(R,{href:"/admin/system-units","aria-current":"page",className:"font-semibold text-foreground",children:"System Unit Lists"})]})})}),e.jsx("div",{className:"flex-1"}),e.jsx(Y,{})]})}),e.jsxs("main",{className:"w-full px-6 py-4",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"System Units"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-stretch sm:items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(me,{filters:C,filterOptions:x,onApplyFilters:S,onReset:k}),e.jsx(X,{placeholder:"Search Unit Code or Room",value:N,onChange:s=>{const a=s.target.value;n(a),d(1)},onKeyDown:E,className:`flex-1 min-w-0 sm:max-w-xs w-full 
                                border-[hsl(142,34%,51%)] text-[hsl(142,34%,20%)] 
                                focus:border-[hsl(142,34%,45%)] focus:ring-[hsl(142,34%,45%)] 
                                placeholder:text-[hsl(142,34%,40%)]`})]}),e.jsx(H,{rooms:i})]}),e.jsx("div",{className:"overflow-x-auto rounded-lg shadow-lg",children:e.jsxs(J,{className:"min-w-full bg-white",children:[e.jsx(Q,{children:e.jsxs(T,{className:"bg-[hsl(142,34%,85%)] text-[hsl(142,34%,25%)] hover:bg-[hsl(142,34%,80%)] h-10",children:[e.jsx(u,{className:"px-2 py-1",children:"#"}),e.jsx(u,{className:"px-2 py-1",children:"Pc Code"}),e.jsx(u,{className:"px-2 py-1",children:"Room"}),e.jsx(u,{className:"px-2 py-1",children:"Processor"}),e.jsx(u,{className:"px-2 py-1",children:"RAM"}),e.jsx(u,{className:"px-2 py-1",children:"Storage"}),e.jsx(u,{className:"px-2 py-1",children:"GPU"}),e.jsx(u,{className:"px-2 py-1",children:"Motherboard"}),e.jsx(u,{className:"px-2 py-1",children:"Condition"}),e.jsx(u,{className:"px-2 py-1",children:"Actions"})]})}),e.jsx(W,{children:V.length>0?V.map((s,a)=>e.jsxs(T,{className:"hover:shadow-sm",children:[e.jsx(h,{children:(t-1)*m+a+1}),e.jsx(h,{children:s.unit_code}),e.jsxs(h,{children:["ROOM ",s.room?.room_number||"N/A"]}),e.jsx(h,{children:s.processor}),e.jsx(h,{children:s.ram}),e.jsx(h,{children:s.storage}),e.jsx(h,{children:s.gpu}),e.jsx(h,{children:s.motherboard}),e.jsx(h,{children:s.condition?e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium text-white ${M(s.condition).color}`,children:M(s.condition).label}):"N/A"}),e.jsx(h,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(v,{size:"sm",className:"flex items-center gap-2 bg-[hsl(142,34%,51%)] text-white border-none hover:bg-[hsl(142,34%,45%)]",onClick:()=>A.visit(`/system-units/view/${s.unit_code}`),children:[e.jsx(te,{className:"h-4 w-4"}),"View"]}),e.jsxs(v,{size:"sm",className:"flex items-center gap-2 bg-[hsl(142,34%,51%)] text-white border-none hover:bg-[hsl(142,34%,45%)]",onClick:()=>{y(s),setShowModal(!0)},children:[e.jsx(ne,{className:"h-4 w-4"}),"Edit"]}),e.jsxs(v,{size:"sm",variant:"destructive",className:"flex items-center gap-2",onClick:()=>{_.fire({title:`Delete ${s.unit_code}?`,text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(c=>{c.isConfirmed&&U(`/system-units/${s.id}`,{onSuccess:()=>{_.fire("Deleted!",`Unit ${s.unit_code} has been deleted.`,"success")}})})},children:[e.jsx(ce,{className:"h-4 w-4"}),"Delete"]})]})})]},s.id)):e.jsx(T,{children:e.jsx(h,{colSpan:10,className:"text-center py-4",children:"No matching units found."})})})]})}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",t," of ",P]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(v,{size:"sm",variant:"outline",disabled:t===1,onClick:()=>d(s=>s-1),children:"Previous"}),Array.from({length:P},(s,a)=>a+1).filter(s=>s===1||s===P?!0:s>=t-2&&s<=t+2).map((s,a,c)=>e.jsxs(L.Fragment,{children:[a>0&&c[a]-c[a-1]>1&&e.jsx("span",{className:"px-1",children:"..."}),e.jsx(v,{size:"sm",variant:t===s?"default":"outline",onClick:()=>d(s),children:s})]},s)),e.jsx(v,{size:"sm",variant:"outline",disabled:t===P,onClick:()=>d(s=>s+1),children:"Next"})]})]}),p&&e.jsx(K,{unit:p,rooms:i,onClose:()=>y(null),onSuccess:l})]})]})]})}export{Ke as default};
