import{r as t,j as e,H as E,a as o}from"./app-BcDL4uT9.js";import{C as M,b as z,c as D,a as H}from"./card-CaEidam5.js";import{T as L,a as P,b,c as r,d as R,e as n}from"./table-D6Su1AI8.js";import{B as c}from"./button-Dqole_J5.js";import{S as i}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{S as q,a as U,b as V,c as $}from"./avatar-DcWk4st0.js";import{A as F,M as Y}from"./app-sidebar-Lnqjc9hv.js";import{N as G}from"./Notification-Dx4b0L7b.js";import{B as J,a as K,b as O,c as Q}from"./breadcrumb-CRNmaq84.js";import{I as y}from"./input-B1ood2ym.js";import{T as W}from"./textarea-C3TI965k.js";import{S as X,a as Z,b as ee,c as se,d as te}from"./select-CTV8Y7Fv.js";import{a as ne}from"./utils-iUf3Puke.js";import{T as ae}from"./trash-2-Dql04SVV.js";import"./index-CkPz-1xp.js";import"./index-BS1vFZc9.js";import"./index-crNKQFum.js";import"./index-CPvUObf0.js";import"./dropdown-menu-DG9GQkvD.js";import"./index-BSMsh-1w.js";import"./chevron-right-bRzvQAj-.js";import"./index-DYzwWsIp.js";import"./index-C8PJJ4e2.js";import"./sparkles-Djf1WpxP.js";import"./bell-DTD9Kvk-.js";import"./keyboard-Ci3d-5dU.js";import"./boxes-CUt3aFR1.js";import"./file-text-DVNHMZGK.js";import"./users-DRoK9hBA.js";import"./chevron-down-D42oOK4j.js";import"./index-BlQ9aMHM.js";/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],le=ne("pencil",re);function Pe({announcements:N,rooms:C=[]}){const[S,T]=t.useState(N.data||[]),[w,A]=t.useState(N.links||[]),[d,m]=t.useState(""),[u,h]=t.useState(""),[x,p]=t.useState(""),[j,f]=t.useState(""),[l,v]=t.useState(null),_=s=>{s.preventDefault(),l?o.put(`/admin/announcements/${l}`,{title:d,message:u,room_id:x||null,scheduled_date:j||null},{onSuccess:()=>{g(),i.fire("Updated!","Announcement updated successfully.","success")}}):o.post("/admin/announcement",{title:d,message:u,room_id:x||null,scheduled_date:j||null},{onSuccess:()=>{g(),i.fire("Posted!","Announcement created successfully.","success")}})},g=()=>{m(""),h(""),p(""),f(""),v(null)},B=s=>{v(s.id),m(s.title),h(s.message),p(s.room_id?.toString()||""),f(s.scheduled_date||""),window.scrollTo({top:0,behavior:"smooth"})},k=s=>{i.fire({title:"Are you sure?",text:"This announcement will be deleted permanently.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!"}).then(a=>{a.isConfirmed&&o.delete(`/admin/announcements/${s}`,{onSuccess:()=>{i.fire("Deleted!","Announcement deleted successfully.","success")}})})},I=s=>{s&&o.get(s,{},{preserveScroll:!0,preserveState:!0,onSuccess:a=>{T(a.props.announcements.data),A(a.props.announcements.links)}})};return e.jsxs(q,{children:[e.jsx(E,{children:e.jsx("title",{children:"Announcements"})}),e.jsx(F,{}),e.jsxs(U,{children:[e.jsx("header",{className:"sticky top-0 z-20 bg-white border-b px-6 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{}),e.jsx($,{orientation:"vertical",className:"h-6 mx-3"}),e.jsx(J,{children:e.jsx(K,{children:e.jsx(O,{children:e.jsx(Q,{href:"/admin/announcement","aria-current":"page",className:"font-semibold text-foreground",children:"Announcements"})})})}),e.jsx("div",{className:"flex-1"}),e.jsx(G,{})]})}),e.jsx("main",{className:"w-full px-4 sm:px-6 py-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[" ",e.jsx("h1",{className:"text-2xl font-semibold",children:"Announcements"}),e.jsxs(M,{className:"rounded-2xl shadow-md bg-white",children:[e.jsxs(z,{className:"flex items-center gap-2 border-b pb-3",children:[e.jsx(Y,{className:"w-6 h-6 text-teal-600"}),e.jsx(D,{className:"text-xl font-semibold",children:l?"Edit Announcement":"Make a New Announcement"})]}),e.jsx(H,{className:"pt-4",children:e.jsxs("form",{onSubmit:_,className:"space-y-4",children:[e.jsx(y,{placeholder:"Enter announcement title",value:d,onChange:s=>m(s.target.value),required:!0}),e.jsx(W,{placeholder:"Enter announcement message",value:u,onChange:s=>h(s.target.value),rows:4,required:!0}),e.jsxs(X,{onValueChange:p,value:x,children:[e.jsx(Z,{children:e.jsx(ee,{placeholder:"Select a room"})}),e.jsx(se,{children:C.map(s=>e.jsx(te,{value:s.id.toString(),children:s.room_number},s.id))})]}),e.jsx(y,{type:"date",value:j,onChange:s=>f(s.target.value),required:!0}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(c,{type:"submit",className:"bg-[hsl(142,31%,51%)] hover:bg-[hsl(142,31%,45%)] text-white",children:l?"Update Announcement":"Post Announcement"}),l&&e.jsx(c,{type:"button",onClick:g,variant:"outline",children:"Cancel"})]})]})})]}),e.jsx("div",{className:"overflow-x-auto rounded-lg shadow-lg w-full",children:e.jsxs(L,{className:"min-w-[1100px] w-full bg-white",children:[" ",e.jsx(P,{children:e.jsxs(b,{className:"bg-[hsl(142,34%,85%)] text-[hsl(142,34%,25%)] hover:bg-[hsl(142,34%,80%)] h-12",children:[e.jsx(r,{className:"w-[15%]",children:"Title"}),e.jsx(r,{className:"w-[35%]",children:"Message"}),e.jsx(r,{className:"w-[15%]",children:"Room"}),e.jsx(r,{className:"w-[15%]",children:"Scheduled Date"}),e.jsx(r,{className:"w-[15%]",children:"Posted By"}),e.jsx(r,{className:"w-[15%] text-right",children:"Actions"})]})}),e.jsx(R,{children:S.length>0?S.map(s=>e.jsxs(b,{className:"h-14",children:[e.jsx(n,{className:"font-medium",children:s.title}),e.jsx(n,{className:"whitespace-pre-line",children:s.message}),e.jsx(n,{children:s.room?.room_number||"—"}),e.jsx(n,{children:s.scheduled_date||"—"}),e.jsx(n,{children:s.admin?.name||"Admin"}),e.jsxs(n,{className:"text-right flex gap-2 justify-end",children:[e.jsxs(c,{size:"sm",variant:"outline",onClick:()=>B(s),className:"flex items-center gap-1",children:[e.jsx(le,{className:"w-4 h-4"})," Edit"]}),e.jsxs(c,{size:"sm",variant:"destructive",onClick:()=>k(s.id),className:"flex items-center gap-1",children:[e.jsx(ae,{className:"w-4 h-4"})," Delete"]})]})]},s.id)):e.jsx(b,{children:e.jsx(n,{colSpan:6,className:"text-center text-gray-500 py-6",children:"No announcements yet."})})})]})}),w.length>0&&e.jsx("div",{className:"flex justify-center gap-2 mt-4 flex-wrap",children:w.map((s,a)=>e.jsx(c,{size:"sm",variant:s.active?"default":"outline",onClick:()=>I(s.url),disabled:!s.url,dangerouslySetInnerHTML:{__html:s.label}},a))})]})})]})]})}export{Pe as default};
