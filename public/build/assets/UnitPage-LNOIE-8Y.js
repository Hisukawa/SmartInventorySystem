import{r as w,u as I,j as e,a as U,R as L}from"./app-FC1U-uTU.js";import{B as N}from"./button-DQdr5HDf.js";import{A as D}from"./app-sidebar-JjNZzTDp.js";import{S as O,a as $,b as G,c as q}from"./avatar-DUETvLSO.js";import H from"./EditUnitModal-MWncqEK0.js";import{S as _}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{I as K}from"./input-BJ8Z-0jM.js";import{N as X}from"./Notification-Csgf833-.js";import{T as Y,a as J,b as T,c as u,d as Q,e as h}from"./table-CcXODJWz.js";import"./index-BOCd7POp.js";import{B as W,a as Z,b as ee,c as k,d as se}from"./breadcrumb-CXgt-dVw.js";import{P as le,a as ae,b as re}from"./popover-Chq5oocH.js";import{S as j,a as b,b as g,c as f,d as o}from"./select-DtjMzjpf.js";import{E as oe}from"./eye-HNzwPDVs.js";import{P as te}from"./pen-wxMIHEM3.js";import{T as ne}from"./trash-2-D0dRb-m7.js";import{F as ce}from"./funnel-DJtFKScn.js";import{X as B}from"./index-DrezYJLL.js";import"./index-D8I8jTRo.js";import"./index-BbcJaTle.js";import"./utils-BE88PE2l.js";import"./dropdown-menu-Bes4Wl3l.js";import"./index-BClNLk5S.js";import"./index-CZujx-lZ.js";import"./chevron-right-DzZnjBIF.js";import"./sparkles-BcDgX7xg.js";import"./bell-BN1MZd3Y.js";import"./keyboard-CVHosXw-.js";import"./boxes-ut5YPV1R.js";import"./file-text-DrrBmEVG.js";import"./users-omEQPJM7.js";import"./chevron-down-2-A9pIXt.js";import"./index-pZ6jIi2w.js";import"./index-DDek2YJZ.js";import"./dialog-DTAc3RNp.js";import"./label-BWGMQjzL.js";import"./index-RHIBr5u-.js";const ie=[{label:"Functional",color:"bg-green-500"},{label:"Defective",color:"bg-red-500"},{label:"Under Maintenance",color:"bg-yellow-500"},{label:"Needs Upgrade",color:"bg-blue-500"},{label:"For Disposal",color:"bg-gray-500"}];function de({filters:r={},filterOptions:m,onApplyFilters:C,onReset:v}){const[n,t]=w.useState(""),[i,p]=w.useState("");w.useEffect(()=>{const x=["unit_code","room_id","processor","ram","storage","gpu","motherboard","condition"].find(S=>!!r[S]);x?(t(x),p(String(r[x]))):(t(""),p(""))},[r]);const y=[{value:"unit_code",label:"Unit Code"},{value:"room_id",label:"Room"},{value:"processor",label:"Processor"},{value:"ram",label:"RAM"},{value:"storage",label:"Storage"},{value:"gpu",label:"GPU"},{value:"motherboard",label:"Motherboard"},{value:"condition",label:"Condition"}];function d(l){const x=l==="all"?"":l;p(x);const S={...r};n&&(S[n]=x),C(S)}const A=!!r.unit_code||!!r.room_id||!!r.processor||!!r.ram||!!r.storage||!!r.gpu||!!r.motherboard||!!r.condition;return e.jsxs(le,{children:[e.jsx(ae,{asChild:!0,children:e.jsxs(N,{className:"flex items-center gap-2 bg-[hsl(142,34%,51%)] text-white border-none hover:bg-[hsl(142,34%,45%)]",children:[e.jsx(ce,{className:"h-4 w-4"}),"Filter",A&&e.jsx(B,{className:"h-4 w-4 ml-1 cursor-pointer",onClick:l=>{l.stopPropagation(),t(""),p(""),v()}})]})}),e.jsxs(re,{className:"w-[calc(100vw-2rem)] sm:w-[380px] p-4",children:[e.jsx("h4",{className:"font-medium mb-3 text-lg",children:"Filter Options"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs(j,{value:n,onValueChange:l=>{t(l),p("")},children:[e.jsx(b,{className:"w-full",children:e.jsx(g,{placeholder:"Select Field"})}),e.jsx(f,{children:y.map(l=>e.jsx(o,{value:l.value,children:l.label},l.value))})]}),n==="unit_code"&&e.jsxs(j,{value:i||"all",onValueChange:d,children:[e.jsx(b,{className:"w-full",children:e.jsx(g,{placeholder:"Select Unit Code"})}),e.jsxs(f,{children:[e.jsx(o,{value:"all",children:"All"}),m.unit_codes.map(l=>e.jsx(o,{value:l,children:l},l))]})]}),n==="room_id"&&e.jsxs(j,{value:i||"all",onValueChange:d,children:[e.jsx(b,{className:"w-full",children:e.jsx(g,{placeholder:"Select Room"})}),e.jsxs(f,{children:[e.jsx(o,{value:"all",children:"All"}),Object.entries(m.rooms).map(([l,x])=>e.jsxs(o,{value:l,children:["Room ",x]},l))]})]}),n==="processor"&&e.jsxs(j,{value:i||"all",onValueChange:d,children:[e.jsx(b,{className:"w-full",children:e.jsx(g,{placeholder:"Select Processor"})}),e.jsxs(f,{children:[e.jsx(o,{value:"all",children:"All"}),m.processors.map(l=>e.jsx(o,{value:l,children:l},l))]})]}),n==="ram"&&e.jsxs(j,{value:i||"all",onValueChange:d,children:[e.jsx(b,{className:"w-full",children:e.jsx(g,{placeholder:"Select RAM"})}),e.jsxs(f,{children:[e.jsx(o,{value:"all",children:"All"}),m.rams.map(l=>e.jsx(o,{value:l,children:l},l))]})]}),n==="storage"&&e.jsxs(j,{value:i||"all",onValueChange:d,children:[e.jsx(b,{className:"w-full",children:e.jsx(g,{placeholder:"Select Storage"})}),e.jsxs(f,{children:[e.jsx(o,{value:"all",children:"All"}),m.storages.map(l=>e.jsx(o,{value:l,children:l},l))]})]}),n==="gpu"&&e.jsxs(j,{value:i||"all",onValueChange:d,children:[e.jsx(b,{className:"w-full",children:e.jsx(g,{placeholder:"Select GPU"})}),e.jsxs(f,{children:[e.jsx(o,{value:"all",children:"All"}),m.gpus.map(l=>e.jsx(o,{value:l,children:l},l))]})]}),n==="motherboard"&&e.jsxs(j,{value:i||"all",onValueChange:d,children:[e.jsx(b,{className:"w-full",children:e.jsx(g,{placeholder:"Select Motherboard"})}),e.jsxs(f,{children:[e.jsx(o,{value:"all",children:"All"}),m.motherboards.map(l=>e.jsx(o,{value:l,children:l},l))]})]}),n==="condition"&&e.jsxs(j,{value:i||"all",onValueChange:d,children:[e.jsx(b,{className:"w-full",children:e.jsx(g,{placeholder:"Select Condition"})}),e.jsxs(f,{children:[e.jsx(o,{value:"all",children:"All"}),m.conditions.map(l=>e.jsx(o,{value:l,children:l},l))]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(N,{size:"sm",variant:"outline",onClick:()=>{t(""),p(""),v()},children:[e.jsx(B,{className:"mr-1 h-4 w-4"})," Reset"]})})]})]})]})}function Xe({units:r,rooms:m,filters:C={}}){const[v,n]=w.useState(C.search||""),[t,i]=w.useState(1),[p,y]=w.useState(null),d=10,{delete:A}=I(),l=()=>{_.fire({icon:"success",title:"Updated!",text:"The system unit has been updated successfully."})},x=w.useMemo(()=>{const s=a=>[...new Set(a.filter(c=>c!==null&&c!==""))].sort();return{rooms:Object.fromEntries(m.map(a=>[String(a.id),a.room_number])),unit_codes:s(r.map(a=>a.unit_code)),processors:s(r.map(a=>a.processor)),rams:s(r.map(a=>a.ram)),storages:s(r.map(a=>a.storage)),gpus:s(r.map(a=>a.gpu)),motherboards:s(r.map(a=>a.motherboard)),conditions:s(r.map(a=>a.condition))}},[r,m]);function S(s){const a=Object.fromEntries(Object.entries({...s,search:v||void 0}).filter(([,c])=>c!==""&&c!==void 0));U.get(route("system-units.index"),a,{preserveState:!0,replace:!0})}function M(){n(""),U.get(route("system-units.index"),{},{preserveState:!0,replace:!0})}function E(s){s.key==="Enter"&&S(C)}const F=w.useMemo(()=>{if(!v)return r;const s=v.toLowerCase();return r.filter(a=>{const c=a.unit_code?.toLowerCase()||"",z=a.room?.room_number?.toLowerCase()||"";return c.includes(s)||z.includes(s)})},[r,v]),P=Math.ceil(F.length/d)||1,V=F.slice((t-1)*d,t*d),R=s=>ie.find(c=>c.label.toLowerCase()===(s||"").toLowerCase())||{label:s||"Unknown",color:"bg-slate-400"};return e.jsxs(O,{children:[e.jsx(D,{}),e.jsxs($,{children:[e.jsx("header",{className:"sticky top-0 z-20 bg-white border-b px-6 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{}),e.jsx(q,{orientation:"vertical",className:"h-6 mx-3"}),e.jsx(W,{children:e.jsx(Z,{children:e.jsxs(ee,{children:[e.jsx(k,{href:"#","aria-current":"page",children:"Assets"}),e.jsx(se,{}),e.jsx(k,{href:"/admin/system-units","aria-current":"page",className:"font-semibold text-foreground",children:"System Unit Lists"})]})})}),e.jsx("div",{className:"flex-1"}),e.jsx(X,{})]})}),e.jsxs("main",{className:"w-full px-6 py-4",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"System Units"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-stretch sm:items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(de,{filters:C,filterOptions:x,onApplyFilters:S,onReset:M}),e.jsx(K,{placeholder:"Search Unit Code or Room",value:v,onChange:s=>{const a=s.target.value;n(a),i(1)},onKeyDown:E,className:`flex-1 min-w-0 sm:max-w-xs w-full 
                                border-[hsl(142,34%,51%)] text-[hsl(142,34%,20%)] 
                                focus:border-[hsl(142,34%,45%)] focus:ring-[hsl(142,34%,45%)] 
                                placeholder:text-[hsl(142,34%,40%)]`})]}),e.jsx(N,{className:"bg-[hsl(142,34%,51%)] text-white border-none hover:bg-[hsl(142,34%,45%)]",onClick:()=>U.visit(route("admin.system-units.create")),children:"+ Add New Unit"})]}),e.jsx("div",{className:"overflow-x-auto rounded-lg shadow-lg",children:e.jsxs(Y,{className:"min-w-full bg-white",children:[e.jsx(J,{children:e.jsxs(T,{className:"bg-[hsl(142,34%,85%)] text-[hsl(142,34%,25%)] hover:bg-[hsl(142,34%,80%)] h-10",children:[e.jsx(u,{className:"px-2 py-1",children:"#"}),e.jsx(u,{className:"px-2 py-1",children:"Pc Code"}),e.jsx(u,{className:"px-2 py-1",children:"Room"}),e.jsx(u,{className:"px-2 py-1",children:"Processor"}),e.jsx(u,{className:"px-2 py-1",children:"RAM"}),e.jsx(u,{className:"px-2 py-1",children:"Storage"}),e.jsx(u,{className:"px-2 py-1",children:"GPU"}),e.jsx(u,{className:"px-2 py-1",children:"Motherboard"}),e.jsx(u,{className:"px-2 py-1",children:"Condition"}),e.jsx(u,{className:"px-2 py-1",children:"Actions"})]})}),e.jsx(Q,{children:V.length>0?V.map((s,a)=>e.jsxs(T,{className:"hover:shadow-sm",children:[e.jsx(h,{children:(t-1)*d+a+1}),e.jsx(h,{children:s.unit_code}),e.jsxs(h,{children:["ROOM"," ",s.room?.room_number||"N/A"]}),e.jsx(h,{children:s.processor}),e.jsx(h,{children:s.ram}),e.jsx(h,{children:s.storage}),e.jsx(h,{children:s.gpu}),e.jsx(h,{children:s.motherboard}),e.jsx(h,{children:s.condition?e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium text-white ${R(s.condition).color}`,children:R(s.condition).label}):"N/A"}),e.jsx(h,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(N,{size:"sm",className:"flex items-center gap-2 bg-[hsl(142,34%,51%)] text-white border-none hover:bg-[hsl(142,34%,45%)]",onClick:()=>U.visit(`/system-units/view/${s.unit_code}`),children:[e.jsx(oe,{className:"h-4 w-4"}),"View"]}),e.jsxs(N,{size:"sm",className:"flex items-center gap-2 bg-[hsl(142,34%,51%)] text-white border-none hover:bg-[hsl(142,34%,45%)]",onClick:()=>{y(s),setShowModal(!0)},children:[e.jsx(te,{className:"h-4 w-4"}),"Edit"]}),e.jsxs(N,{size:"sm",variant:"destructive",className:"flex items-center gap-2",onClick:()=>{_.fire({title:`Delete ${s.unit_code}?`,text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(c=>{c.isConfirmed&&A(`/system-units/${s.id}`,{onSuccess:()=>{_.fire("Deleted!",`Unit ${s.unit_code} has been deleted.`,"success")}})})},children:[e.jsx(ne,{className:"h-4 w-4"}),"Delete"]})]})})]},s.id)):e.jsx(T,{children:e.jsx(h,{colSpan:10,className:"text-center py-4",children:"No matching units found."})})})]})}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",t," of ",P]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(N,{size:"sm",variant:"outline",disabled:t===1,onClick:()=>i(s=>s-1),children:"Previous"}),Array.from({length:P},(s,a)=>a+1).filter(s=>s===1||s===P?!0:s>=t-2&&s<=t+2).map((s,a,c)=>e.jsxs(L.Fragment,{children:[a>0&&c[a]-c[a-1]>1&&e.jsx("span",{className:"px-1",children:"..."}),e.jsx(N,{size:"sm",variant:t===s?"default":"outline",onClick:()=>i(s),children:s})]},s)),e.jsx(N,{size:"sm",variant:"outline",disabled:t===P,onClick:()=>i(s=>s+1),children:"Next"})]})]}),p&&e.jsx(H,{unit:p,rooms:m,onClose:()=>y(null),onSuccess:l})]})]})]})}export{Xe as default};
