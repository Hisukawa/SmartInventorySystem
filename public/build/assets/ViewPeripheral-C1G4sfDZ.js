import{r as d,j as e,H as A}from"./app-R59AgTg3.js";import{A as Q}from"./app-sidebar-CocvIPWR.js";import{S as D,a as T,b as $,c as L}from"./avatar-B6LBOXhP.js";import{B as j}from"./button-DUunvkwS.js";import{C as I,b as P,c as _,a as z}from"./card-g-1pmpnp.js";import{Q as f}from"./index-BMInCZ5G.js";import{B as H,a as O,b as U,c as m,d as u}from"./breadcrumb-CywDlYat.js";import{D as M,a as q,b as E,c as V}from"./dialog-BrOBJ2RO.js";import{Q as F}from"./qr-code-DiTsmBZI.js";import{C as G}from"./cpu-CAq9x7uE.js";import{B as X,T as J,I as N}from"./triangle-alert-DhP346Wg.js";import{M as K}from"./monitor-XV2CXqK3.js";import{B as W}from"./barcode-DxtvQqvz.js";import{C as Y}from"./circle-check-C2HTprJ4.js";import"./dropdown-menu-DEfTj1Cp.js";import"./createLucideIcon-BRqj4ZpW.js";import"./index-Cpb0aSub.js";import"./index-B4D52uEu.js";import"./index-DurLkVUy.js";import"./index-DulClGaF.js";import"./index-kdZ0iaiW.js";import"./utils-CBfrqCZ4.js";import"./chevron-right-DiwCHu_D.js";import"./sparkles-CYWeqXNt.js";import"./bell-D4LjbV-4.js";import"./keyboard-CNVVLoqW.js";import"./boxes-CWfJ03mT.js";import"./users-CweJ4Eq4.js";import"./user-bNgG0aCA.js";import"./chevron-down-CdK_YvPQ.js";import"./input-Cjcb1XXh.js";import"./index-CPvmv8yZ.js";import"./index-0a4pAYos.js";import"./index-WPOC8fpL.js";function Pe({peripheral:s}){const[n,w]=d.useState(null),[b,x]=d.useState(!1),[C,l]=d.useState(!1),a=s?.peripheral_code||"N/A",v=s?.unit?.unit_code||"N/A",o=s?.room?.room_number||"N/A",h=`${window.location.origin}/peripherals/${a}`,R=()=>{w(h),x(!0),l(!1)},y=async()=>{if(n)try{await navigator.clipboard.writeText(n),l(!0),setTimeout(()=>l(!1),2e3)}catch(t){console.error("Failed to copy: ",t)}},S=()=>{if(!n)return;const t=document.createElement("canvas"),p=document.querySelector("#modal-qr svg");if(!p)return;const k=new XMLSerializer().serializeToString(p),r=new Image,B=new Blob([k],{type:"image/svg+xml;charset=utf-8"}),g=URL.createObjectURL(B);r.onload=()=>{t.width=r.width+40,t.height=r.height+40+50;const i=t.getContext("2d");i.fillStyle="#fff",i.fillRect(0,0,t.width,t.height),i.drawImage(r,20,20),i.fillStyle="#000",i.font="bold 18px Arial",i.textAlign="center",i.fillText(`Room ${o} - ${a}`,t.width/2,r.height+20+30),URL.revokeObjectURL(g);const c=document.createElement("a");c.download=`ROOM-${o}_${a}.png`,c.href=t.toDataURL("image/png"),c.click()},r.src=g};return e.jsxs(D,{children:[e.jsx(Q,{}),e.jsxs(T,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 border-b bg-white",children:[e.jsx($,{}),e.jsx(L,{orientation:"vertical",className:"h-6 mx-3"}),e.jsx(H,{children:e.jsx(O,{children:e.jsxs(U,{children:[e.jsx(m,{href:"#",children:"Assets"}),e.jsx(u,{}),e.jsx(m,{href:"/admin/peripherals",children:"Peripherals"}),e.jsx(u,{}),e.jsx(m,{href:`/admin/peripherals/${a}`,className:"font-semibold text-foreground",children:"View Peripheral"})]})})})]}),e.jsx(A,{title:`View ${a}`}),e.jsxs("main",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Peripheral Information"}),e.jsxs(I,{className:"max-w-4xl mx-auto shadow-lg rounded-2xl",children:[e.jsx(P,{className:"bg-[hsl(142,34%,51%)] text-white border-none text-center",children:e.jsx(_,{className:"text-lg",children:"Peripheral Details"})}),e.jsxs(z,{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 py-5 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"font-medium",children:"Peripheral Code:"}),e.jsx("span",{children:a})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"font-medium",children:"Unit Code:"}),e.jsx("span",{children:v})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"font-medium",children:"Room:"}),e.jsx("span",{children:o})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"font-medium",children:"Type:"}),e.jsx("span",{children:s?.type||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"font-medium",children:"Serial Number:"}),e.jsx("span",{children:s?.serial_number||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s?.condition==="Functional"?e.jsx(Y,{className:"w-5 h-5 text-green-600"}):s?.condition==="Needs Repair"?e.jsx(J,{className:"w-5 h-5 text-yellow-600"}):e.jsx(N,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"font-medium",children:"Condition:"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium text-white ${s?.condition==="Functional"?"bg-green-500":s?.condition==="Needs Repair"?"bg-yellow-500":"bg-gray-500"}`,children:s?.condition||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:col-span-2",children:[e.jsx(N,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"font-medium",children:"Condition Details:"}),e.jsx("span",{children:s?.condition_details||"No details"})]})]}),e.jsxs("div",{className:"flex flex-col items-center py-6 bg-white rounded-b-2xl",children:[e.jsx("div",{className:"bg-white p-3 rounded-lg shadow cursor-pointer hover:shadow-lg transition",onClick:R,children:e.jsx(f,{value:h,size:128})}),e.jsx("span",{className:"mt-2 text-sm text-muted-foreground",children:"Scan to view public info"})]})]}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx(j,{variant:"secondary",onClick:()=>window.history.back(),children:"Go Back"})})]}),e.jsx(M,{open:b,onOpenChange:x,children:e.jsxs(q,{className:"flex flex-col items-center",children:[e.jsx(E,{children:e.jsxs(V,{children:["QR Code for Room ",o," - ",a]})}),n&&e.jsx("div",{id:"modal-qr",className:"cursor-pointer",onClick:y,children:e.jsx(f,{value:n,size:256})}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Click QR to copy link"}),C&&e.jsx("span",{className:"text-green-600 text-sm",children:"QR code path copied!"}),e.jsx("div",{className:"mt-1 flex gap-2",children:e.jsx(j,{onClick:S,children:"Download"})})]})})]})]})}export{Pe as default};
