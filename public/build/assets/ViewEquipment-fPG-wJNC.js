import{b as D,r,j as e,H as O,a as Q}from"./app-zexKJO97.js";import{A as T}from"./app-sidebar-CtIeRnnu.js";import{S as L,a as $,b as I,c as A}from"./avatar-IogP2JQo.js";import{B as f}from"./button-C_c5YR9e.js";import{Q as b}from"./index-HPobiooK.js";import{B as H,a as M,b as V,c as u,d as q}from"./breadcrumb-CYqYF5XH.js";import{D as U,a as P,b as G,c as X}from"./dialog-CPMEefBR.js";import"./dropdown-menu-D_MAJgOG.js";import"./createLucideIcon-B99LmBXb.js";import"./index-CDHfI43M.js";import"./index-He1fmtka.js";import"./index-Cxd30tsc.js";import"./index-BBAawZlT.js";import"./utils-CBfrqCZ4.js";import"./chevron-right-CgokHpYJ.js";import"./user-CORAC2cx.js";import"./keyboard-Dn99aLEH.js";import"./boxes-Dg0tTubQ.js";import"./users-BNv-jPPI.js";import"./chevron-down-DmorcnCN.js";import"./input-DDiD09Em.js";import"./index-Bx9syxGN.js";import"./index-BmqIA-pw.js";import"./index-EdVZcyPn.js";function Se(){const{props:S}=D(),t=S.equipment,[v,h]=r.useState(!1),[w,g]=r.useState(!1),[n,N]=r.useState(""),[o,R]=r.useState(""),[a,C]=r.useState(""),d=r.useRef(null);if(!t)return e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("p",{className:"text-lg text-gray-500",children:"Loading equipment..."})});const c=`${window.location.origin}/equipment/${t.equipment_code}`,z=(l,j,m)=>{N(l),C(j),R(m),h(!0)},k=async()=>{n&&(await navigator.clipboard.writeText(n),g(!0),setTimeout(()=>g(!1),2e3))},y=()=>{if(!d.current)return;const l=d.current.querySelector("svg"),m=new XMLSerializer().serializeToString(l),B=new Blob([m],{type:"image/svg+xml;charset=utf-8"}),E=URL.createObjectURL(B),p=new Image;p.onload=()=>{const i=document.createElement("canvas"),s=i.getContext("2d");i.width=220,i.height=280,s.fillStyle="#fff",s.fillRect(0,0,i.width,i.height),s.drawImage(p,10,10,200,200),s.fillStyle="#000",s.font="bold 16px sans-serif",s.textAlign="center",s.fillText(`ROOM ${a} - ${o}`,i.width/2,235),s.font="14px sans-serif",s.fillText(t.condition_details||"No additional details",i.width/2,255);const _=i.toDataURL("image/png"),x=document.createElement("a");x.href=_,x.download=`ROOM-${a}_${o}-QR.png`,x.click()},p.src=E};return e.jsxs(L,{children:[e.jsx(T,{}),e.jsxs($,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 border-b bg-white",children:[e.jsx(I,{}),e.jsx(A,{orientation:"vertical",className:"h-6 mx-3"}),e.jsx(H,{children:e.jsx(M,{children:e.jsxs(V,{children:[e.jsx(u,{href:"#",children:"Assets"}),e.jsx(q,{}),e.jsx(u,{href:"/equipments",children:"Equipments"}),e.jsx(q,{}),e.jsx(u,{href:c,"aria-current":"page",className:"font-semibold text-foreground",children:"View Equipment"})]})})})]}),e.jsx(O,{title:`View ${t.equipment_code}`}),e.jsxs("main",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Equipment Information"}),e.jsxs("div",{className:"bg-white shadow rounded p-6 max-w-3xl mx-auto grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Equipment Code:"})," ",t.equipment_code]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Equipment Name:"})," ",t.equipment_name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Type:"})," ",t.type]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Brand:"})," ",t.brand||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Condition:"})," ",t.condition]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Condition Details:"})," ",t.condition_details||"No additional details"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Room Number:"})," ",t.room?.room_number]}),e.jsxs("div",{className:"col-span-2 flex flex-col items-center mt-4 cursor-pointer",onClick:()=>z(c,t.room?.room_number,t.equipment_code),children:[e.jsx(b,{value:c,size:128}),e.jsx("span",{className:"mt-2 text-sm text-muted-foreground",children:"Click QR code to expand"})]})]}),e.jsx("div",{className:"mt-6 flex gap-2",children:e.jsx(f,{variant:"secondary",onClick:()=>Q.visit("/equipments"),children:"Go Back"})}),e.jsx(U,{open:v,onOpenChange:h,children:e.jsxs(P,{className:"max-w-sm mx-auto",children:[e.jsx(G,{children:e.jsxs(X,{children:["QR Code - ROOM ",a," -"," ",o]})}),e.jsxs("div",{className:"flex flex-col items-center",ref:d,children:[e.jsx(b,{id:"qr-download",value:n,size:200,className:"cursor-pointer",onClick:k}),e.jsx("p",{className:"text-xs mt-2 text-muted-foreground",children:"Click QR to copy link"}),w&&e.jsx("p",{className:"text-green-600 text-sm text-center mt-1",children:"Copied to clipboard!"}),e.jsx(f,{className:"mt-4",onClick:y,children:"Download QR"})]})]})})]})]})]})}export{Se as default};
