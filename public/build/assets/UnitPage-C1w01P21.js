import{r as o,u as S,j as e,a as y}from"./app-BNL90Hll.js";import{c as U,B as a}from"./input-C6X6A23u.js";import{S as B,A as T,a as P,b as k,c as z,B as L,d as _,e as D,f as $}from"./breadcrumb-BD9Yz_Nq.js";import I from"./AddUnitModal-LQFEsmUZ.js";import M from"./EditUnitModal-BQcpgt3A.js";import{T as A,a as E,b as x,c as n,d as O,e as i,S as C}from"./table-BdXEx_2a.js";import{Q as R}from"./index-pq5RwntO.js";import"./index-CDbUJBgo.js";import"./index-saVndoCh.js";import"./index-BSgHYIch.js";import"./index-CIFYKDVJ.js";import"./dialog-CLIazdDb.js";import"./label-Cob-BAwJ.js";const F=[{label:"Functional",color:"bg-green-500"},{label:"Defective",color:"bg-red-500"},{label:"Under Maintenance",color:"bg-yellow-500"},{label:"Needs Upgrade",color:"bg-blue-500"},{label:"For Disposal",color:"bg-gray-500"}];function te({units:h,rooms:u}){const[c,N]=o.useState(""),[t,d]=o.useState(1),[j,b]=o.useState(null),r=10,{delete:v}=S(),p=o.useMemo(()=>h.filter(s=>s.unit_code.toLowerCase().includes(c.toLowerCase())),[h,c]),f=Math.ceil(p.length/r),g=p.slice((t-1)*r,t*r),w=s=>{const l=F.find(m=>m.label.toLowerCase()===s.toLowerCase());return l?l.color:"bg-muted"};return e.jsxs(B,{children:[e.jsx(T,{}),e.jsxs(P,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 border-b bg-white",children:[e.jsx(k,{}),e.jsx(z,{orientation:"vertical",className:"h-6 mx-3"}),e.jsx(L,{children:e.jsx(_,{children:e.jsx(D,{children:e.jsx($,{href:"/units","aria-current":"page",className:"font-semibold text-foreground",children:"System Unit Lists"})})})})]}),e.jsxs("main",{className:"w-full px-6 py-4",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"System Units"}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("input",{type:"text",placeholder:"Search Unit Code...",className:"border rounded px-3 py-2 w-64",value:c,onChange:s=>{N(s.target.value),d(1)}}),e.jsx(I,{rooms:u})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(A,{children:[e.jsx(E,{className:"",children:e.jsxs(x,{children:[e.jsx(n,{children:"#"}),e.jsx(n,{children:"Unit Code"}),e.jsx(n,{children:"Condition"}),e.jsx(n,{children:"QR Code"}),e.jsx(n,{children:"Actions"})]})}),e.jsx(O,{children:g.length>0?g.map((s,l)=>e.jsxs(x,{children:[e.jsx(i,{children:(t-1)*r+l+1}),e.jsx(i,{children:s.unit_code}),e.jsx(i,{children:s.condition&&e.jsxs("div",{className:"mt-1 text-sm flex items-center gap-2",children:[e.jsx("span",{className:U("inline-block w-3 h-3 rounded-full",w(s.condition))}),e.jsx("span",{className:"capitalize",children:s.condition})]})}),e.jsx(i,{children:e.jsx("div",{className:"w-20 h-20",children:e.jsx(R,{value:`${window.location.origin}/equipment/${s.unit_code}`,size:64})})}),e.jsx(i,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(a,{size:"sm",variant:"secondary",onClick:()=>y.visit(`/system-units/view/${s.unit_code}`),children:"View"}),e.jsx(a,{size:"sm",variant:"secondary",onClick:()=>b(s),children:"Edit"}),e.jsx(a,{size:"sm",variant:"destructive",onClick:()=>{C.fire({title:`Delete ${s.unit_code}?`,text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(m=>{m.isConfirmed&&(v(`/system-units/${s.id}`),C.fire("Deleted!",`Unit ${s.unit_code} has been deleted.`,"success"))})},children:"Delete"})]})})]},s.id)):e.jsx(x,{children:e.jsx(i,{colSpan:10,className:"text-center py-4",children:"No matching units found."})})})]})}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",t," of ",f]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(a,{size:"sm",variant:"outline",disabled:t===1,onClick:()=>d(s=>s-1),children:"Previous"}),e.jsx(a,{size:"sm",variant:"outline",disabled:t===f,onClick:()=>d(s=>s+1),children:"Next"})]})]}),j&&e.jsx(M,{unit:j,rooms:u,onClose:()=>b(null)})]})]})]})}export{te as default};
