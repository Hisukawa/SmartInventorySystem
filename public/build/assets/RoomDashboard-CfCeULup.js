<<<<<<<< HEAD:public/build/assets/RoomDashboard-DChNgHnh.js
import{r as n,j as e,H as _,c as S}from"./app-i2GBo_P0.js";import{C as F,c as U}from"./card-BaF9BRDY.js";import{D as w,a as P,b as I,c as M,d as T}from"./dialog-CdBJ9iHW.js";import{B as q,a as E,b as B,c as R}from"./breadcrumb-DlWiOzz5.js";import"./utils-C4tYgYfe.js";import"./index-C-DvCLFg.js";import"./index-DURQXQd2.js";import"./index-CXel-xAN.js";import"./index-DETctro6.js";import"./chevron-right-t8b2153C.js";function Q({room:g,equipments:j=[],systemUnits:b=[],peripherals:f=[]}){const[s,y]=n.useState(null),[d,p]=n.useState(""),[r,N]=n.useState(""),[l,v]=n.useState("All"),[o,i]=n.useState(1),m=10,x=n.useMemo(()=>{let t=[...j,...b,...f];if(l!=="All"&&(t=t.filter(a=>a.type===l)),r.trim()!==""){const a=r.toLowerCase();t=t.filter(c=>(c.name||c.equipment_code||c.unit_code||c.peripheral_code).toLowerCase().includes(a))}return t},[j,b,f,l,r]),u=Math.ceil(x.length/m),C=n.useMemo(()=>{const t=(o-1)*m;return x.slice(t,t+m)},[x,o]),k=t=>{y(t),p(t.condition||"Good")},h=()=>{y(null),p("")},D=async()=>{if(s)try{let t=s.type==="Equipment"?"equipments":s.type==="System Unit"?"system-units":"peripherals";await S.put(`${t}/${s.id}`,{condition:d}),s.condition=d,h()}catch(t){console.error("Failed to update condition:",t)}};return e.jsxs(e.Fragment,{children:[e.jsx(_,{children:e.jsx("title",{children:g?.room_path||"Room Dashboard"})}),e.jsx("header",{className:"flex h-16 items-center gap-2 px-4 border-b bg-white",children:e.jsx(q,{children:e.jsx(E,{children:e.jsx(B,{children:e.jsx(R,{href:"/admin/rooms",className:"font-semibold text-foreground",children:"Dashboard"})})})})}),e.jsxs("main",{className:"m-10",children:[e.jsx("h1",{className:"text-2xl sm:text-2xl font-bold mb-4",children:g?.room_path||"Room"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("select",{className:"border rounded p-2",value:l,onChange:t=>{v(t.target.value),i(1)},children:[e.jsx("option",{value:"All",children:"All Types"}),e.jsx("option",{value:"Equipment",children:"Equipment"}),e.jsx("option",{value:"System Unit",children:"System Unit"}),e.jsx("option",{value:"Peripheral",children:"Peripheral"})]}),e.jsx("input",{type:"text",placeholder:"Search by name or code...",value:r,onChange:t=>{N(t.target.value),i(1)},className:"border rounded p-2 flex-1"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:C.map(t=>{let a="";switch(t.condition){case"Functional":case"Working":a="text-green-600";break;case"Under Maintenance":a="text-yellow-600";break;case"Defective":a="text-red-600";break;case"Needs Upgrade":a="text-blue-600";break;case"For Disposal":a="text-gray-600";break;default:a="text-gray-600"}return e.jsx(F,{className:"cursor-pointer",onClick:()=>k(t),children:e.jsxs(U,{className:"mt-5",children:[e.jsx("h2",{className:"font-semibold text-sm sm:text-lg",children:t.name||t.equipment_code||t.unit_code||t.peripheral_code||"Unnamed Item"}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600",children:["Type: ",t.type]}),t.room_path&&e.jsxs("p",{className:"text-xs sm:text-sm text-gray-500",children:["Room: ",t.room_path]}),e.jsxs("p",{className:`mt-1 font-medium text-xs sm:text-sm ${a}`,children:["Status: ",t.condition||"Good"]})]})},`${t.type}-${t.id}`)})}),u>1&&e.jsxs("div",{className:"flex justify-center mt-6 gap-2",children:[e.jsx("button",{className:"px-3 py-1 border rounded disabled:opacity-50",disabled:o===1,onClick:()=>i(o-1),children:"Previous"}),e.jsxs("span",{className:"px-3 py-1",children:["Page ",o," of ",u]}),e.jsx("button",{className:"px-3 py-1 border rounded disabled:opacity-50",disabled:o===u,onClick:()=>i(o+1),children:"Next"})]}),s&&e.jsx(w,{open:!!s,onOpenChange:h,children:e.jsxs(P,{children:[e.jsx(I,{children:e.jsxs(M,{children:["Edit Condition -"," ",s.name||s.equipment_code||s.unit_code||s.peripheral_code||"Unnamed Item"]})}),e.jsx("div",{className:"p-4",children:e.jsxs("select",{className:"border rounded p-2 w-full",value:d,onChange:t=>p(t.target.value),children:[e.jsx("option",{value:"Functional",children:"Functional"}),e.jsx("option",{value:"Working",children:"Working"}),e.jsx("option",{value:"Under Maintenance",children:"Under Maintenance"}),e.jsx("option",{value:"Defective",children:"Defective"}),e.jsx("option",{value:"Needs Upgrade",children:"Needs Upgrade"}),e.jsx("option",{value:"For Disposal",children:"For Disposal"})]})}),e.jsxs(T,{children:[e.jsx("button",{onClick:D,className:"bg-blue-500 text-white px-4 py-2 rounded",children:"Save"}),e.jsx("button",{onClick:h,className:"ml-2 bg-gray-300 text-black px-4 py-2 rounded",children:"Cancel"})]})]})})]})]})}export{Q as default};
========
import{r as n,j as e,H as _,c as S}from"./app-BZNx1Op-.js";import{C as F,c as U}from"./card-BqgX1qcJ.js";import{D as w,a as P,b as I,c as M,d as T}from"./dialog-Btb1mQWf.js";import{B as q,a as E,b as B,c as R}from"./breadcrumb-D4lvHxwb.js";import"./utils-BaUq1rAs.js";import"./index-DLgttGDj.js";import"./index-R5fUdd4-.js";import"./index-CAS2U3-u.js";import"./index-B22ktmVf.js";import"./chevron-right-BWigJU2m.js";function Q({room:g,equipments:j=[],systemUnits:b=[],peripherals:f=[]}){const[s,y]=n.useState(null),[d,p]=n.useState(""),[r,N]=n.useState(""),[l,v]=n.useState("All"),[o,i]=n.useState(1),m=10,x=n.useMemo(()=>{let t=[...j,...b,...f];if(l!=="All"&&(t=t.filter(a=>a.type===l)),r.trim()!==""){const a=r.toLowerCase();t=t.filter(c=>(c.name||c.equipment_code||c.unit_code||c.peripheral_code).toLowerCase().includes(a))}return t},[j,b,f,l,r]),u=Math.ceil(x.length/m),C=n.useMemo(()=>{const t=(o-1)*m;return x.slice(t,t+m)},[x,o]),k=t=>{y(t),p(t.condition||"Good")},h=()=>{y(null),p("")},D=async()=>{if(s)try{let t=s.type==="Equipment"?"equipments":s.type==="System Unit"?"system-units":"peripherals";await S.put(`${t}/${s.id}`,{condition:d}),s.condition=d,h()}catch(t){console.error("Failed to update condition:",t)}};return e.jsxs(e.Fragment,{children:[e.jsx(_,{children:e.jsx("title",{children:g?.room_path||"Room Dashboard"})}),e.jsx("header",{className:"flex h-16 items-center gap-2 px-4 border-b bg-white",children:e.jsx(q,{children:e.jsx(E,{children:e.jsx(B,{children:e.jsx(R,{href:"/admin/rooms",className:"font-semibold text-foreground",children:"Dashboard"})})})})}),e.jsxs("main",{className:"m-10",children:[e.jsx("h1",{className:"text-2xl sm:text-2xl font-bold mb-4",children:g?.room_path||"Room"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("select",{className:"border rounded p-2",value:l,onChange:t=>{v(t.target.value),i(1)},children:[e.jsx("option",{value:"All",children:"All Types"}),e.jsx("option",{value:"Equipment",children:"Equipment"}),e.jsx("option",{value:"System Unit",children:"System Unit"}),e.jsx("option",{value:"Peripheral",children:"Peripheral"})]}),e.jsx("input",{type:"text",placeholder:"Search by name or code...",value:r,onChange:t=>{N(t.target.value),i(1)},className:"border rounded p-2 flex-1"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:C.map(t=>{let a="";switch(t.condition){case"Functional":case"Working":a="text-green-600";break;case"Under Maintenance":a="text-yellow-600";break;case"Defective":a="text-red-600";break;case"Needs Upgrade":a="text-blue-600";break;case"For Disposal":a="text-gray-600";break;default:a="text-gray-600"}return e.jsx(F,{className:"cursor-pointer",onClick:()=>k(t),children:e.jsxs(U,{className:"mt-5",children:[e.jsx("h2",{className:"font-semibold text-sm sm:text-lg",children:t.name||t.equipment_code||t.unit_code||t.peripheral_code||"Unnamed Item"}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600",children:["Type: ",t.type]}),t.room_path&&e.jsxs("p",{className:"text-xs sm:text-sm text-gray-500",children:["Room: ",t.room_path]}),e.jsxs("p",{className:`mt-1 font-medium text-xs sm:text-sm ${a}`,children:["Status: ",t.condition||"Good"]})]})},`${t.type}-${t.id}`)})}),u>1&&e.jsxs("div",{className:"flex justify-center mt-6 gap-2",children:[e.jsx("button",{className:"px-3 py-1 border rounded disabled:opacity-50",disabled:o===1,onClick:()=>i(o-1),children:"Previous"}),e.jsxs("span",{className:"px-3 py-1",children:["Page ",o," of ",u]}),e.jsx("button",{className:"px-3 py-1 border rounded disabled:opacity-50",disabled:o===u,onClick:()=>i(o+1),children:"Next"})]}),s&&e.jsx(w,{open:!!s,onOpenChange:h,children:e.jsxs(P,{children:[e.jsx(I,{children:e.jsxs(M,{children:["Edit Condition -"," ",s.name||s.equipment_code||s.unit_code||s.peripheral_code||"Unnamed Item"]})}),e.jsx("div",{className:"p-4",children:e.jsxs("select",{className:"border rounded p-2 w-full",value:d,onChange:t=>p(t.target.value),children:[e.jsx("option",{value:"Functional",children:"Functional"}),e.jsx("option",{value:"Working",children:"Working"}),e.jsx("option",{value:"Under Maintenance",children:"Under Maintenance"}),e.jsx("option",{value:"Defective",children:"Defective"}),e.jsx("option",{value:"Needs Upgrade",children:"Needs Upgrade"}),e.jsx("option",{value:"For Disposal",children:"For Disposal"})]})}),e.jsxs(T,{children:[e.jsx("button",{onClick:D,className:"bg-blue-500 text-white px-4 py-2 rounded",children:"Save"}),e.jsx("button",{onClick:h,className:"ml-2 bg-gray-300 text-black px-4 py-2 rounded",children:"Cancel"})]})]})})]})]})}export{Q as default};
>>>>>>>> upstream/main:public/build/assets/RoomDashboard-CfCeULup.js
