import{r as l,j as e,H as B}from"./app-FC1U-uTU.js";import{A as $}from"./app-sidebar-JjNZzTDp.js";import{S as O,a as D,b as L,c as Q}from"./avatar-DUETvLSO.js";import{B as b}from"./button-DQdr5HDf.js";import{D as T,a as P,c as U}from"./dialog-DTAc3RNp.js";import{Q as N}from"./index-BOCd7POp.js";import{B as I,a as q,b as E,c as m,d as v}from"./breadcrumb-CXgt-dVw.js";import"./dropdown-menu-Bes4Wl3l.js";import"./utils-BE88PE2l.js";import"./index-D8I8jTRo.js";import"./index-BbcJaTle.js";import"./index-BClNLk5S.js";import"./index-CZujx-lZ.js";import"./chevron-right-DzZnjBIF.js";import"./sparkles-BcDgX7xg.js";import"./bell-BN1MZd3Y.js";import"./keyboard-CVHosXw-.js";import"./boxes-ut5YPV1R.js";import"./file-text-DrrBmEVG.js";import"./users-omEQPJM7.js";import"./chevron-down-2-A9pIXt.js";import"./input-BJ8Z-0jM.js";import"./index-DrezYJLL.js";import"./index-pZ6jIi2w.js";import"./index-DDek2YJZ.js";function ge({peripheral:t}){const[d,h]=l.useState(""),[x,p]=l.useState(""),[R,a]=l.useState(!1),C=r=>{const c=route("peripherals.public.show",r.peripheral_code);h(c),p(r.room?.room_number||"N/A"),a(!1)},S=async()=>{d&&(await navigator.clipboard.writeText(d),a(!0),setTimeout(()=>a(!1),2e3))},k=()=>{const r=document.getElementById("qr-download");if(!r)return;const c=new XMLSerializer().serializeToString(r),i=document.createElement("canvas"),o=i.getContext("2d"),g=window.URL||window.webkitURL||window,s=new Image,y=new Blob([c],{type:"image/svg+xml;charset=utf-8"}),u=g.createObjectURL(y);s.onload=()=>{i.width=s.width+40,i.height=s.height+40+60,o.fillStyle="#fff",o.fillRect(0,0,i.width,i.height);const _=(i.width-s.width)/2;o.drawImage(s,_,20);const j=x||"N/A",f=t.unit?.unit_code||"N/A",w=t.peripheral_code||"N/A";o.fillStyle="#000",o.textAlign="center",o.font="bold 18px Arial",o.fillText(`Room ${j}`,i.width/2,s.height+20+20),o.fillText(`${f}`,i.width/2,s.height+20+40),o.fillText(`${w}`,i.width/2,s.height+20+60),g.revokeObjectURL(u);const A=`ROOM-${j}_${f}_${w}-QR.png`,n=document.createElement("a");n.download=A,n.href=i.toDataURL("image/png"),document.body.appendChild(n),n.click(),document.body.removeChild(n)},s.src=u};return e.jsxs(O,{children:[e.jsx($,{}),e.jsxs(D,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 border-b bg-white",children:[e.jsx(L,{}),e.jsx(Q,{orientation:"vertical",className:"h-6 mx-3"}),e.jsx(I,{children:e.jsx(q,{children:e.jsxs(E,{children:[e.jsx(m,{href:"#",children:"Assets"}),e.jsx(v,{}),e.jsx(m,{href:"/admin/peripherals",children:"Peripherals"}),e.jsx(v,{}),e.jsx(m,{href:`/admin/peripherals/${t.peripheral_code}`,"aria-current":"page",className:"font-semibold text-foreground",children:"View Peripheral"})]})})})]}),e.jsx(B,{title:`View ${t.peripheral_code}`}),e.jsxs("main",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Peripheral Information"}),e.jsxs("div",{className:"bg-white shadow rounded p-6 max-w-3xl mx-auto grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Peripheral Code:"})," ",t.peripheral_code]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Type:"})," ",t.type]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Serial Number:"})," ",t.serial_number||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Condition:"})," ",t.condition]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Room:"})," ",t.room?`ROOM ${t.room.room_number}`:"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Unit Code:"})," ",t.unit?t.unit.unit_code:"N/A"]}),e.jsxs("div",{className:"col-span-2 flex flex-col items-center mt-4",children:[e.jsx("div",{className:"w-32 h-32 bg-white p-2 rounded cursor-pointer",onClick:()=>C(t),children:e.jsx(N,{id:"qr-download",value:`${window.location.origin}/peripherals/${t.peripheral_code}`,size:128})}),e.jsx("span",{className:"mt-2 text-sm text-muted-foreground",children:"Click QR to enlarge"})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx(b,{variant:"secondary",onClick:()=>window.history.back(),children:"Go Back"})}),e.jsx(T,{open:!!d,onOpenChange:()=>{h(""),p(""),a(!1)},children:e.jsxs(P,{className:"max-w-sm text-center",children:[e.jsxs(U,{children:["ROOM ",x]}),e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"inline-block p-4 bg-white rounded cursor-pointer",onClick:r=>{r.stopPropagation(),S()},children:[e.jsx(N,{id:"qr-download",value:d,size:200}),e.jsx("p",{className:"text-xs mt-2 text-muted-foreground",children:"Click QR to copy link"})]}),R&&e.jsx("p",{className:"text-green-600 text-sm text-center mt-1",children:"Copied to clipboard!"}),e.jsx(b,{className:"mt-4",onClick:k,children:"Download QR"})]})]})})]})]})]})}export{ge as default};
