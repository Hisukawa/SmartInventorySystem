import{r as p,j as e,a as d,R as y}from"./app-zexKJO97.js";import{B as n}from"./button-C_c5YR9e.js";import{A as w}from"./app-sidebar-CtIeRnnu.js";import{S as v,a as C,b as S,c as E}from"./avatar-IogP2JQo.js";import{I as k}from"./input-DDiD09Em.js";import{N as _}from"./Notification-B35Eq-vc.js";import{T as B,a as T,b as h,c as a,d as q,e as i}from"./table-DZJW52vT.js";import{B as I,a as R,b as A,c as f,d as D}from"./breadcrumb-CYqYF5XH.js";import"./popover-BoCw3sWz.js";import"./select-D2JyiQO6.js";import"./index-He1fmtka.js";import"./utils-CBfrqCZ4.js";import"./dropdown-menu-D_MAJgOG.js";import"./createLucideIcon-B99LmBXb.js";import"./index-CDHfI43M.js";import"./index-Cxd30tsc.js";import"./index-BBAawZlT.js";import"./chevron-right-CgokHpYJ.js";import"./user-CORAC2cx.js";import"./keyboard-Dn99aLEH.js";import"./boxes-Dg0tTubQ.js";import"./users-BNv-jPPI.js";import"./chevron-down-DmorcnCN.js";import"./index-Bx9syxGN.js";import"./index-BmqIA-pw.js";import"./index-EdVZcyPn.js";import"./bell-BxCzLe1n.js";import"./index-Btszpd2b.js";const P={Functional:"bg-green-200 text-green-800",Defective:"bg-red-200 text-red-800","Intermittent Issue":"bg-yellow-200 text-yellow-800","Needs Cleaning":"bg-blue-200 text-blue-800","For Replacement":"bg-orange-200 text-orange-800","For Disposal":"bg-gray-200 text-gray-800",Condemned:"bg-black text-white","Minor Damage":"bg-yellow-200 text-yellow-800","Needs Repair":"bg-red-200 text-red-800","Intermittent Connectivity":"bg-yellow-200 text-yellow-800","No Signal":"bg-red-200 text-red-800","Needs Configuration":"bg-blue-200 text-blue-800",Expired:"bg-red-300 text-red-900","Needs Refill":"bg-blue-200 text-blue-900",Rusting:"bg-orange-200 text-orange-900"};function xe({equipments:m,existingRooms:u,filters:z={}}){const[b,N]=p.useState(""),[r,c]=p.useState(1),l=10;p.useMemo(()=>{const t=s=>[...new Set(s.filter(Boolean))].sort();return{types:t(m.map(s=>s.type)),conditions:t(m.map(s=>s.condition)),rooms:Object.fromEntries(u.map(s=>[String(s.id),s.room_number]))}},[m,u]);const o=m.filter(t=>t.equipment_code.toLowerCase().includes(b.toLowerCase())),x=Math.ceil(o.length/l)||1,g=o.slice((r-1)*l,r*l);return e.jsxs(v,{children:[e.jsx(w,{}),e.jsxs(C,{children:[e.jsxs("header",{className:"sticky top-0 z-20 bg-white border-b px-6 py-3 flex items-center gap-2",children:[e.jsx(S,{}),e.jsx(E,{orientation:"vertical",className:"h-6 mx-3"}),e.jsx(I,{children:e.jsx(R,{children:e.jsxs(A,{children:[e.jsx(f,{href:"#",children:"Assets"}),e.jsx(D,{}),e.jsx(f,{href:"/equipments",className:"font-semibold text-foreground",children:"Equipments"})]})})}),e.jsx("div",{className:"flex-1"}),e.jsx(_,{})]}),e.jsxs("main",{className:"w-full px-6 py-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 gap-2",children:[e.jsx(k,{placeholder:"Search Equipment Code...",value:b,onChange:t=>N(t.target.value),onKeyDown:t=>t.key==="Enter"&&c(1),className:"text-sm sm:text-base px-2 sm:px-3 py-1 sm:py-2 flex-1 max-w-xs border-[hsl(142,34%,51%)]"}),e.jsx(n,{className:"bg-[hsl(142,31%,51%)] hover:bg-[hsl(142,31%,45%)] text-white",onClick:()=>d.visit("/equipments/addequipment"),children:"Add Equipment"})]}),e.jsxs("div",{className:"overflow-x-auto rounded-lg border",children:[e.jsxs(B,{children:[e.jsx(T,{children:e.jsxs(h,{className:"bg-[hsl(142,34%,85%)] text-[hsl(142,34%,25%)] hover:bg-[hsl(142,34%,80%)]",children:[e.jsx(a,{children:"#"}),e.jsx(a,{children:"Equipment Code"}),e.jsx(a,{children:"Equipment Name"}),e.jsx(a,{children:"Room"}),e.jsx(a,{children:"Type"}),e.jsx(a,{children:"Condition"}),e.jsx(a,{className:"text-center",children:"Actions"})]})}),e.jsx(q,{children:g.length>0?g.map((t,s)=>e.jsxs(h,{children:[e.jsx(i,{children:(r-1)*l+s+1}),e.jsx(i,{children:t.equipment_code}),e.jsx(i,{children:t.equipment_name}),e.jsx(i,{children:t.room?.room_number??"N/A"}),e.jsx(i,{children:t.type}),e.jsx(i,{children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${P[t.condition]||"bg-gray-200 text-gray-800"}`,children:t.condition})}),e.jsxs(i,{className:"text-center flex gap-2 justify-center",children:[e.jsx(n,{size:"sm",className:"bg-[hsl(142,34%,51%)] text-white",onClick:()=>d.visit(`/admin/equipments/${t.equipment_code}`),children:"View"}),e.jsx(n,{size:"sm",className:"bg-[hsl(142,34%,51%)] text-white",onClick:()=>d.visit(`/equipments/edit/${t.equipment_code}`),children:"Edit"}),e.jsx(n,{size:"sm",className:"bg-red-500 text-white",onClick:()=>{confirm(`Are you sure you want to delete ${t.equipment_name}?`)&&d.delete(`/equipments/${t.equipment_code}`,{preserveScroll:!0})},children:"Delete"})]})]},t.id)):e.jsx(h,{children:e.jsx(i,{colSpan:7,className:"text-center py-4",children:"No equipments found."})})})]}),e.jsxs("div",{className:"flex justify-between items-center p-4",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Showing"," ",o.length===0?0:(r-1)*l+1," ","â€“"," ",Math.min(r*l,o.length)," ","of ",o.length," equipments"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{size:"sm",variant:"outline",disabled:r===1,onClick:()=>c(r-1),children:"Previous"}),Array.from({length:x},(t,s)=>s+1).filter(t=>t===1||t===x?!0:t>=r-2&&t<=r+2).map((t,s,j)=>e.jsxs(y.Fragment,{children:[s>0&&j[s]-j[s-1]>1&&e.jsx("span",{className:"px-2",children:"..."}),e.jsx(n,{size:"sm",variant:r===t?"default":"outline",onClick:()=>c(t),children:t})]},t)),e.jsx(n,{size:"sm",variant:"outline",disabled:r===x,onClick:()=>c(r+1),children:"Next"})]})]})]})]})]})]})}export{xe as default};
