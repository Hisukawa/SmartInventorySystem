import{r as S,u as I,j as e,a as P,R as L}from"./app-z6Vw40qg.js";import{B as N}from"./button-C8lyBYc6.js";import{A as D}from"./app-sidebar-DZk1Umid.js";import{S as O,a as $,b as G,c as q}from"./avatar-DtziOh3W.js";import H from"./AddUnitModal-Cyz8NScA.js";import K from"./EditUnitModal-4sIUZFt5.js";import{S as _}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{I as X}from"./input-DHKWE85y.js";import{N as Y}from"./Notification-D2-v6fQt.js";import{T as J,a as Q,b as F,c as u,d as W,e as h}from"./table-CyPFlxRG.js";import"./index-DESsBtHb.js";import{B as Z,a as ee,b as se,c as R,d as le}from"./breadcrumb-4akR97PS.js";import{P as ae,a as re,b as oe,S as p,c as b,d as g,e as f,f as o}from"./select-0RLxlNpR.js";import{F as ne}from"./funnel-C1fABeA3.js";import{X as B}from"./index-CV-8ncH2.js";import"./index-DOpt5hlj.js";import"./index-B8ua60HV.js";import"./createLucideIcon-B0WYDbjW.js";import"./dropdown-menu-BxwQN4Fw.js";import"./index-C0fTul90.js";import"./index-CKOI0W7X.js";import"./chevron-right-Bj5qHi4z.js";import"./sparkles-BKefO-Bw.js";import"./user-D47MYVJ3.js";import"./index-B4P4VYbh.js";import"./dialog-BzgToahw.js";import"./label-B27K8fCT.js";import"./index-BdQq_4o_.js";import"./index-BtyE1H5J.js";const ce=[{label:"Functional",color:"bg-green-500"},{label:"Defective",color:"bg-red-500"},{label:"Under Maintenance",color:"bg-yellow-500"},{label:"Needs Upgrade",color:"bg-blue-500"},{label:"For Disposal",color:"bg-gray-500"}];function te({filters:r={},filterOptions:i,onApplyFilters:w,onReset:v}){const[c,n]=S.useState(""),[d,j]=S.useState("");S.useEffect(()=>{const x=["unit_code","room_id","processor","ram","storage","gpu","motherboard","condition"].find(C=>!!r[C]);x?(n(x),j(String(r[x]))):(n(""),j(""))},[r]);const y=[{value:"unit_code",label:"Unit Code"},{value:"room_id",label:"Room"},{value:"processor",label:"Processor"},{value:"ram",label:"RAM"},{value:"storage",label:"Storage"},{value:"gpu",label:"GPU"},{value:"motherboard",label:"Motherboard"},{value:"condition",label:"Condition"}];function m(l){const x=l==="all"?"":l;j(x);const C={...r};c&&(C[c]=x),w(C)}const A=!!r.unit_code||!!r.room_id||!!r.processor||!!r.ram||!!r.storage||!!r.gpu||!!r.motherboard||!!r.condition;return e.jsxs(ae,{children:[e.jsx(re,{asChild:!0,children:e.jsxs(N,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-4 w-4"}),"Filter",A&&e.jsx(B,{className:"h-4 w-4 ml-1 cursor-pointer",onClick:l=>{l.stopPropagation(),n(""),j(""),v()}})]})}),e.jsxs(oe,{className:"w-[calc(100vw-2rem)] sm:w-[380px] p-4",children:[e.jsx("h4",{className:"font-medium mb-3 text-lg",children:"Filter Options"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs(p,{value:c,onValueChange:l=>{n(l),j("")},children:[e.jsx(b,{className:"w-full",children:e.jsx(g,{placeholder:"Select Field"})}),e.jsx(f,{children:y.map(l=>e.jsx(o,{value:l.value,children:l.label},l.value))})]}),c==="unit_code"&&e.jsxs(p,{value:d||"all",onValueChange:m,children:[e.jsx(b,{className:"w-full",children:e.jsx(g,{placeholder:"Select Unit Code"})}),e.jsxs(f,{children:[e.jsx(o,{value:"all",children:"All"}),i.unit_codes.map(l=>e.jsx(o,{value:l,children:l},l))]})]}),c==="room_id"&&e.jsxs(p,{value:d||"all",onValueChange:m,children:[e.jsx(b,{className:"w-full",children:e.jsx(g,{placeholder:"Select Room"})}),e.jsxs(f,{children:[e.jsx(o,{value:"all",children:"All"}),Object.entries(i.rooms).map(([l,x])=>e.jsxs(o,{value:l,children:["Room ",x]},l))]})]}),c==="processor"&&e.jsxs(p,{value:d||"all",onValueChange:m,children:[e.jsx(b,{className:"w-full",children:e.jsx(g,{placeholder:"Select Processor"})}),e.jsxs(f,{children:[e.jsx(o,{value:"all",children:"All"}),i.processors.map(l=>e.jsx(o,{value:l,children:l},l))]})]}),c==="ram"&&e.jsxs(p,{value:d||"all",onValueChange:m,children:[e.jsx(b,{className:"w-full",children:e.jsx(g,{placeholder:"Select RAM"})}),e.jsxs(f,{children:[e.jsx(o,{value:"all",children:"All"}),i.rams.map(l=>e.jsx(o,{value:l,children:l},l))]})]}),c==="storage"&&e.jsxs(p,{value:d||"all",onValueChange:m,children:[e.jsx(b,{className:"w-full",children:e.jsx(g,{placeholder:"Select Storage"})}),e.jsxs(f,{children:[e.jsx(o,{value:"all",children:"All"}),i.storages.map(l=>e.jsx(o,{value:l,children:l},l))]})]}),c==="gpu"&&e.jsxs(p,{value:d||"all",onValueChange:m,children:[e.jsx(b,{className:"w-full",children:e.jsx(g,{placeholder:"Select GPU"})}),e.jsxs(f,{children:[e.jsx(o,{value:"all",children:"All"}),i.gpus.map(l=>e.jsx(o,{value:l,children:l},l))]})]}),c==="motherboard"&&e.jsxs(p,{value:d||"all",onValueChange:m,children:[e.jsx(b,{className:"w-full",children:e.jsx(g,{placeholder:"Select Motherboard"})}),e.jsxs(f,{children:[e.jsx(o,{value:"all",children:"All"}),i.motherboards.map(l=>e.jsx(o,{value:l,children:l},l))]})]}),c==="condition"&&e.jsxs(p,{value:d||"all",onValueChange:m,children:[e.jsx(b,{className:"w-full",children:e.jsx(g,{placeholder:"Select Condition"})}),e.jsxs(f,{children:[e.jsx(o,{value:"all",children:"All"}),i.conditions.map(l=>e.jsx(o,{value:l,children:l},l))]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(N,{size:"sm",variant:"outline",onClick:()=>{n(""),j(""),v()},children:[e.jsx(B,{className:"mr-1 h-4 w-4"})," Reset"]})})]})]})]})}function Ee({units:r,rooms:i,filters:w={}}){const[v,c]=S.useState(w.search||""),[n,d]=S.useState(1),[j,y]=S.useState(null),m=10,{delete:A}=I(),l=()=>{_.fire({icon:"success",title:"Updated!",text:"The system unit has been updated successfully."})},x=S.useMemo(()=>{const s=a=>[...new Set(a.filter(t=>t!==null&&t!==""))].sort();return{rooms:Object.fromEntries(i.map(a=>[String(a.id),a.room_number])),unit_codes:s(r.map(a=>a.unit_code)),processors:s(r.map(a=>a.processor)),rams:s(r.map(a=>a.ram)),storages:s(r.map(a=>a.storage)),gpus:s(r.map(a=>a.gpu)),motherboards:s(r.map(a=>a.motherboard)),conditions:s(r.map(a=>a.condition))}},[r,i]);function C(s){const a=Object.fromEntries(Object.entries({...s,search:v||void 0}).filter(([,t])=>t!==""&&t!==void 0));P.get("/system-units",a,{preserveState:!0,replace:!0})}function k(){c(""),P.get("/system-units",{},{preserveState:!0,replace:!0})}function z(s){s.key==="Enter"&&C(w)}const T=S.useMemo(()=>{if(!v)return r;const s=v.toLowerCase();return r.filter(a=>{const t=a.unit_code?.toLowerCase()||"",E=a.room?.room_number?.toLowerCase()||"";return t.includes(s)||E.includes(s)})},[r,v]),U=Math.ceil(T.length/m)||1,V=T.slice((n-1)*m,n*m),M=s=>ce.find(t=>t.label.toLowerCase()===(s||"").toLowerCase())||{label:s||"Unknown",color:"bg-slate-400"};return e.jsxs(O,{children:[e.jsx(D,{}),e.jsxs($,{children:[e.jsx("header",{className:"sticky top-0 z-20 bg-white border-b px-6 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{}),e.jsx(q,{orientation:"vertical",className:"h-6 mx-3"}),e.jsx(Z,{children:e.jsx(ee,{children:e.jsxs(se,{children:[e.jsx(R,{href:"#","aria-current":"page",children:"Assets"}),e.jsx(le,{}),e.jsx(R,{href:"/admin/system-units","aria-current":"page",className:"font-semibold text-foreground",children:"System Unit Lists"})]})})}),e.jsx("div",{className:"flex-1"}),e.jsx(Y,{})]})}),e.jsxs("main",{className:"w-full px-6 py-4",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"System Units"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-stretch sm:items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(te,{filters:w,filterOptions:x,onApplyFilters:C,onReset:k}),e.jsx(X,{placeholder:"Search Unit Code or Room",value:v,onChange:s=>{c(s.target.value),d(1)},onKeyDown:z,className:"w-64"})]}),e.jsx(H,{rooms:i})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(J,{children:[e.jsx(Q,{children:e.jsxs(F,{className:"h-10",children:[e.jsx(u,{className:"px-2 py-1",children:"#"}),e.jsx(u,{className:"px-2 py-1",children:"Unit Code"}),e.jsx(u,{className:"px-2 py-1",children:"Room"}),e.jsx(u,{className:"px-2 py-1",children:"Processor"}),e.jsx(u,{className:"px-2 py-1",children:"RAM"}),e.jsx(u,{className:"px-2 py-1",children:"Storage"}),e.jsx(u,{className:"px-2 py-1",children:"GPU"}),e.jsx(u,{className:"px-2 py-1",children:"Motherboard"}),e.jsx(u,{className:"px-2 py-1",children:"Condition"}),e.jsx(u,{className:"px-2 py-1",children:"Actions"})]})}),e.jsx(W,{children:V.length>0?V.map((s,a)=>e.jsxs(F,{children:[e.jsx(h,{children:(n-1)*m+a+1}),e.jsx(h,{children:s.unit_code}),e.jsxs(h,{children:["ROOM"," ",s.room?.room_number||"N/A"]}),e.jsx(h,{children:s.processor}),e.jsx(h,{children:s.ram}),e.jsx(h,{children:s.storage}),e.jsx(h,{children:s.gpu}),e.jsx(h,{children:s.motherboard}),e.jsx(h,{children:s.condition?e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium text-white ${M(s.condition).color}`,children:M(s.condition).label}):"N/A"}),e.jsx(h,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{size:"sm",variant:"secondary",onClick:()=>P.visit(`/system-units/view/${s.unit_code}`),children:"View"}),e.jsx(N,{size:"sm",variant:"secondary",onClick:()=>{y(s),setShowModal(!0)},children:"Edit"}),e.jsx(N,{size:"sm",variant:"destructive",onClick:()=>{_.fire({title:`Delete ${s.unit_code}?`,text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&A(`/system-units/${s.id}`,{onSuccess:()=>{_.fire("Deleted!",`Unit ${s.unit_code} has been deleted.`,"success")}})})},children:"Delete"})]})})]},s.id)):e.jsx(F,{children:e.jsx(h,{colSpan:10,className:"text-center py-4",children:"No matching units found."})})})]})}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",n," of ",U]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(N,{size:"sm",variant:"outline",disabled:n===1,onClick:()=>d(s=>s-1),children:"Previous"}),Array.from({length:U},(s,a)=>a+1).filter(s=>s===1||s===U?!0:s>=n-2&&s<=n+2).map((s,a,t)=>e.jsxs(L.Fragment,{children:[a>0&&t[a]-t[a-1]>1&&e.jsx("span",{className:"px-1",children:"..."}),e.jsx(N,{size:"sm",variant:n===s?"default":"outline",onClick:()=>d(s),children:s})]},s)),e.jsx(N,{size:"sm",variant:"outline",disabled:n===U,onClick:()=>d(s=>s+1),children:"Next"})]})]}),j&&e.jsx(K,{unit:j,rooms:i,onClose:()=>y(null),onSuccess:l})]})]})]})}export{Ee as default};
