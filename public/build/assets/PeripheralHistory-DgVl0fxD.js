import{b as N,r as x,j as e,H as b,c as f}from"./app-R10woM70.js";import{S as c}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{S as g,a as w,b as v,c as P}from"./avatar-BymqzAS-.js";import{N as S}from"./Notification-BjA0sAOM.js";import{B as C,a as B,b as _,c as H}from"./breadcrumb-BMZb9MIc.js";import{A as k}from"./app-sidebar-CW1xXjS8.js";import{T as A}from"./TopNavBar-B7VgE08m.js";import"./index-c4gAkwMv.js";import"./button-Cf_-5Qlp.js";import"./utils-CBfrqCZ4.js";import"./input-BaFYG-Z9.js";import"./index-2cXhI42s.js";import"./index-vlMlJqEu.js";import"./createLucideIcon-DIKFRV_s.js";import"./index-BJUO8xHK.js";import"./dropdown-menu-D_vcpkDU.js";import"./index-BIrXRhj3.js";import"./chevron-right-DGgvvKJ_.js";import"./index-DNm2Kv2Q.js";import"./index-RCUCD7fw.js";import"./bell-CvyQg1tc.js";import"./house-D6z2FWmn.js";import"./user-BmwlwuQK.js";import"./log-out-7G2NgEM-.js";import"./keyboard-Y-iDu31J.js";import"./boxes-BBpHa4_B.js";import"./users-B1PQVU9x.js";import"./chevron-down-CIG8vxEZ.js";import"./cpu-Hn2al9dz.js";import"./hard-drive-9fxdKnGY.js";import"./menu-BCgVq9ip.js";function ne(){const{histories:p}=N().props,[r,h]=x.useState(p.data||[]),[t,l]=x.useState(1),a=10,n=t*a,d=n-a,j=r.slice(d,n),m=Math.ceil(r.length/a),u=async s=>{c.fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(async i=>{if(i.isConfirmed)try{await f.delete(`/peripherals-history/${s}`);const o=r.filter(y=>y.id!==s);h(o),o.length<=d&&t>1&&l(t-1),c.fire({title:"Deleted!",text:"History has been deleted.",icon:"success",timer:1e3,showConfirmButton:!1})}catch(o){console.error("Error deleting history:",o),c.fire("Error!","Failed to delete history.","error")}})};return e.jsxs(g,{children:[e.jsx(k,{}),e.jsxs(w,{children:[e.jsx("header",{className:"sticky top-0 z-20 bg-white border-b px-4 md:px-6 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{}),e.jsx(P,{orientation:"vertical",className:"h-6 mx-3"}),e.jsx(C,{children:e.jsx(B,{children:e.jsx(_,{children:e.jsx(H,{href:"/admin/peripherals-history","aria-current":"page",className:"font-semibold text-foreground",children:"Peripherals History"})})})}),e.jsx("div",{className:"flex-1"}),e.jsx(S,{})]})}),e.jsxs("div",{className:"p-4 md:p-6 max-w-7xl mx-auto w-full",children:[e.jsx("div",{className:"sticky top-[64px] z-20 bg-white shadow-sm",children:e.jsx(A,{})}),e.jsx(b,{title:"Peripherals History"}),e.jsx("h1",{className:"text-xl md:text-2xl text-center font-bold mt-5 mb-4",children:"Peripherals Activity History"}),r.length===0?e.jsx("p",{className:"text-center mt-10",children:"No peripherals history found."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto bg-white shadow rounded-lg",children:e.jsxs("table",{className:"min-w-full table-auto text-center",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-[hsl(142,34%,85%)] text-[hsl(142,34%,25%)] hover:bg-[hsl(142,34%,80%)]",children:[e.jsx("th",{className:"px-5 py-1",children:"#"}),e.jsx("th",{className:"px-5 py-1",children:"User Name"}),e.jsx("th",{className:"px-5 py-1",children:"Peripheral Code"}),e.jsx("th",{className:"px-5 py-1",children:"Action"}),e.jsx("th",{className:"px-5 py-1",children:"Component"}),e.jsx("th",{className:"px-5 py-1",children:"Old Value"}),e.jsx("th",{className:"px-5 py-1",children:"New Value"}),e.jsx("th",{className:"px-5 py-1",children:"Room"}),e.jsx("th",{className:"px-5 py-1",children:"Unit"}),e.jsx("th",{className:"px-5 py-1",children:"Date & Time"}),e.jsx("th",{className:"px-5 py-1",children:"Manage"})]})}),e.jsx("tbody",{children:j.map((s,i)=>e.jsxs("tr",{className:"hover:shadow-sm",children:[e.jsx("td",{className:"px-5 py-2",children:(t-1)*a+i+1}),e.jsx("td",{className:"px-5 py-2",children:s.user?.name??"-"}),e.jsx("td",{className:"px-5 py-2",children:s.peripheral_code}),e.jsx("td",{className:"px-5 py-2",children:s.action}),e.jsx("td",{className:"px-5 py-2",children:s.component??"-"}),e.jsx("td",{className:"px-5 py-2",children:s.old_value??"-"}),e.jsx("td",{className:"px-5 py-2",children:s.new_value??"-"}),e.jsx("td",{className:"px-5 py-2",children:s.room?.room_number??"-"}),e.jsx("td",{className:"px-5 py-2",children:s.unit?.unit_code??"-"}),e.jsx("td",{className:"px-5 py-2",children:new Date(s.created_at).toLocaleString()}),e.jsx("td",{className:"px-5 py-2",children:e.jsx("button",{className:"px-2 py-1 text-red-600 text-sm hover:underline",onClick:()=>u(s.id),children:"Delete"})})]},s.id))})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mt-4",children:[e.jsxs("span",{className:"text-sm text-muted-foreground mb-2 md:mb-0",children:["Showing"," ",r.length===0?0:(t-1)*a+1," ","â€“"," ",Math.min(t*a,r.length)," ","of ",r.length," histories"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"px-3 py-1 border rounded text-sm disabled:opacity-50",disabled:t===1,onClick:()=>l(t-1),children:"Previous"}),Array.from({length:m},(s,i)=>i+1).map(s=>e.jsx("button",{className:`px-3 py-1 border rounded text-sm ${t===s?"bg-black text-white":"hover:bg-gray-200"}`,onClick:()=>l(s),children:s},s)),e.jsx("button",{className:"px-3 py-1 border rounded text-sm disabled:opacity-50",disabled:t===m,onClick:()=>l(t+1),children:"Next"})]})]})]})]})]})]})}export{ne as default};
