import{r as t,j as e,H as E,a as i}from"./app-T5X4gbdm.js";import{C as P,a as D,b as H,c as M}from"./card-BM8NGRmw.js";import{T as z,a as L,b,c as r,d as R,e as n}from"./table-BWLYHlmc.js";import{B as c}from"./button-CwVz5rbg.js";import{S as o}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{S as q,a as U,b as V,c as $}from"./avatar-CNvj37uw.js";import{A as F,M as Y}from"./app-sidebar-CTFt48d-.js";import{N as G}from"./Notification-DFl0wSPA.js";import{B as J,a as K,b as O,c as Q}from"./breadcrumb-BT6u38oq.js";import{I as y}from"./input-sxc2Vmvj.js";import{T as W}from"./textarea-FF0i6cBX.js";import{S as X,a as Z,b as ee,c as se,d as te}from"./select-Cy9V_RHa.js";import{P as ne}from"./pencil-DgScqn16.js";import{T as ae}from"./trash-2-CVG5kwBC.js";import"./utils-BM8YiPFb.js";import"./index-auAvGV2Y.js";import"./index-Dcrcnqsc.js";import"./index-CNN4EBnH.js";import"./index-UhUA0u0i.js";import"./dropdown-menu-B3qiSEiQ.js";import"./index-jgJuEaD2.js";import"./chevron-right-BDRT25Ka.js";import"./index-B2FPLSa0.js";import"./index-CHEJT1gJ.js";import"./sparkles-B86Dzox1.js";import"./bell-B4oiIJUQ.js";import"./keyboard-D71ua2Cs.js";import"./boxes-CwVAZTy3.js";import"./users-BDwF5WPl.js";import"./chevron-down-DMZnIDqk.js";import"./index-CQN7tMxD.js";function Me({announcements:N,rooms:C=[]}){const[S,T]=t.useState(N.data||[]),[w,A]=t.useState(N.links||[]),[d,m]=t.useState(""),[u,h]=t.useState(""),[x,p]=t.useState(""),[j,f]=t.useState(""),[l,v]=t.useState(null),B=s=>{s.preventDefault(),l?i.put(`/admin/announcements/${l}`,{title:d,message:u,room_id:x||null,scheduled_date:j||null},{onSuccess:()=>{g(),o.fire("Updated!","Announcement updated successfully.","success")}}):i.post("/admin/announcement",{title:d,message:u,room_id:x||null,scheduled_date:j||null},{onSuccess:()=>{g(),o.fire("Posted!","Announcement created successfully.","success")}})},g=()=>{m(""),h(""),p(""),f(""),v(null)},_=s=>{v(s.id),m(s.title),h(s.message),p(s.room_id?.toString()||""),f(s.scheduled_date||""),window.scrollTo({top:0,behavior:"smooth"})},I=s=>{o.fire({title:"Are you sure?",text:"This announcement will be deleted permanently.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!"}).then(a=>{a.isConfirmed&&i.delete(`/admin/announcements/${s}`,{onSuccess:()=>{o.fire("Deleted!","Announcement deleted successfully.","success")}})})},k=s=>{s&&i.get(s,{},{preserveScroll:!0,preserveState:!0,onSuccess:a=>{T(a.props.announcements.data),A(a.props.announcements.links)}})};return e.jsxs(q,{children:[e.jsx(E,{children:e.jsx("title",{children:"Announcements"})}),e.jsx(F,{}),e.jsxs(U,{children:[e.jsx("header",{className:"sticky top-0 z-20 bg-white border-b px-6 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{}),e.jsx($,{orientation:"vertical",className:"h-6 mx-3"}),e.jsx(J,{children:e.jsx(K,{children:e.jsx(O,{children:e.jsx(Q,{href:"/admin/announcement","aria-current":"page",className:"font-semibold text-foreground",children:"Announcements"})})})}),e.jsx("div",{className:"flex-1"}),e.jsx(G,{})]})}),e.jsx("main",{className:"w-full px-4 sm:px-6 py-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[" ",e.jsx("h1",{className:"text-2xl font-semibold",children:"Announcements"}),e.jsxs(P,{className:"rounded-2xl shadow-md bg-white",children:[e.jsxs(D,{className:"flex items-center gap-2 border-b pb-3",children:[e.jsx(Y,{className:"w-6 h-6 text-teal-600"}),e.jsx(H,{className:"text-xl font-semibold",children:l?"Edit Announcement":"Make a New Announcement"})]}),e.jsx(M,{className:"pt-4",children:e.jsxs("form",{onSubmit:B,className:"space-y-4",children:[e.jsx(y,{placeholder:"Enter announcement title",value:d,onChange:s=>m(s.target.value),required:!0}),e.jsx(W,{placeholder:"Enter announcement message",value:u,onChange:s=>h(s.target.value),rows:4,required:!0}),e.jsxs(X,{onValueChange:p,value:x,children:[e.jsx(Z,{children:e.jsx(ee,{placeholder:"Select a room"})}),e.jsx(se,{children:C.map(s=>e.jsx(te,{value:s.id.toString(),children:s.room_number},s.id))})]}),e.jsx(y,{type:"date",value:j,onChange:s=>f(s.target.value),required:!0}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(c,{type:"submit",className:"bg-[hsl(142,31%,51%)] hover:bg-[hsl(142,31%,45%)] text-white",children:l?"Update Announcement":"Post Announcement"}),l&&e.jsx(c,{type:"button",onClick:g,variant:"outline",children:"Cancel"})]})]})})]}),e.jsx("div",{className:"overflow-x-auto rounded-lg shadow-lg w-full",children:e.jsxs(z,{className:"min-w-[1100px] w-full bg-white",children:[" ",e.jsx(L,{children:e.jsxs(b,{className:"bg-[hsl(142,34%,85%)] text-[hsl(142,34%,25%)] hover:bg-[hsl(142,34%,80%)] h-12",children:[e.jsx(r,{className:"w-[15%]",children:"Title"}),e.jsx(r,{className:"w-[35%]",children:"Message"}),e.jsx(r,{className:"w-[15%]",children:"Room"}),e.jsx(r,{className:"w-[15%]",children:"Scheduled Date"}),e.jsx(r,{className:"w-[15%]",children:"Posted By"}),e.jsx(r,{className:"w-[15%] text-right",children:"Actions"})]})}),e.jsx(R,{children:S.length>0?S.map(s=>e.jsxs(b,{className:"h-14",children:[e.jsx(n,{className:"font-medium",children:s.title}),e.jsx(n,{className:"whitespace-pre-line",children:s.message}),e.jsx(n,{children:s.room?.room_number||"—"}),e.jsx(n,{children:s.scheduled_date||"—"}),e.jsx(n,{children:s.admin?.name||"Admin"}),e.jsxs(n,{className:"text-right flex gap-2 justify-end",children:[e.jsxs(c,{size:"sm",variant:"outline",onClick:()=>_(s),className:"flex items-center gap-1",children:[e.jsx(ne,{className:"w-4 h-4"})," Edit"]}),e.jsxs(c,{size:"sm",variant:"destructive",onClick:()=>I(s.id),className:"flex items-center gap-1",children:[e.jsx(ae,{className:"w-4 h-4"})," Delete"]})]})]},s.id)):e.jsx(b,{children:e.jsx(n,{colSpan:6,className:"text-center text-gray-500 py-6",children:"No announcements yet."})})})]})}),w.length>0&&e.jsx("div",{className:"flex justify-center gap-2 mt-4 flex-wrap",children:w.map((s,a)=>e.jsx(c,{size:"sm",variant:s.active?"default":"outline",onClick:()=>k(s.url),disabled:!s.url,dangerouslySetInnerHTML:{__html:s.label}},a))})]})})]})]})}export{Me as default};
