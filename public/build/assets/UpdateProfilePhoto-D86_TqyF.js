import{r as l,u as m,j as t,t as i}from"./app-DKV907RP.js";import{B as c}from"./button-D2JjSF3J.js";import"./index-Wjq05eL6.js";import"./utils-CBfrqCZ4.js";function v({user:a}){const[u,n]=l.useState(a?.photo?`/storage/${a.photo}`:"/default-avatar.png"),p=l.useRef(null),e=m({photo:null}),d=r=>{const o=r.target.files[0];if(!o)return;e.setData("photo",o);const s=new FileReader;s.onloadend=()=>n(s.result),s.readAsDataURL(o)},h=r=>{r.preventDefault(),e.data.photo&&e.post(route("profile.photo.update"),{forceFormData:!0,preserveScroll:!0,onSuccess:o=>{i.success("Profile photo updated successfully!"),e.reset("photo"),n(o.props.user.photo?`/storage/${o.props.user.photo}`:"/default-avatar.png")},onError:()=>i.error("Failed to update photo.")})};return t.jsxs("section",{children:[t.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Profile Photo"}),t.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Update your profile photo."}),t.jsxs("form",{onSubmit:h,className:"mt-4 flex flex-col items-center gap-4",encType:"multipart/form-data",children:[t.jsx("img",{src:u,alt:"Preview",className:"w-32 h-32 rounded-full object-cover border-2 border-green-600"}),t.jsx("input",{type:"file",accept:"image/*",ref:p,onChange:d,className:"hidden"}),t.jsx(c,{type:"button",variant:"secondary",onClick:()=>p.current.click(),children:"Choose Photo"}),e.data.photo&&t.jsx("span",{className:"text-sm text-gray-600",children:e.data.photo.name}),t.jsx(c,{type:"submit",disabled:e.processing||!e.data.photo,children:e.processing?"Saving...":"Save"})]})]})}export{v as default};
