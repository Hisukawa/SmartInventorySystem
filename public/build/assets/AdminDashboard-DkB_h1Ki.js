import{r as o,j as e,R as Ae,b as nt,H as rt,L as ot,c as E}from"./app-qNrmKOSr.js";import{S as it,a as ct,b as lt,c as dt}from"./avatar-Cu1h3HB6.js";import{N as ut}from"./Notification-D-YhkFd_.js";import{A as mt}from"./app-sidebar-BOfBFg6j.js";import{B as de}from"./button-3zDdA0wd.js";import{j as pt,u as Se,D as je,a as Ne,b as we,c as V}from"./dropdown-menu-Ci2OENni.js";import{B as ft,a as ht,b as xt,c as gt}from"./breadcrumb-CxxnZZiU.js";import{C as O,a as q,b as L,c as z,e as bt}from"./card-BNviJTTf.js";import{u as vt,C as yt,a as jt,A as Nt,b as wt}from"./react-spring_web.modern-BIZSGrqD.js";import{c as Ie,P as D,b as Ee,a as Fe,u as Ce}from"./index-n8lvkQ7A.js";import{u as _e,b as Ct}from"./index-DTutqC1U.js";import{a as Rt,c as xe}from"./utils-DS9nrQFj.js";import{B as Tt}from"./building-DT7jnHw9.js";import{M as At}from"./mouse-CP0TCcQl.js";import{M as St}from"./monitor-B4DnG2v8.js";import{U as Re}from"./users-CsVQ8BAd.js";import{C as H}from"./index-DCNh6fCt.js";import{R as W,B as Y,X,Y as J,T as Q,L as ue,a as Z,C as ee}from"./BarChart-Cttl55h9.js";import{C as te}from"./CartesianGrid-DHqUOs-I.js";import"./input-CaQdigSh.js";import"./index-BMJVjsQm.js";import"./index-Cq6KB2YE.js";import"./index-D4E8Uz4L.js";import"./bell-Bp0yfPG8.js";import"./sparkles-DmFZjV5g.js";import"./keyboard-SvFxRfdR.js";import"./boxes-dhuxWRCq.js";import"./file-text-Dczcz8XU.js";import"./chevron-down-Qs9J0FFI.js";import"./chevron-right-CM8gASu6.js";import"./index-Bp768l6A.js";import"./with-selector-o1uUGs9O.js";/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],Te=Rt("sliders-horizontal",It);function S(s,t,{checkForDefaultPrevented:n=!0}={}){return function(l){if(s?.(l),n===!1||!l.defaultPrevented)return t?.(l)}}var me="rovingFocusGroup.onEntryFocus",Et={bubbles:!1,cancelable:!0},U="RovingFocusGroup",[fe,ke,Ft]=pt(U),[_t,De]=Ie(U,[Ft]),[kt,Dt]=_t(U),Pe=o.forwardRef((s,t)=>e.jsx(fe.Provider,{scope:s.__scopeRovingFocusGroup,children:e.jsx(fe.Slot,{scope:s.__scopeRovingFocusGroup,children:e.jsx(Pt,{...s,ref:t})})}));Pe.displayName=U;var Pt=o.forwardRef((s,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:l=!1,dir:x,currentTabStopId:d,defaultCurrentTabStopId:g,onCurrentTabStopIdChange:p,onEntryFocus:m,preventScrollOnEntryFocus:i=!1,...f}=s,h=o.useRef(null),b=Ee(t,h),N=Se(x),[R,u]=Fe({prop:d,defaultProp:g??null,onChange:p,caller:U}),[j,T]=o.useState(!1),y=Ct(m),A=ke(n),P=o.useRef(!1),[w,M]=o.useState(0);return o.useEffect(()=>{const v=h.current;if(v)return v.addEventListener(me,y),()=>v.removeEventListener(me,y)},[y]),e.jsx(kt,{scope:n,orientation:r,dir:N,loop:l,currentTabStopId:R,onItemFocus:o.useCallback(v=>u(v),[u]),onItemShiftTab:o.useCallback(()=>T(!0),[]),onFocusableItemAdd:o.useCallback(()=>M(v=>v+1),[]),onFocusableItemRemove:o.useCallback(()=>M(v=>v-1),[]),children:e.jsx(D.div,{tabIndex:j||w===0?-1:0,"data-orientation":r,...f,ref:b,style:{outline:"none",...s.style},onMouseDown:S(s.onMouseDown,()=>{P.current=!0}),onFocus:S(s.onFocus,v=>{const be=!P.current;if(v.target===v.currentTarget&&be&&!j){const B=new CustomEvent(me,Et);if(v.currentTarget.dispatchEvent(B),!B.defaultPrevented){const F=A().filter(C=>C.focusable),G=F.find(C=>C.active),K=F.find(C=>C.id===R),ie=[G,K,...F].filter(Boolean).map(C=>C.ref.current);qe(ie,i)}}P.current=!1}),onBlur:S(s.onBlur,()=>T(!1))})})}),Me="RovingFocusGroupItem",Oe=o.forwardRef((s,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:l=!1,tabStopId:x,children:d,...g}=s,p=_e(),m=x||p,i=Dt(Me,n),f=i.currentTabStopId===m,h=ke(n),{onFocusableItemAdd:b,onFocusableItemRemove:N,currentTabStopId:R}=i;return o.useEffect(()=>{if(r)return b(),()=>N()},[r,b,N]),e.jsx(fe.ItemSlot,{scope:n,id:m,focusable:r,active:l,children:e.jsx(D.span,{tabIndex:f?0:-1,"data-orientation":i.orientation,...g,ref:t,onMouseDown:S(s.onMouseDown,u=>{r?i.onItemFocus(m):u.preventDefault()}),onFocus:S(s.onFocus,()=>i.onItemFocus(m)),onKeyDown:S(s.onKeyDown,u=>{if(u.key==="Tab"&&u.shiftKey){i.onItemShiftTab();return}if(u.target!==u.currentTarget)return;const j=qt(u,i.orientation,i.dir);if(j!==void 0){if(u.metaKey||u.ctrlKey||u.altKey||u.shiftKey)return;u.preventDefault();let y=h().filter(A=>A.focusable).map(A=>A.ref.current);if(j==="last")y.reverse();else if(j==="prev"||j==="next"){j==="prev"&&y.reverse();const A=y.indexOf(u.currentTarget);y=i.loop?Lt(y,A+1):y.slice(A+1)}setTimeout(()=>qe(y))}}),children:typeof d=="function"?d({isCurrentTabStop:f,hasTabStop:R!=null}):d})})});Oe.displayName=Me;var Mt={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Ot(s,t){return t!=="rtl"?s:s==="ArrowLeft"?"ArrowRight":s==="ArrowRight"?"ArrowLeft":s}function qt(s,t,n){const r=Ot(s.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Mt[r]}function qe(s,t=!1){const n=document.activeElement;for(const r of s)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function Lt(s,t){return s.map((n,r)=>s[(t+r)%s.length])}var Ut=Pe,Bt=Oe;function Gt(s,t){return o.useReducer((n,r)=>t[n][r]??n,s)}var Le=s=>{const{present:t,children:n}=s,r=Kt(t),l=typeof n=="function"?n({present:r.isPresent}):o.Children.only(n),x=Ee(r.ref,$t(l));return typeof n=="function"||r.isPresent?o.cloneElement(l,{ref:x}):null};Le.displayName="Presence";function Kt(s){const[t,n]=o.useState(),r=o.useRef(null),l=o.useRef(s),x=o.useRef("none"),d=s?"mounted":"unmounted",[g,p]=Gt(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return o.useEffect(()=>{const m=se(r.current);x.current=g==="mounted"?m:"none"},[g]),Ce(()=>{const m=r.current,i=l.current;if(i!==s){const h=x.current,b=se(m);s?p("MOUNT"):b==="none"||m?.display==="none"?p("UNMOUNT"):p(i&&h!==b?"ANIMATION_OUT":"UNMOUNT"),l.current=s}},[s,p]),Ce(()=>{if(t){let m;const i=t.ownerDocument.defaultView??window,f=b=>{const R=se(r.current).includes(CSS.escape(b.animationName));if(b.target===t&&R&&(p("ANIMATION_END"),!l.current)){const u=t.style.animationFillMode;t.style.animationFillMode="forwards",m=i.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=u)})}},h=b=>{b.target===t&&(x.current=se(r.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{i.clearTimeout(m),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else p("ANIMATION_END")},[t,p]),{isPresent:["mounted","unmountSuspended"].includes(g),ref:o.useCallback(m=>{r.current=m?getComputedStyle(m):null,n(m)},[])}}function se(s){return s?.animationName||"none"}function $t(s){let t=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?s.ref:(t=Object.getOwnPropertyDescriptor(s,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?s.props.ref:s.props.ref||s.ref)}var re="Tabs",[Vt,Es]=Ie(re,[De]),Ue=De(),[zt,ge]=Vt(re),Be=o.forwardRef((s,t)=>{const{__scopeTabs:n,value:r,onValueChange:l,defaultValue:x,orientation:d="horizontal",dir:g,activationMode:p="automatic",...m}=s,i=Se(g),[f,h]=Fe({prop:r,onChange:l,defaultProp:x??"",caller:re});return e.jsx(zt,{scope:n,baseId:_e(),value:f,onValueChange:h,orientation:d,dir:i,activationMode:p,children:e.jsx(D.div,{dir:i,"data-orientation":d,...m,ref:t})})});Be.displayName=re;var Ge="TabsList",Ke=o.forwardRef((s,t)=>{const{__scopeTabs:n,loop:r=!0,...l}=s,x=ge(Ge,n),d=Ue(n);return e.jsx(Ut,{asChild:!0,...d,orientation:x.orientation,dir:x.dir,loop:r,children:e.jsx(D.div,{role:"tablist","aria-orientation":x.orientation,...l,ref:t})})});Ke.displayName=Ge;var $e="TabsTrigger",Ve=o.forwardRef((s,t)=>{const{__scopeTabs:n,value:r,disabled:l=!1,...x}=s,d=ge($e,n),g=Ue(n),p=We(d.baseId,r),m=Ye(d.baseId,r),i=r===d.value;return e.jsx(Bt,{asChild:!0,...g,focusable:!l,active:i,children:e.jsx(D.button,{type:"button",role:"tab","aria-selected":i,"aria-controls":m,"data-state":i?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:p,...x,ref:t,onMouseDown:S(s.onMouseDown,f=>{!l&&f.button===0&&f.ctrlKey===!1?d.onValueChange(r):f.preventDefault()}),onKeyDown:S(s.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&d.onValueChange(r)}),onFocus:S(s.onFocus,()=>{const f=d.activationMode!=="manual";!i&&!l&&f&&d.onValueChange(r)})})})});Ve.displayName=$e;var ze="TabsContent",He=o.forwardRef((s,t)=>{const{__scopeTabs:n,value:r,forceMount:l,children:x,...d}=s,g=ge(ze,n),p=We(g.baseId,r),m=Ye(g.baseId,r),i=r===g.value,f=o.useRef(i);return o.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),e.jsx(Le,{present:l||i,children:({present:h})=>e.jsx(D.div,{"data-state":i?"active":"inactive","data-orientation":g.orientation,role:"tabpanel","aria-labelledby":p,hidden:!h,id:m,tabIndex:0,...d,ref:t,style:{...s.style,animationDuration:f.current?"0s":void 0},children:h&&x})})});He.displayName=ze;function We(s,t){return`${s}-trigger-${t}`}function Ye(s,t){return`${s}-content-${t}`}var Ht=Be,Xe=Ke,Je=Ve,Qe=He;const Wt=Ht,Ze=o.forwardRef(({className:s,...t},n)=>e.jsx(Xe,{ref:n,className:xe("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",s),...t}));Ze.displayName=Xe.displayName;const ae=o.forwardRef(({className:s,...t},n)=>e.jsx(Je,{ref:n,className:xe("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",s),...t}));ae.displayName=Je.displayName;const ne=o.forwardRef(({className:s,...t},n)=>e.jsx(Qe,{ref:n,className:xe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t}));ne.displayName=Qe.displayName;function he(){return he=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(s[r]=n[r])}return s},he.apply(this,arguments)}var pe=function(t){return function(){return t}},Yt=function(t){var n=t.render,r=n===void 0?pe(null):n,l=t.style,x=l===void 0?pe({}):l,d=t.ratio,g=t.posX,p=t.posY,m=t.square,i=m===void 0?!1:m,f=t.height,h=f===void 0?"2rem":f,b=t.value,N=t.onClick;return Ae.createElement("div",{onClick:function(){return(N||pe({}))(g,p)},style:he({border:"1px solid #fff",borderWidth:"1px 1px 0 0",textAlign:"center",color:"rgb(0, 0, 0, "+(d/2+.4)+")",overflow:"hidden",boxSizing:"border-box",flexGrow:i?0:1,flexBasis:i?h:0,flexShrink:0,height:h,lineHeight:h,borderRadius:"4px",fontSize:".8rem",cursor:N?"pointer":"initial",background:"rgb(12, 160, 44, "+(d+.05)+")"},x(g,p,d))},r(g,p,b))};Ae.memo(Yt);function Fs(){const{auth:s}=nt().props,t=s.user,[n,r]=o.useState({totalRooms:0,totalSystemUnits:0,totalPeripherals:0,totalEquipments:0,occupiedRooms:0,pendingRequests:0,forRepair:0,activeUsers:0,totalUsers:0}),[l,x]=o.useState([]),[d,g]=o.useState([]),[p,m]=o.useState({system_units:{},peripherals:{},peripherals_type:{},equipments:{}}),[i,f]=o.useState({system_units:{},peripherals:{},peripherals_type:{},equipments:{}}),[h,b]=o.useState([]),[N,R]=o.useState([]),[u,j]=o.useState(""),[T,y]=o.useState(""),[A,P]=o.useState([]),[w,M]=o.useState(""),[v,be]=o.useState("");o.useEffect(()=>{(async()=>{try{const c=await E.get("/admin/rooms-list");b(Array.isArray(c.data)?c.data:[]);const I=await E.get("/admin/peripheral-types");R(Array.isArray(I.data)?I.data:[]);const ye=await E.get("/admin/equipment-types");P(Array.isArray(ye.data)?ye.data:[])}catch(c){console.error("Error fetching filters:",c)}})()},[]);const B=async()=>{try{const a=await E.get("/admin/equipment-condition-filtered",{params:{room_id:u,type:T}});console.log("Rooms:",h),m(a.data)}catch(a){console.error(a)}},F=a=>p[a]?Object.entries(p[a]).map(([c,I])=>({name:c,value:I})):[],G=F("system_units"),K=F("peripherals"),oe=F("equipments"),ie=async()=>{try{const a=await E.get("/admin/equipment-condition",{params:{room_id:w||void 0}});f(a.data)}catch(a){console.error(a)}},C=async()=>{try{const a=await E.get("/admin/dashboard-stats");r(a.data);const c=await E.get("/admin/rooms-status");g(c.data);const I=await E.get("/admin/activity-logs");x(I.data),await B(),await ie()}catch(a){console.error(a)}};o.useEffect(()=>{C();const a=setInterval(C,5e3);return()=>clearInterval(a)},[u,T,w]);const _=a=>vt({val:a,from:{val:0}}),et=a=>e.jsx(wt.p,{className:"text-lg font-bold text-black",children:a.val.to(c=>Math.floor(c))}),tt=[{title:"Total Rooms",value:_(n.totalRooms),icon:Tt,link:"/admin/rooms"},{title:"Computers",value:_(u||T?Object.values(p.system_units).reduce((a,c)=>a+c,0):n.totalSystemUnits),icon:yt,link:"/admin/system-units"},{title:"Peripherals",value:_(u||T?Object.values(p.peripherals).reduce((a,c)=>a+c,0):n.totalPeripherals),icon:At,link:"/admin/peripherals"},{title:"Room Equipments",value:_(u||T?Object.values(p.equipments).reduce((a,c)=>a+c,0):n.totalEquipments),icon:St,link:"/admin/equipments"},{title:"Pending Requests",value:_(n.pendingRequests),icon:jt,link:"/admin/maintenance-requests"},{title:"Total Users",value:_(n.totalUsers),icon:Re,link:"/admin/users"}];i.system_units&&Object.values(i.system_units).reduce((a,c)=>a+c,0),i.peripherals&&Object.values(i.peripherals).reduce((a,c)=>a+c,0),i.equipments&&Object.values(i.equipments).reduce((a,c)=>a+c,0);const ce=a=>Object.values(a||{}).reduce((c,I)=>c+I,0),ve=[{name:"PCs",value:ce(i.system_units)},{name:"Peripherals",value:ce(i.peripherals)},{name:"Equipment",value:ce(i.equipments)}],k=["#16a34a","#facc15","#dc2626","#3b82f6","#9333ea"],[le,st]=o.useState(!1),[Xt,Jt]=o.useState("type"),$=d.details?d.details.filter(a=>a.is_active):[],at=le?$:$.slice(0,2);return e.jsxs(it,{children:[e.jsx(rt,{children:e.jsx("title",{children:"Admin Dashboard"})}),e.jsx(mt,{}),e.jsxs(ct,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 border-b bg-white",children:[e.jsx(lt,{}),e.jsx(dt,{orientation:"vertical",className:"h-6 mx-3"}),e.jsx(ft,{children:e.jsx(ht,{children:e.jsx(xt,{children:e.jsx(gt,{href:"#","aria-current":"page",children:"Dashboard"})})})}),e.jsx("div",{className:"flex-1"}),e.jsx(ut,{})]}),e.jsxs("main",{className:"w-full px-6 py-6 space-y-6",children:[e.jsxs("div",{className:"relative rounded-2xl bg-gradient-to-r from-[#A8D5BA] via-[#7FCF9E] to-[#59AC77] p-6 text-white shadow-lg",children:[e.jsxs("h1",{className:"text-3xl font-bold",children:["Welcome back, ",t.name.split(" ")[0],"."]}),e.jsx("p",{className:"text-sm opacity-90 mt-1",children:"Hereâ€™s a summary of your ICT inventory system."})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4 mb-6",children:tt.map((a,c)=>e.jsx(ot,{href:a.link,className:"block",children:e.jsxs(O,{className:"rounded-xl shadow-sm bg-white hover:shadow-md transition-all duration-300 cursor-pointer p-3",children:[e.jsx(q,{className:"flex flex-row items-center justify-between space-y-0 pb-1",children:e.jsxs(L,{className:"text-xs font-medium flex items-center gap-1 text-gray-500",children:[e.jsx(a.icon,{className:"h-4 w-4 text-[hsl(142,34%,51%)]"}),a.title]})}),e.jsx(z,{children:et(a.value)})]})},c))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(O,{className:"col-span-2",children:[e.jsx(q,{children:e.jsx(L,{children:"Condition of PCs, Peripherals, Equipment Across Room"})}),e.jsxs(z,{children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsxs(je,{children:[e.jsx(Ne,{asChild:!0,children:e.jsxs(de,{variant:"outline",className:"flex items-center gap-2 text-gray-700 font-medium",children:[u?h.find(a=>a.id===u)?.name:"All Rooms",e.jsx(Te,{className:"h-4 w-4 opacity-70"})]})}),e.jsxs(we,{align:"end",className:"max-h-60 overflow-y-auto bg-white shadow-lg border rounded-lg",children:[e.jsxs(V,{className:`cursor-pointer ${u===""?"bg-green-100 text-green-700 font-semibold":"hover:bg-gray-100"}`,onClick:()=>j(""),children:["All Rooms",u===""&&e.jsx(H,{className:"ml-auto h-4 w-4 text-green-600"})]}),h.map(a=>e.jsxs(V,{className:`cursor-pointer ${u===a.id?"bg-green-100 text-green-700 font-semibold":"hover:bg-gray-100"}`,onClick:()=>j(a.id),children:[a.room_number,u===a.id&&e.jsx(H,{className:"ml-auto h-4 w-4 text-green-600"})]},a.id))]})]})}),e.jsxs(Wt,{defaultValue:"system_units",className:"w-full",children:[e.jsxs(Ze,{children:[e.jsx(ae,{value:"system_units",children:"PCs"}),e.jsx(ae,{value:"peripherals",children:"Peripherals"}),e.jsx(ae,{value:"equipments",children:"Equipment"})]}),e.jsx(ne,{value:"system_units",children:e.jsx(W,{width:"100%",height:300,children:e.jsxs(Y,{data:G,children:[e.jsx(te,{strokeDasharray:"3 3"}),e.jsx(X,{dataKey:"name"}),e.jsx(J,{}),e.jsx(Q,{}),e.jsx(ue,{}),e.jsx(Z,{dataKey:"value",fill:"#3b82f6",children:G.map((a,c)=>e.jsx(ee,{fill:k[c%k.length]},`su-${c}`))})]})})}),e.jsx(ne,{value:"peripherals",children:e.jsx(W,{width:"100%",height:300,children:e.jsxs(Y,{data:K,children:[e.jsx(te,{strokeDasharray:"3 3"}),e.jsx(X,{dataKey:"name"}),e.jsx(J,{}),e.jsx(Q,{}),e.jsx(ue,{}),e.jsx(Z,{dataKey:"value",fill:"#16a34a",children:K.map((a,c)=>e.jsx(ee,{fill:k[c%k.length]},`per-${c}`))})]})})}),e.jsx(ne,{value:"equipments",children:e.jsx(W,{width:"100%",height:300,children:e.jsxs(Y,{data:oe,children:[e.jsx(te,{strokeDasharray:"3 3"}),e.jsx(X,{dataKey:"name"}),e.jsx(J,{}),e.jsx(Q,{}),e.jsx(ue,{}),e.jsx(Z,{dataKey:"value",fill:"#f59e0b",children:oe.map((a,c)=>e.jsx(ee,{fill:k[c%k.length]},`eq-${c}`))})]})})})]})]})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(O,{className:"col-span-2",children:[e.jsx(q,{children:e.jsx(L,{children:"Total PCs, Peripherals, and Equipment Across All Rooms"})}),e.jsxs(z,{children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsxs(je,{children:[e.jsx(Ne,{asChild:!0,children:e.jsxs(de,{variant:"outline",className:"flex items-center gap-2 text-gray-700 font-medium",children:[w?h.find(a=>a.id===w)?.name:"All Rooms",e.jsx(Te,{className:"h-4 w-4 opacity-70"})]})}),e.jsxs(we,{align:"end",className:"max-h-60 overflow-y-auto bg-white shadow-lg border rounded-lg",children:[e.jsxs(V,{className:`cursor-pointer text-black dark:text-white ${w===""?"bg-green-100 dark:bg-green-800 text-green-700 dark:text-green-300 font-semibold":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,onClick:()=>M(""),children:["All Rooms",w===""&&e.jsx(H,{className:"ml-auto h-4 w-4 text-green-600 dark:text-green-400"})]}),h.map(a=>e.jsxs(V,{className:`cursor-pointer text-gray-800 ${w===a.id?"bg-green-100 text-green-700 font-semibold":"hover:bg-gray-100"}`,onClick:()=>M(a.id),children:[a.room_number,w===a.id&&e.jsx(H,{className:"ml-auto h-4 w-4 text-green-600"})]},a.id))]})]})}),e.jsx(W,{width:"100%",height:340,children:e.jsxs(Y,{data:ve,layout:"vertical",barCategoryGap:"30%",margin:{top:20,right:30,left:80,bottom:20},children:[e.jsx(te,{strokeDasharray:"3 3"}),e.jsx(X,{type:"number"}),e.jsx(J,{dataKey:"name",type:"category",width:100}),e.jsx(Q,{}),e.jsx(Z,{dataKey:"value",barSize:50,radius:[0,0,0,0],children:ve.map((a,c)=>e.jsx(ee,{fill:["#3b82f6","#16a34a","#f59e0b","#ef4444","#8b5cf6"][c%5]},`cell-${c}`))})]})})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(O,{className:"rounded-2xl shadow-md bg-white h-full",children:[e.jsx(q,{children:e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(Nt,{className:"w-5 h-5 text-green-600"}),"Recent Activity"]})}),e.jsx(z,{children:e.jsx("ul",{className:"space-y-3 max-h-72 overflow-y-auto",children:Array.isArray(l)&&l.length>0?l.map((a,c)=>e.jsxs("li",{className:"text-sm border-b pb-2",children:[e.jsx("span",{className:"font-semibold",children:a.user?.name??"Unknown"})," ",a.action,e.jsx("span",{className:"block text-xs text-gray-500",children:a.timestamp})]},c)):e.jsx("li",{className:"text-gray-500",children:"No activity logs found"})})})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(O,{className:"rounded-2xl shadow-md bg-white h-full",children:[e.jsx(q,{children:e.jsxs(L,{className:"flex items-center gap-2 text-[#2F4F2F]",children:[e.jsx(Re,{className:"w-5 h-5 text-[#59AC77]"}),"Active Room Occupancy"]})}),e.jsx("div",{className:"space-y-6 p-4",children:$.length===0?e.jsx("p",{className:"text-[#3B5C47] text-sm text-center",children:"No active rooms right now"}):at.map(a=>e.jsxs("div",{className:"flex items-center gap-6 border-b pb-6 last:border-b-0",children:[e.jsx("img",{src:a.faculty_photo||"/default-avatar.png",alt:"Faculty",className:"w-16 h-16 rounded-full object-cover border-4 border-[#59AC77]"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-base font-semibold text-[#2F4F2F]",children:["Room"," ",a.room_number]}),e.jsxs("p",{className:"text-sm text-[#3B5C47]",children:["Scanned by"," ",e.jsx("span",{className:"font-medium text-[#2F4F2F]",children:a.last_scanned_by??"Unknown"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:a.last_scanned_at?new Date(a.last_scanned_at).toLocaleString():"No scan time"})]})]},a.id))}),$.length>2&&e.jsx(bt,{className:"flex justify-center",children:e.jsx(de,{variant:"outline",size:"sm",onClick:()=>st(!le),children:le?"Show Less":"View All Active Rooms"})})]})})]})]})]})]})}export{Fs as default};
