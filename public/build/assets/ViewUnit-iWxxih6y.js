import{r as i,j as e,H as _}from"./app-BspBoVLj.js";import{A as k}from"./app-sidebar-pEzaVf9W.js";import{S as U,a as y,b as B,c as L}from"./avatar-Cn7juoxD.js";import{B as x}from"./button-nEGy-Tvv.js";import{Q as h}from"./index-CJWRtZdk.js";import{B as Q,a as D,b as z,c as d,d as p}from"./breadcrumb-lu-ZXrGu.js";import{D as O,a as $,b as I,c as M}from"./dialog-Iibrga26.js";import"./dropdown-menu-Btp35w_w.js";import"./utils-CGZYKiJE.js";import"./index-7t4Kha0i.js";import"./index-DazmWLnE.js";import"./index-4mYg_PsO.js";import"./index-CmBAzxYO.js";import"./chevron-right-C3CnR4PJ.js";import"./sparkles-DQjGELTC.js";import"./keyboard-J1wJJM9o.js";import"./user-Bbsq8BUw.js";import"./file-text-B2UJJIGo.js";import"./users-Dba9jg26.js";import"./chevron-down-fO4XE9Ea.js";import"./input-Dhk1TQv0.js";import"./index-Dw8YL-uq.js";import"./index-HEjLux-k.js";import"./index-DlEJG45v.js";function me({unit:s}){const[t,j]=i.useState(null),[u,g]=i.useState(null),[b,l]=i.useState(!1),[f,a]=i.useState(!1),v=(r,n)=>{r&&(j(r),g(n),l(!0),a(!1))},w=async()=>{if(t)try{await navigator.clipboard.writeText(t),a(!0),setTimeout(()=>a(!1),2e3)}catch(r){console.error("Failed to copy: ",r)}},S=()=>{if(!t)return;const r=document.createElement("canvas"),n=document.querySelector("#modal-qr svg"),R=new XMLSerializer().serializeToString(n),o=new Image,N=new Blob([R],{type:"image/svg+xml;charset=utf-8"}),m=URL.createObjectURL(N);o.onload=()=>{r.width=o.width,r.height=o.height,r.getContext("2d").drawImage(o,0,0),URL.revokeObjectURL(m),`${s.room_number}`,`${s.unit_code.replace(/^unit[-_]?/i,"").replace(/^0+/,"0")}`;const C=`ROOM-${s.room?.room_number}_${s.unit_code}.png`,c=document.createElement("a");c.download=C,c.href=r.toDataURL("image/png"),c.click()},o.src=m};return e.jsxs(U,{children:[e.jsx(k,{}),e.jsxs(y,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 border-b bg-white",children:[e.jsx(B,{}),e.jsx(L,{orientation:"vertical",className:"h-6 mx-3"}),e.jsx(Q,{children:e.jsx(D,{children:e.jsxs(z,{children:[e.jsx(d,{href:"#","aria-current":"page",children:"Assets"}),e.jsx(p,{}),e.jsx(d,{href:"/units",children:"System Unit Lists"}),e.jsx(p,{}),e.jsx(d,{href:`/system-units/view/${s.unit_code}`,"aria-current":"page",className:"font-semibold text-foreground",children:"View Unit"})]})})})]}),e.jsx(_,{title:`View ${s.unit_code}`}),e.jsxs("main",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"System Unit Information"}),e.jsxs("div",{className:"bg-white shadow rounded p-6 max-w-3xl mx-auto grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Unit Code:"})," ",s.unit_code]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Processor:"})," ",s.processor]}),e.jsxs("div",{children:[e.jsx("strong",{children:"RAM:"})," ",s.ram]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Storage:"})," ",s.storage]}),e.jsxs("div",{children:[e.jsx("strong",{children:"GPU:"})," ",s.gpu]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Motherboard:"})," ",s.motherboard]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Condition:"})," ",s.condition]}),e.jsxs("div",{className:"col-span-2 flex flex-col items-center mt-4",children:[e.jsx("div",{className:"bg-white p-2 rounded cursor-pointer hover:shadow-md transition",onClick:()=>{v(route("units.public.show",{unit_path:s.unit_path}),s.room?.room_number||"room")},children:e.jsx(h,{value:route("units.public.show",{unit_path:s.unit_path}),size:128})}),e.jsx("span",{className:"mt-2 text-sm text-muted-foreground",children:"Scan to view public info"})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx(x,{variant:"secondary",onClick:()=>window.history.back(),children:"Go Back"})})]}),e.jsx(O,{open:b,onOpenChange:l,children:e.jsxs($,{className:"flex flex-col items-center",children:[e.jsx(I,{children:e.jsxs(M,{children:["QR Code for ",u," -"," ",s.unit_code]})}),t&&e.jsx("div",{id:"modal-qr",className:"cursor-pointer",onClick:w,children:e.jsx(h,{value:t,size:256})}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Click QR to copy link"}),f&&e.jsx("span",{className:"text-green-600 text-sm",children:"QR code path copied!"}),e.jsx("div",{className:"mt-1 flex gap-2",children:e.jsx(x,{onClick:S,children:"Download"})})]})})]})]})}export{me as default};
