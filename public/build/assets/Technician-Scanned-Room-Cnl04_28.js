import{j as e,b as W,r as o,H as Z,L as f,a as C}from"./app-BY269CKa.js";import{B as c}from"./button-DmVd0Qoa.js";import{T as ee,a as se,b as E,c as y,d as te,e as b}from"./table-BSAyF4oJ.js";import{I as ae}from"./input-0jd-5Ynj.js";import{P as le,a as ie,b as ne}from"./popover-6-arrV0q.js";import{S,a as _,b as T,c as P,d as p}from"./select-CBNJzA5P.js";import{S as z}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{T as O}from"./techician-scanned-sidebar-DzaZUQ48.js";import{D as re,a as oe,b as ce,c as de}from"./dialog-dHoRb1Hk.js";import{C as he}from"./circle-check-DtwIoMY1.js";import{M as me}from"./package-C5XTlV8M.js";import{c as xe}from"./createLucideIcon-Bm2NC8Ie.js";import{E as R}from"./eye-o_VyLnNC.js";import{P as ue}from"./pencil-B9_ypJ8a.js";import{T as pe}from"./trash-2-CijHIG5A.js";import{F as ge}from"./funnel-B_m2YC0d.js";import{X as $}from"./index-DWviX9Ov.js";import"./index-D1LSely-.js";import"./utils-CBfrqCZ4.js";import"./index-Bysdviys.js";import"./index-DeU_LsM4.js";import"./index-xMNSz_ZY.js";import"./dropdown-menu-Dv22JrHb.js";import"./index-CCIsUyn9.js";import"./chevron-right-CgrfU1TF.js";import"./index-D8XDtFrM.js";import"./index-Cw_T0ylj.js";import"./chevron-down-DABFwW10.js";import"./monitor-3ga-OEzA.js";import"./mouse-CAWxQauR.js";/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],V=xe("plus",je);function fe({open:s,onClose:n}){return e.jsx(re,{open:s,onOpenChange:n,children:e.jsxs(oe,{className:"max-w-sm w-[90%] p-6 rounded-2xl shadow-xl text-center",children:[e.jsx("button",{onClick:n,className:"absolute right-4 top-4 text-gray-400 hover:text-gray-600"}),e.jsx("div",{className:"flex justify-center mb-3",children:e.jsx(he,{className:"w-16 h-16 text-green-500"})}),e.jsx(ce,{children:e.jsx(de,{className:"text-lg font-semibold text-center",children:"Reported successfully"})})]})})}function be({page:s,pageCount:n,onPageChange:l}){return e.jsxs("div",{className:"flex justify-end items-center gap-2",children:[e.jsx(c,{size:"sm",disabled:s===1,onClick:()=>l(s-1),className:`flex items-center gap-1
          bg-[hsl(142,34%,51%)] text-white
          hover:bg-[hsl(142,34%,45%)]
          disabled:bg-gray-200 disabled:text-gray-400 disabled:cursor-not-allowed`,children:"Previous"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",s," of ",n]}),e.jsx(c,{size:"sm",disabled:s===n,onClick:()=>l(s+1),className:`flex items-center gap-1
          bg-[hsl(142,34%,51%)] text-white
          hover:bg-[hsl(142,34%,45%)]
          disabled:bg-gray-200 disabled:text-gray-400 disabled:cursor-not-allowed`,children:"Next"})]})}function we({filters:s,filterOptions:n,activeSection:l,onApplyFilters:u}){const[h,r]=o.useState(""),[w,d]=o.useState("");o.useEffect(()=>{s.condition?(r("condition"),d(s.condition)):s.unit_code&&(l==="system-units"||l==="peripherals")?(r("unit_code"),d(s.unit_code)):s.type&&(l==="peripherals"||l==="equipments")&&(r("type"),d(s.type))},[s,l]);const t=a=>{const m=a==="all"?"":a;d(m),h==="condition"?u(m,s.unit_code,s.search):h==="unit_code"?u(s.condition,m,s.search):h==="type"&&u(s.condition,s.unit_code,m,s.search)},k=()=>{r(""),d(""),u("","",s.search||"","")},q=()=>{const a=[{value:"condition",label:"Condition"}];return(l==="system-units"||l==="peripherals")&&a.push({value:"unit_code",label:"Unit Code"}),(l==="peripherals"||l==="equipments")&&a.push({value:"type",label:"Type"}),a};return e.jsxs(le,{children:[e.jsx(ie,{asChild:!0,children:e.jsxs(c,{className:"flex items-center gap-2 bg-[hsl(142,34%,51%)] text-white border-none hover:bg-[hsl(142,34%,45%)]",children:[e.jsx(ge,{className:"h-4 w-4"}),"Filter",(s.condition||(l==="system-units"||l==="peripherals")&&s.unit_code)&&e.jsx($,{className:"h-4 w-4 ml-1 cursor-pointer",onClick:a=>{a.stopPropagation(),k()}})]})}),e.jsxs(ne,{className:"w-[calc(100vw-2rem)] sm:w-[400px] p-4",align:"start",sideOffset:10,children:[e.jsx("h4",{className:"font-medium mb-3 text-lg",children:"Filter Options"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs(S,{value:h,onValueChange:a=>{r(a),d("")},children:[e.jsx(_,{className:"w-full",children:e.jsx(T,{placeholder:"Select Field"})}),e.jsx(P,{children:q().map(a=>e.jsx(p,{value:a.value,children:a.label},a.value))})]}),h==="condition"&&e.jsxs(S,{value:w||"all",onValueChange:t,children:[e.jsx(_,{className:"w-full",children:e.jsx(T,{placeholder:"Select Condition"})}),e.jsxs(P,{children:[e.jsx(p,{value:"all",children:"All"}),n.conditions.map(a=>e.jsx(p,{value:a,children:a},a))]})]}),h==="unit_code"&&(l==="system-units"||l==="peripherals")&&e.jsxs(S,{value:w||"all",onValueChange:t,children:[e.jsx(_,{className:"w-full",children:e.jsx(T,{placeholder:"Select Unit"})}),e.jsxs(P,{children:[e.jsx(p,{value:"all",children:"All"}),n.unit_codes.map(a=>e.jsx(p,{value:a,children:a},a))]})]}),h==="type"&&(l==="equipments"||l==="peripherals")&&e.jsxs(S,{value:w||"all",onValueChange:a=>{const m=a==="all"?"":a;d(m),u(s.condition,s.unit_code,s.search,m)},children:[e.jsx(_,{className:"w-full",children:e.jsx(T,{placeholder:"Select Type"})}),e.jsxs(P,{children:[e.jsx(p,{value:"all",children:"All"}),n.types?.map(a=>e.jsx(p,{value:a,children:a},a))]})]}),(s.condition||(l==="system-units"||l==="peripherals")&&s.unit_code||(l==="equipments"||l==="peripherals")&&s.type)&&e.jsx("div",{className:"flex justify-end",children:e.jsxs(c,{size:"sm",variant:"outline",onClick:k,className:"flex items-center gap-1 text-red-600 hover:bg-red-50 w-auto",children:[e.jsx($,{className:"h-4 w-4"}),"Reset"]})})]})]})]})}function as({room:s,equipments:n,systemUnits:l,peripherals:u,section:h,filters:r={},filterOptions:w={conditions:[],unit_codes:[],types:[]}}){const{auth:d}=W().props,[t,k]=o.useState(h||"dashboard"),[q,a]=o.useState(!1),[m,Ne]=o.useState(!1),[X,Y]=o.useState(!1),[ve,Ce]=o.useState(null),[M,G]=o.useState(r?.condition||""),[D,J]=o.useState(r?.unit_code||""),[B,F]=o.useState(r?.search||""),[N,I]=o.useState(1),v=10,[Se,_e]=o.useState(r?.type||""),A=t==="system-units"?l:t==="peripherals"?u:t==="equipments"?n:[];o.useEffect(()=>{t==="dashboard"&&(window.location.href=route("technician.ScannedRoom.dashboard",{roomPath:s.room_path}))},[t]);const H=Math.ceil(A.length/v),U=A.slice((N-1)*v,N*v);o.useEffect(()=>{I(1),G(r.condition||""),J(r.unit_code||""),F(r.search||"")},[t,r]);const L=(i=M,x=D,g=B,j=r?.type||"")=>{window.location.href=route("technician.room.show",{roomPath:s.room_path,section:t,condition:i||void 0,unit_code:(t==="system-units"||t==="peripherals")&&x||void 0,search:g||void 0,type:j||void 0})},K=i=>{z.fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"hsl(0, 78%, 62%)",cancelButtonColor:"gray",confirmButtonText:"Yes, delete it!"}).then(x=>{if(x.isConfirmed){let g="",j={};t==="system-units"?(g="technician.units.delete",j={id:i.id}):t==="peripherals"?(g="technician.peripherals.delete",j={id:i.id}):t==="equipments"&&(g="technician.equipments.delete",j={id:i.id}),C.delete(route(g,j),{onSuccess:()=>{z.fire("Deleted!",`${t.replace("-"," ").replace(/\b\w/g,Q=>Q.toUpperCase())} has been deleted.`,"success")},onError:()=>{z.fire("Error!","There was a problem deleting this item.","error")}})}})};return e.jsxs(e.Fragment,{children:[e.jsx(Z,{title:`Room - ${s.room_name}`}),e.jsxs("div",{className:"flex h-screen overflow-hidden",children:[e.jsx("div",{className:"hidden md:flex",children:e.jsx(O,{room:s,active:t,user:d.user,onSelect:i=>{window.location.href=route("technician.room.show",{roomPath:s.room_path,section:i})}})}),q&&e.jsxs("div",{className:"fixed inset-0 z-40 flex md:hidden",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50",onClick:()=>a(!1)}),e.jsx("div",{className:"relative z-50 w-64 shadow-lg",style:{backgroundColor:"hsl(142,34%,51%)"},children:e.jsx(O,{room:s,active:t,user:d.user,onSelect:i=>{window.location.href=route("technician.room.show",{roomPath:s.room_path,section:i}),a(!1)}})})]}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-y-auto bg-gray-50",children:[" ",e.jsxs("div",{className:"p-4 border-b md:hidden flex items-center justify-between shadow-sm",style:{backgroundColor:"hsl(142,34%,51%)"},children:[e.jsx(c,{variant:"outline",size:"icon",onClick:()=>a(!0),className:"bg-[hsl(142,34%,51%)] text-white border-none hover:bg-[hsl(142,34%,45%)]",children:e.jsx(me,{className:"h-5 w-5"})}),e.jsx("h2",{className:"text-xl font-semibold text-white",children:s.room_name})]}),e.jsxs("div",{className:"p-5 max-w-full md:max-w-5xl lg:max-w-7xl mx-auto w-full",children:[" ",e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:t==="system-units"?"System Units":t==="peripherals"?"Peripherals":"Equipments"})}),e.jsxs("div",{className:"rounded-lg border overflow-hidden shadow-sm bg-white",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:justify-between sm:items-center p-4 border-b",children:[e.jsxs("div",{className:"flex gap-2 items-center w-full sm:w-auto",children:[e.jsx(we,{filters:r,filterOptions:w,activeSection:t,onApplyFilters:L}),e.jsx(ae,{placeholder:"Search...",value:B,onChange:i=>{const x=i.target.value;F(x),L(M,D,x)},className:`flex-1 min-w-0 sm:max-w-xs w-full
                                            border-[hsl(142,34%,51%)] text-[hsl(142,34%,20%)]
                                            focus:border-[hsl(142,34%,45%)] focus:ring-[hsl(142,34%,45%)]
                                            placeholder:text-[hsl(142,34%,40%)]`})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row flex-wrap gap-2",children:[t==="system-units"&&e.jsx(f,{href:route("technician.units.create",{room:s.id}),children:e.jsxs(c,{className:"flex items-center gap-2 px-4 py-2 text-sm bg-[hsl(142,34%,51%)] text-white hover:bg-[hsl(142,34%,45%)]",children:[e.jsx(V,{className:"h-4 w-4"}),"Add Computer"]})}),t==="peripherals"&&e.jsx(f,{href:route("technician.peripherals.create",{room:s.id}),children:e.jsxs(c,{className:"flex items-center gap-2 px-4 py-2 text-sm bg-[hsl(142,34%,51%)] text-white hover:bg-[hsl(142,34%,45%)]",children:[e.jsx(V,{className:"h-4 w-4"}),"Add Peripheral"]})}),t==="equipments"&&e.jsx(f,{href:route("technician.equipments.create",{room:s.id}),children:e.jsxs(c,{className:"flex items-center gap-2 px-4 py-2 text-sm bg-[hsl(142,34%,51%)] text-white hover:bg-[hsl(142,34%,45%)]",children:[e.jsx(V,{className:"h-4 w-4"}),"Add Equipment"]})})]})]}),e.jsxs(ee,{className:"min-w-full divide-y divide-gray-200",children:[e.jsx(se,{className:"bg-gray-50",children:e.jsxs(E,{className:"bg-[hsl(142,34%,85%)] text-[hsl(142,34%,25%)] hover:bg-[hsl(142,34%,80%)] h-10",children:[e.jsx(y,{className:"w-20 text-center text-gray-600",children:"No"}),e.jsx(y,{className:"text-gray-600  whitespace-nowrap",children:t==="system-units"?"Pc Code":t==="peripherals"?"Peripheral Code":"Equipment Code"}),t!=="system-units"&&e.jsx(y,{className:"text-gray-600",children:"Type"}),e.jsx(y,{className:"text-gray-600",children:"Condition"}),e.jsx(y,{className:"text-gray-600",children:"Actions"})]})}),e.jsx(te,{className:"divide-y divide-gray-200",children:U.length>0?U.map((i,x)=>(console.log("Equipment item:",i),e.jsxs(E,{children:[e.jsx(b,{className:"text-center",children:(N-1)*v+x+1}),e.jsx(b,{className:"font-medium text-gray-900 whitespace-nowrap",children:i.name}),t!=="system-units"&&e.jsx(b,{className:"text-gray-700",children:i.type}),e.jsx(b,{children:e.jsx(ye,{condition:i.condition})}),e.jsxs(b,{className:"flex gap-2 py-3",children:[t==="system-units"&&e.jsx(f,{href:route("technician.units.show",{room:s.id,unit:i.id}),children:e.jsxs(c,{size:"sm",variant:"outline",className:"flex items-center gap-1 text-[hsl(142,34%,51%)] border-[hsl(142,34%,51%)] hover:bg-[hsl(142,34%,51%)] hover:text-white",children:[e.jsx(R,{className:"h-4 w-4"})," "]})}),t==="peripherals"&&e.jsx(f,{href:route("technician.peripherals.show",{room:s.id,peripheral:i.id}),children:e.jsxs(c,{size:"sm",variant:"outline",className:"flex items-center gap-1 text-[hsl(142,34%,51%)] border-[hsl(142,34%,51%)] hover:bg-[hsl(142,34%,51%)] hover:text-white",children:[e.jsx(R,{className:"h-4 w-4"})," "]})}),t==="equipments"&&(console.log("Room ID:",s.id,"Equipment ID:",i.id),e.jsx(f,{href:route("technician.equipments.show",{room:s.id,equipment:i.id}),children:e.jsxs(c,{size:"sm",variant:"outline",className:"flex items-center gap-1 text-[hsl(142,34%,51%)] border-[hsl(142,34%,51%)] hover:bg-[hsl(142,34%,51%)] hover:text-white",children:[e.jsx(R,{className:"h-4 w-4"})," "]})})),e.jsx(c,{size:"sm",variant:"outline",className:"flex items-center gap-1 text-blue-500 border-blue-500 hover:bg-blue-500 hover:text-white",onClick:()=>{t==="system-units"?C.visit(route("technician.units.edit",i.id)):t==="peripherals"?C.visit(route("technician.peripherals.edit",i.id)):t==="equipments"&&C.visit(route("technician.equipments.edit",i.id))},children:e.jsx(ue,{className:"h-4 w-4"})}),e.jsx(c,{size:"sm",variant:"outline",className:"flex items-center gap-1 text-red-500 border-red-500 hover:bg-red-500 hover:text-white",onClick:()=>K(i),children:e.jsx(pe,{className:"h-4 w-4"})})]})]},i.id))):e.jsx(E,{children:e.jsx(b,{colSpan:t==="system-units"?4:5,className:"text-center text-muted-foreground py-4",children:"No data found."})})})]}),H>1&&e.jsx("div",{className:"flex justify-end p-4 bg-gray-50",children:e.jsx(be,{page:N,pageCount:H,onPageChange:I})})]})]})]})]})]}),e.jsx(fe,{open:X,onClose:()=>Y(!1),message:"Report submitted successfully!"})]})}function ye({condition:s}){if(!s)return null;const n=s.toLowerCase().trim();let l="bg-gray-100 text-gray-800";return n.includes("not working")||n.includes("broken")||n.includes("defect")?l="bg-red-100 text-red-800":n.includes("maint")||n.includes("pending")||n.includes("check")?l="bg-amber-100 text-amber-800":(n.includes("good")||n.includes("functional")||n==="working")&&(l="bg-green-100 text-green-800"),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold whitespace-nowrap ${l}`,children:s})}export{as as default};
