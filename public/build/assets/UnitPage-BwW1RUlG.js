import{r,u as Y,j as s,b as J}from"./app-BDh_mPlk.js";import{B as c}from"./button-BkTzeAMx.js";import{A as K}from"./app-sidebar-B4sebsTS.js";import{S as Q,a as W,b as X,c as Z}from"./index-ER0xydbU.js";import{c as ee}from"./index-BEm2ctXB.js";import se from"./AddUnitModal-BmOQeiWd.js";import re from"./EditUnitModal-DVVCuKQF.js";import{S as P}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{I as te}from"./input-CWGT3Rd1.js";import{T as oe,a as ae,b as f,c as o,d as le,e as t}from"./table-B86QOEOy.js";import"./index-NBlKUNYN.js";import{B as ne,a as ie,b as ce,c as F,d as de}from"./breadcrumb-c2zgeMlB.js";import"./chevron-right-Bfjdns5U.js";import"./dropdown-menu-D_aVVM8i.js";import"./index-Dsw7IGMk.js";import"./index-CJevctDC.js";import"./index-CoMm3gst.js";import"./index-kiOYVI2w.js";import"./dialog-j4u6q6wU.js";import"./label-B8k67Y-c.js";const me=[{label:"Functional",color:"bg-green-500"},{label:"Defective",color:"bg-red-500"},{label:"Under Maintenance",color:"bg-yellow-500"},{label:"Needs Upgrade",color:"bg-blue-500"},{label:"For Disposal",color:"bg-gray-500"}];function Re({units:a,rooms:v}){const[d,U]=r.useState(""),[l,N]=r.useState(1),[A,S]=r.useState(null),m=10,{delete:M}=Y(),[x,B]=r.useState("All Rooms"),[p,R]=r.useState("All Processors"),[h,T]=r.useState("All RAM"),[u,_]=r.useState("All Storage"),[j,L]=r.useState("All GPU"),[b,k]=r.useState("All Motherboards"),[g,q]=r.useState("All Conditions"),I=["All Rooms",...new Set(a.map(e=>e.room?.room_number||"N/A"))],z=["All Processors",...new Set(a.map(e=>e.processor||"N/A"))],D=["All RAM",...new Set(a.map(e=>e.ram||"N/A"))],O=["All Storage",...new Set(a.map(e=>e.storage||"N/A"))],G=["All GPU",...new Set(a.map(e=>e.gpu||"N/A"))],E=["All Motherboards",...new Set(a.map(e=>e.motherboard||"N/A"))],$=["All Conditions",...new Set(a.map(e=>e.condition||"N/A"))],C=r.useMemo(()=>a.filter(e=>{const n=e.unit_code.toLowerCase().includes(d.toLowerCase()),i=e.room?.room_number?.toLowerCase().includes(d.toLowerCase()),V=(x==="All Rooms"||e.room?.room_number===x)&&(p==="All Processors"||e.processor===p)&&(h==="All RAM"||e.ram===h)&&(u==="All Storage"||e.storage===u)&&(j==="All GPU"||e.gpu===j)&&(b==="All Motherboards"||e.motherboard===b)&&(g==="All Conditions"||e.condition===g);return(n||i)&&V}),[a,d,x,p,h,u,j,b,g]),y=Math.ceil(C.length/m),w=C.slice((l-1)*m,l*m),H=e=>{const n=me.find(i=>i.label.toLowerCase()===e.toLowerCase());return n?n.color:"bg-muted"};return s.jsxs(Q,{children:[s.jsx(K,{}),s.jsxs(W,{children:[s.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 border-b bg-white",children:[s.jsx(X,{}),s.jsx(Z,{orientation:"vertical",className:"h-6 mx-3"}),s.jsx(ne,{children:s.jsx(ie,{children:s.jsxs(ce,{children:[s.jsx(F,{href:"#","aria-current":"page",children:"Assets"}),s.jsx(de,{}),s.jsx(F,{href:"/units","aria-current":"page",className:"font-semibold text-foreground",children:"System Unit Lists"})]})})})]}),s.jsxs("main",{className:"w-full px-6 py-4",children:[s.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"System Units"}),s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx(te,{placeholder:"Search Unit Code...",value:d,onChange:e=>{U(e.target.value),N(1)},className:"mb-4 w-full sm:w-1/3"}),s.jsx(se,{rooms:v})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(oe,{children:[s.jsx(ae,{children:s.jsxs(f,{className:"h-10",children:[s.jsx(o,{className:"px-2 py-1",children:"#"}),s.jsx(o,{className:"px-2 py-1",children:"Unit Code"}),s.jsx(o,{className:"px-2 py-1",children:s.jsx("select",{className:"border rounded px-1 pr-7 py-0.5 text-xs",value:x,onChange:e=>B(e.target.value),children:I.map(e=>s.jsx("option",{value:e,children:e},e))})}),s.jsx(o,{className:"px-2 py-1",children:s.jsx("select",{className:"border rounded px-1 py-0.5 text-xs",value:p,onChange:e=>R(e.target.value),children:z.map(e=>s.jsx("option",{value:e,children:e},e))})}),s.jsx(o,{className:"px-2 py-1",children:s.jsx("select",{className:"border rounded px-1 py-0.5 text-xs",value:h,onChange:e=>T(e.target.value),children:D.map(e=>s.jsx("option",{value:e,children:e},e))})}),s.jsx(o,{className:"px-2 py-1",children:s.jsx("select",{className:"border rounded px-1 py-0.5 text-xs",value:u,onChange:e=>_(e.target.value),children:O.map(e=>s.jsx("option",{value:e,children:e},e))})}),s.jsx(o,{className:"px-2 py-1",children:s.jsx("select",{className:"border rounded px-1 py-0.5 text-xs",value:j,onChange:e=>L(e.target.value),children:G.map(e=>s.jsx("option",{value:e,children:e},e))})}),s.jsx(o,{className:"px-2 py-1",children:s.jsx("select",{className:"border rounded px-1 py-0.5 text-xs",value:b,onChange:e=>k(e.target.value),children:E.map(e=>s.jsx("option",{value:e,children:e},e))})}),s.jsx(o,{className:"px-2 py-1",children:s.jsx("select",{className:"border rounded px-1 py-0.5 text-xs",value:g,onChange:e=>q(e.target.value),children:$.map(e=>s.jsx("option",{value:e,children:e},e))})}),s.jsx(o,{className:"px-2 py-1 text-center",children:"Actions"})]})}),s.jsx(le,{children:w.length>0?w.map((e,n)=>s.jsxs(f,{children:[s.jsx(t,{children:(l-1)*m+n+1}),s.jsx(t,{children:e.unit_code}),s.jsxs(t,{children:["ROOM"," ",e.room?.room_number||"N/A"]}),s.jsx(t,{children:e.processor}),s.jsx(t,{children:e.ram}),s.jsx(t,{children:e.storage}),s.jsx(t,{children:e.gpu}),s.jsx(t,{children:e.motherboard}),s.jsx(t,{children:e.condition&&s.jsxs("div",{className:"mt-1 text-sm flex items-center gap-2",children:[s.jsx("span",{className:ee("inline-block w-3 h-3 rounded-full",H(e.condition))}),s.jsx("span",{className:"capitalize",children:e.condition})]})}),s.jsx(t,{children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(c,{size:"sm",variant:"secondary",onClick:()=>J.visit(`/system-units/view/${e.unit_code}`),children:"View"}),s.jsx(c,{size:"sm",variant:"secondary",onClick:()=>S(e),children:"Edit"}),s.jsx(c,{size:"sm",variant:"destructive",onClick:()=>{P.fire({title:`Delete ${e.unit_code}?`,text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(i=>{i.isConfirmed&&(M(`/system-units/${e.id}`),P.fire("Deleted!",`Unit ${e.unit_code} has been deleted.`,"success"))})},children:"Delete"})]})})]},e.id)):s.jsx(f,{children:s.jsx(t,{colSpan:10,className:"text-center py-4",children:"No matching units found."})})})]})}),s.jsxs("div",{className:"flex justify-between items-center mt-4",children:[s.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",l," of ",y]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(c,{size:"sm",variant:"outline",disabled:l===1,onClick:()=>N(e=>e-1),children:"Previous"}),s.jsx(c,{size:"sm",variant:"outline",disabled:l===y,onClick:()=>N(e=>e+1),children:"Next"})]})]}),A&&s.jsx(re,{unit:A,rooms:v,onClose:()=>S(null)})]})]})]})}export{Re as default};
