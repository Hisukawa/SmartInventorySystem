import{u as v,r as x,j as e}from"./app-CyKXg9yc.js";import{D as _,a as f,b as y,c as C}from"./dialog-DyaBvGA0.js";import{L as a}from"./label-CCUne8iZ.js";import{I as d}from"./input-vTKYAFaX.js";import{B as S}from"./button-bkt5fBkN.js";import{T as k}from"./textarea-LmakNOUO.js";import{c as w}from"./utils-CBfrqCZ4.js";import{S as D}from"./sweetalert2.esm.all-BQIkj5Wb.js";import"./index-BMH21eXj.js";import"./createLucideIcon-BLPxHd-5.js";import"./index-CXDoVF6r.js";import"./index-cjdhKuD8.js";import"./index-BWpWyP_H.js";const u={Working:"bg-green-200 text-green-800","Not Working":"bg-red-200 text-red-800","Intermittent Issue":"bg-yellow-200 text-yellow-800","Needs Cleaning":"bg-blue-200 text-blue-800","For Replacement":"bg-orange-200 text-orange-800","For Disposal":"bg-gray-200 text-gray-800",Condemned:"bg-black text-white","Needs Repair":"bg-red-200 text-red-800","No Signal":"bg-red-200 text-red-800","Needs Configuration":"bg-blue-200 text-blue-800","Under Maintenance":"bg-blue-200 text-blue-900","To Be Diagnosed":"bg-blue-100 text-blue-800"};function z({peripheral:l,rooms:g=[],units:n=[],onClose:c}){const{data:t,setData:r,put:b,processing:p,errors:i}=v({type:l?.type||"",brand:l?.brand||"",model:l?.model||"",serial_number:l?.serial_number||"",condition:l?.condition||"",condition_details:l?.condition_details||"",room_id:l?.room_id||"",unit_id:l?.unit_id||""}),[h,m]=x.useState([]);x.useEffect(()=>{if(t.room_id){const s=n.filter(o=>String(o.room_id)===String(t.room_id));m(s),s.find(o=>String(o.id)===String(t.unit_id))||r("unit_id","")}else m([]),r("unit_id","")},[t.room_id,n]);const j=s=>{s.preventDefault(),b(route("peripherals.update",l.id),{onSuccess:()=>{D.fire({icon:"success",title:"Updated!",text:"Peripheral updated successfully.",timer:2e3,showConfirmButton:!1}),c()}})},N=s=>u[s]||"bg-gray-200 text-gray-800";return e.jsx(_,{open:!0,onOpenChange:s=>!s&&c(),children:e.jsxs(f,{className:"max-w-xl rounded-2xl shadow-xl border border-gray-200 p-6",children:[e.jsx(y,{children:e.jsxs(C,{className:"text-xl font-semibold text-gray-800",children:["Edit Peripheral â€“"," ",e.jsx("span",{className:"text-[color:var(--app-green,#16A34A)]",children:l?.peripheral_code||"N/A"})]})}),e.jsxs("form",{onSubmit:j,className:"grid gap-5 py-2",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{className:"mb-1 block",children:"Type"}),e.jsx(d,{value:t.type,onChange:s=>r("type",s.target.value),placeholder:"Keyboard, Mouse, Monitor",className:"rounded-lg"}),i.type&&e.jsx("p",{className:"text-sm text-red-500",children:i.type})]}),e.jsxs("div",{children:[e.jsx(a,{className:"mb-1 block",children:"Serial Number"}),e.jsx(d,{value:t.serial_number,onChange:s=>r("serial_number",s.target.value),placeholder:"Serial Number",className:"rounded-lg"}),i.serial_number&&e.jsx("p",{className:"text-sm text-red-500",children:i.serial_number})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{className:"mb-1 block",children:"Brand"}),e.jsx(d,{value:t.brand,onChange:s=>r("brand",s.target.value),placeholder:"Enter brand",className:"rounded-lg"}),i.brand&&e.jsx("p",{className:"text-sm text-red-500",children:i.brand})]}),e.jsxs("div",{children:[e.jsx(a,{className:"mb-1 block",children:"Model"}),e.jsx(d,{value:t.model,onChange:s=>r("model",s.target.value),placeholder:"Enter model",className:"rounded-lg"}),i.model&&e.jsx("p",{className:"text-sm text-red-500",children:i.model})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{className:"mb-1 block",children:"Room"}),e.jsxs("select",{value:t.room_id,onChange:s=>r("room_id",s.target.value),className:"w-full border rounded-lg px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Select Room"}),g.map(s=>e.jsx("option",{value:s.id,children:s.room_number},s.id))]}),i.room_id&&e.jsx("p",{className:"text-sm text-red-500",children:i.room_id})]}),e.jsxs("div",{children:[e.jsx(a,{className:"mb-1 block",children:"Unit"}),e.jsxs("select",{value:t.unit_id,onChange:s=>r("unit_id",s.target.value),disabled:!t.room_id,className:"w-full border rounded-lg px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Select Unit"}),h.map(s=>e.jsx("option",{value:s.id,children:s.unit_code},s.id))]}),i.unit_id&&e.jsx("p",{className:"text-sm text-red-500",children:i.unit_id})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{className:"mb-1 block",children:"Condition"}),e.jsxs("select",{value:t.condition,onChange:s=>r("condition",s.target.value),className:"w-full border rounded-lg px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Select Condition"}),Object.keys(u).map(s=>e.jsx("option",{value:s,children:s},s))]}),t.condition&&e.jsxs("div",{className:"mt-1 text-sm flex items-center gap-2",children:[e.jsx("span",{className:w("inline-block w-3 h-3 rounded-full",N(t.condition).split(" ")[0])}),e.jsx("span",{className:"capitalize",children:t.condition})]}),i.condition&&e.jsx("p",{className:"text-sm text-red-500",children:i.condition})]}),e.jsxs("div",{children:[e.jsx(a,{className:"mb-1 block",children:"Condition Details"}),e.jsx(k,{value:t.condition_details,onChange:s=>r("condition_details",s.target.value),placeholder:"Describe issues, missing keys, loose cable, etc.",rows:3}),i.condition_details&&e.jsx("p",{className:"text-sm text-red-500",children:i.condition_details})]})]}),e.jsx(S,{type:"submit",disabled:p,className:"rounded-lg bg-[color:var(--app-green,#16A34A)] hover:opacity-90 text-white",children:"Update Peripheral"})]})]})})}export{z as default};
