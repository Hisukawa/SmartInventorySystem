import{r as a,j as e,H as z,c as C}from"./app-oadOUV-n.js";import{S as $,a as E,b as M,c as Z}from"./avatar-CzEWLDN7.js";import{A as X}from"./app-sidebar-CvYvaPFx.js";import{N as q}from"./Notification-BtOOpeDU.js";import{C as F,a as T,b as I,c as A}from"./card-Cra_Cbf4.js";import{B as G,a as J,b as K,c as O}from"./breadcrumb-CnaCxfT5.js";import{B as r}from"./badge-DJ1qpodj.js";import{T as Q,f as U,a as V,b as f,c as i,d as W,e as t}from"./table-C2ybZ2t8.js";import{I as n}from"./input-BYJK64iK.js";import{B as b}from"./button-DCerDx_k.js";import{X as m}from"./index-BIZDOzgP.js";import{F as Y}from"./funnel-B1piXbdf.js";import"./utils-DmFmtmwo.js";import"./index-BrZ1aTMQ.js";import"./index-BexT-9JP.js";import"./index-BenP02zP.js";import"./dropdown-menu-BsURpAdA.js";import"./index-Nzc-Onjg.js";import"./chevron-right-BWjp2mrd.js";import"./index-BRvvtd1h.js";import"./index-DqNHHwnw.js";import"./sparkles-BGPEqarB.js";import"./bell-B6bNijAo.js";import"./keyboard-DbKqAsHr.js";import"./boxes-BXY4-k1e.js";import"./file-text-CFc7CEVf.js";import"./users-GXFjlTaJ.js";import"./chevron-down-DV__Zvya.js";function ke({children:ee}){const[y,D]=a.useState([]),[v,L]=a.useState([]),[P,se]=a.useState(1),[ae,R]=a.useState(1),[x,te]=a.useState(1),N=10,[_,B]=a.useState(""),[re,ie]=a.useState([]),[w,k]=a.useState(!1),[c,u]=a.useState(""),[l,h]=a.useState(""),[o,g]=a.useState(""),[d,j]=a.useState(""),[ne,ce]=a.useState([]),S=async()=>{try{const s=await C.get(`/api/admin/rooms-status?page=${P}&per_page=${N}`);D(s.data.data),R(s.data.meta.total_pages)}catch(s){console.error("Failed to fetch rooms:",s)}},p=async()=>{try{const s=await C.get("/admin/faculty-logs",{params:{page:x,search:_,faculty_id:c,room_id:l,date_from:o,date_to:d}});L(s.data.data)}catch(s){console.error("Failed to fetch logs:",s)}};return a.useEffect(()=>{S(),p();const s=setInterval(()=>{S(),p()},5e3);return()=>clearInterval(s)},[x]),e.jsxs($,{children:[e.jsx(z,{children:e.jsx("title",{children:"Dashboard"})}),e.jsx(X,{}),e.jsxs(E,{children:[e.jsx("header",{className:"sticky top-0 z-20 bg-white border-b px-6 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{}),e.jsx(Z,{orientation:"vertical",className:"h-6 mx-3"}),e.jsx(G,{children:e.jsx(J,{children:e.jsx(K,{children:e.jsx(O,{href:"/admin/monitoring","aria-current":"page",className:"font-semibold text-foreground",children:"Monitoring"})})})}),e.jsx("div",{className:"flex-1"}),e.jsx(q,{})]})}),e.jsx("main",{className:"w-full px-6 py-4",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Room Monitoring"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-8",children:[y.length===0&&e.jsx("p",{className:"col-span-full text-center text-gray-500",children:"No rooms found."}),y.map(s=>e.jsxs(F,{className:`rounded-2xl transition-all duration-200 ease-in-out shadow-md 
              hover:scale-[1.02] hover:shadow-lg
              ${s.is_active?"bg-[#59AC77]  border border-green-700 text-white":"bg-[#59AC77]  border border-gray-300 text-gray-900"}`,children:[e.jsxs(T,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(I,{className:`text-lg md:text-xl font-semibold ${s.is_active?"text-white":"text-gray-900"}`,children:s.name}),e.jsx(r,{className:`px-3 py-1 text-xs font-medium rounded-full ${s.is_active?"bg-white text-green-700":"bg-gray-500 text-white"}`,children:s.is_active?"Active":"Inactive"})]}),e.jsx(A,{children:e.jsxs("div",{className:"flex items-center space-x-4",children:[s.is_active&&s.last_scanned_user?.photo?e.jsx("img",{src:s.last_scanned_user.photo,alt:s.last_scanned_user.name,className:"w-20 h-20 rounded-full object-cover border-2 border-green-500"}):e.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 text-sm border-2 border-gray-300",children:"No Photo"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`font-medium ${s.is_active?"text-white":"text-gray-900"}`,children:s.is_active&&s.last_scanned_user?s.last_scanned_user.name:"No Faculty"}),e.jsx("span",{className:`text-xs ${s.is_active?"text-green-100":"text-gray-600"}`,children:s.is_active&&s.last_scanned_at?new Date(s.last_scanned_at).toLocaleString("en-PH",{timeZone:"Asia/Manila",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"Not yet scanned"})]})]})})]},s.id))]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{type:"text",placeholder:"Search by faculty or room...",value:_,onChange:s=>B(s.target.value),className:"w-64"}),e.jsx(b,{onClick:p,children:"Search"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[c&&e.jsxs(r,{variant:"secondary",className:"flex items-center gap-1",children:["Faculty: ",c,e.jsx(m,{size:14,className:"cursor-pointer",onClick:()=>u("")})]}),l&&e.jsxs(r,{variant:"secondary",className:"flex items-center gap-1",children:["Room: ",l,e.jsx(m,{size:14,className:"cursor-pointer",onClick:()=>h("")})]}),o&&e.jsxs(r,{variant:"secondary",className:"flex items-center gap-1",children:["From: ",o,e.jsx(m,{size:14,className:"cursor-pointer",onClick:()=>g("")})]}),d&&e.jsxs(r,{variant:"secondary",className:"flex items-center gap-1",children:["To: ",d,e.jsx(m,{size:14,className:"cursor-pointer",onClick:()=>j("")})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs(b,{variant:"outline",className:"flex items-center gap-2",onClick:()=>k(!w),children:[e.jsx(Y,{size:16})," Filters"]}),w&&e.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white border rounded-lg shadow p-4 space-y-3 z-50",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Faculty ID"}),e.jsx(n,{type:"number",placeholder:"Enter Faculty ID",value:c,onChange:s=>u(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Room ID"}),e.jsx(n,{type:"number",placeholder:"Enter Room ID",value:l,onChange:s=>h(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"From"}),e.jsx(n,{type:"date",value:o,onChange:s=>g(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"To"}),e.jsx(n,{type:"date",value:d,onChange:s=>j(s.target.value)})]}),e.jsx(b,{variant:"outline",className:"w-full mt-2",onClick:()=>{u(""),h(""),g(""),j("")},children:"Reset Filters"})]})]})]}),e.jsxs(F,{className:"shadow-md rounded-2xl",children:[e.jsx(T,{children:e.jsx(I,{children:"Faculty Logs History"})}),e.jsx(A,{children:e.jsxs(Q,{children:[e.jsx(U,{children:"A list of recent faculty room logs."}),e.jsx(V,{children:e.jsxs(f,{children:[e.jsx(i,{children:"#"}),e.jsx(i,{children:"Faculty"}),e.jsx(i,{children:"LogIn Date & Time"}),e.jsx(i,{children:"Logout Time"}),e.jsx(i,{children:"Room"})]})}),e.jsxs(W,{children:[v.length===0&&e.jsx(f,{children:e.jsx(t,{colSpan:5,className:"text-center text-gray-500",children:"No logs found."})}),v.map((s,H)=>e.jsxs(f,{children:[e.jsx(t,{children:H+1+(x-1)*N}),e.jsx(t,{children:s.scanned_by?.name??"N/A"}),e.jsx(t,{children:s.created_at?new Date(s.created_at).toLocaleString("en-PH",{timeZone:"Asia/Manila",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"—"}),e.jsx(t,{children:s.logged_out_at?new Date(s.logged_out_at).toLocaleString("en-PH",{timeZone:"Asia/Manila",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"—"}),e.jsx(t,{children:s.room?.room_number??"N/A"})]},s.id))]})]})})]})]})})]})]})}export{ke as default};
