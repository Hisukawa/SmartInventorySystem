import{r as c,j as e,u as J,H as K,c as U}from"./app-DpVfWwIa.js";import{b as X,c as V,d as W}from"./card-D26ThBVV.js";import{I as R}from"./input-Cldoq0Pi.js";import{L as S}from"./label-CKOYPAeM.js";import{B as I}from"./button-BIJ7I28M.js";import{c as $,d as Q,P as y,u as Z,a as T,b as _}from"./index-D5ducR0X.js";import{u as ee}from"./index-D75Y7cUv.js";import{u as te,C as se}from"./index-_HPkj5RN.js";import{c as L}from"./createLucideIcon-Dk4lCYyT.js";import{F as re}from"./FaceCapture-6eSwRqWR.js";import"./index-6ic6AYgv.js";var k="Checkbox",[ae,Ce]=$(k),[oe,E]=ae(k);function ne(r){const{__scopeCheckbox:n,checked:a,children:p,defaultChecked:i,disabled:s,form:h,name:f,onCheckedChange:d,required:x,value:b="on",internal_do_not_use_render:m}=r,[u,j]=Z({prop:a,defaultProp:i??!1,onChange:d,caller:k}),[g,o]=c.useState(null),[v,t]=c.useState(null),l=c.useRef(!1),w=g?!!h||!!g.closest("form"):!0,N={checked:u,disabled:s,setChecked:j,control:g,setControl:o,name:f,form:h,value:b,hasConsumerStoppedPropagationRef:l,required:x,defaultChecked:C(i)?!1:i,isFormControl:w,bubbleInput:v,setBubbleInput:t};return e.jsx(oe,{scope:n,...N,children:ce(m)?m(N):p})}var A="CheckboxTrigger",B=c.forwardRef(({__scopeCheckbox:r,onKeyDown:n,onClick:a,...p},i)=>{const{control:s,value:h,disabled:f,checked:d,required:x,setControl:b,setChecked:m,hasConsumerStoppedPropagationRef:u,isFormControl:j,bubbleInput:g}=E(A,r),o=T(i,b),v=c.useRef(d);return c.useEffect(()=>{const t=s?.form;if(t){const l=()=>m(v.current);return t.addEventListener("reset",l),()=>t.removeEventListener("reset",l)}},[s,m]),e.jsx(y.button,{type:"button",role:"checkbox","aria-checked":C(d)?"mixed":d,"aria-required":x,"data-state":q(d),"data-disabled":f?"":void 0,disabled:f,value:h,...p,ref:o,onKeyDown:_(n,t=>{t.key==="Enter"&&t.preventDefault()}),onClick:_(a,t=>{m(l=>C(l)?!0:!l),g&&j&&(u.current=t.isPropagationStopped(),u.current||t.stopPropagation())})})});B.displayName=A;var F=c.forwardRef((r,n)=>{const{__scopeCheckbox:a,name:p,checked:i,defaultChecked:s,required:h,disabled:f,value:d,onCheckedChange:x,form:b,...m}=r;return e.jsx(ne,{__scopeCheckbox:a,checked:i,defaultChecked:s,disabled:f,required:h,onCheckedChange:x,name:p,form:b,value:d,internal_do_not_use_render:({isFormControl:u})=>e.jsxs(e.Fragment,{children:[e.jsx(B,{...m,ref:n,__scopeCheckbox:a}),u&&e.jsx(H,{__scopeCheckbox:a})]})})});F.displayName=k;var D="CheckboxIndicator",M=c.forwardRef((r,n)=>{const{__scopeCheckbox:a,forceMount:p,...i}=r,s=E(D,a);return e.jsx(Q,{present:p||C(s.checked)||s.checked===!0,children:e.jsx(y.span,{"data-state":q(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:n,style:{pointerEvents:"none",...r.style}})})});M.displayName=D;var O="CheckboxBubbleInput",H=c.forwardRef(({__scopeCheckbox:r,...n},a)=>{const{control:p,hasConsumerStoppedPropagationRef:i,checked:s,defaultChecked:h,required:f,disabled:d,name:x,value:b,form:m,bubbleInput:u,setBubbleInput:j}=E(O,r),g=T(a,j),o=ee(s),v=te(p);c.useEffect(()=>{const l=u;if(!l)return;const w=window.HTMLInputElement.prototype,P=Object.getOwnPropertyDescriptor(w,"checked").set,G=!i.current;if(o!==s&&P){const Y=new Event("click",{bubbles:G});l.indeterminate=C(s),P.call(l,C(s)?!1:s),l.dispatchEvent(Y)}},[u,o,s,i]);const t=c.useRef(C(s)?!1:s);return e.jsx(y.input,{type:"checkbox","aria-hidden":!0,defaultChecked:h??t.current,required:f,disabled:d,name:x,value:b,form:m,...n,tabIndex:-1,ref:g,style:{...n.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});H.displayName=O;function ce(r){return typeof r=="function"}function C(r){return r==="indeterminate"}function q(r){return C(r)?"indeterminate":r?"checked":"unchecked"}const z=c.forwardRef(({className:r,...n},a)=>e.jsx(F,{ref:a,className:L("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...n,children:e.jsx(M,{className:L("flex items-center justify-center text-current"),children:e.jsx(se,{className:"h-4 w-4"})})}));z.displayName=F.displayName;function je({status:r}){const{data:n,setData:a,post:p,processing:i,errors:s,reset:h}=J({email:"",password:"",remember:!1}),[f,d]=c.useState(!1),[x,b]=c.useState(!1),[m,u]=c.useState(""),j=o=>{o.preventDefault(),p(route("login"),{onFinish:()=>h("password")})},g=async o=>{console.log("üì∏ Raw face descriptor captured:",o);const v=Array.from(o).map(t=>parseFloat(t.toFixed(6)));b(!0),u("");try{const t=await U.post(route("face.login"),{face_descriptor:v},{headers:{"Content-Type":"application/json",Accept:"application/json"}});console.log("‚úÖ Backend JSON response:",t.data),t.data.success?window.location.href=t.data.redirect:(u("‚ùå "+(t.data.message||"Face not recognized")),d(!0))}catch(t){console.error("‚ùå Face login error:",t.response||t);const l=t.response?.data?.message||"Face not recognized. Please try again.";t.response?.data&&typeof t.response.data=="string"&&t.response.data.startsWith("<!DOCTYPE html>")&&console.warn("‚ö†Ô∏è Backend returned HTML instead of JSON. Check your Laravel route or middleware."),u("‚ùå "+l),d(!0)}finally{b(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(K,{title:"Log in"}),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 px-4",children:e.jsxs("div",{className:"w-full max-w-5xl grid grid-cols-1 md:grid-cols-2 bg-white shadow-lg rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"hidden md:flex flex-col items-center justify-center bg-green-500 text-white p-8 relative",children:[e.jsxs("div",{className:"flex space-x-4 mb-6",children:[e.jsx("div",{className:"w-28 h-28 rounded-full overflow-hidden border-4 border-white bg-white shadow-md",children:e.jsx("img",{src:"logo.png",alt:"Logo 1",className:"w-full h-full object-contain"})}),e.jsx("div",{className:"w-28 h-28 rounded-full overflow-hidden border-4 border-white bg-white shadow-md",children:e.jsx("img",{src:"/ict.png",alt:"Logo 2",className:"w-full h-full object-contain"})})]}),e.jsx("h2",{className:"text-2xl font-bold text-center",children:"ICT INVENTORY SYSTEM MANAGEMENT"}),e.jsx("p",{className:"mt-3 text-sm opacity-90 text-center",children:"Secure ‚Ä¢ Fast ‚Ä¢ Organized"})]}),e.jsxs("div",{className:"p-8 flex flex-col justify-center",children:[e.jsxs(X,{className:"p-0 mb-6",children:[e.jsx(V,{className:"text-2xl font-bold",children:"Login Account"}),e.jsx(W,{children:"Please enter your details to log in"})]}),r&&e.jsx("div",{className:"mb-4 text-sm font-medium text-green-600",children:r}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(S,{htmlFor:"email",children:"Email Address"}),e.jsx(R,{id:"email",type:"email",name:"email",value:n.email,autoComplete:"username",onChange:o=>a("email",o.target.value)}),s.email&&e.jsx("p",{className:"text-sm text-red-500",children:s.email})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(S,{htmlFor:"password",children:"Password"}),e.jsx(R,{id:"password",type:"password",name:"password",value:n.password,autoComplete:"current-password",onChange:o=>a("password",o.target.value)}),s.password&&e.jsx("p",{className:"text-sm text-red-500",children:s.password})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(z,{id:"remember",checked:n.remember,onCheckedChange:o=>a("remember",!!o)}),e.jsx("label",{htmlFor:"remember",className:"text-sm text-muted-foreground",children:"Remember me"})]}),e.jsx(I,{type:"submit",className:"w-full mt-2 bg-green-500 hover:bg-green-600 text-white",disabled:i,children:"Login"})]}),e.jsxs("div",{className:"mt-6",children:[f?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-semibold mb-2 mt-4",children:"üì∏ Scanning Face..."}),e.jsx(re,{autoCapture:!0,onCapture:g})]}):e.jsx(I,{className:"w-full mt-2 bg-orange-500 hover:bg-orange-600 text-white",onClick:()=>d(!0),disabled:x,children:x?"Processing...":"Login with Face"}),m&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:m})]}),e.jsxs("div",{className:"text-center text-sm mt-6",children:["Don‚Äôt have an account?"," ",e.jsx("span",{className:"text-gray-600",children:"Please contact the ICT Department Chairperson to request one."})]})]})]})})]})}export{je as default};
