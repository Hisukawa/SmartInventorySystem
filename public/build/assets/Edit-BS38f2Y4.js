import{r as n,u as v,j as e,H as w,a as b}from"./app-DOsJYAZr.js";import{A as N}from"./AuthenticatedLayout-BVB8nqV0.js";import"./TextInput-Bcr8FbRV.js";import y from"./UpdatePasswordForm-pD9oLwBJ.js";import D from"./UpdateProfileInformationForm-CgWUtvW3.js";import{B as r}from"./button-BJkAWaq5.js";import{D as P,a as C,b as A,c as S,d as F,e as R}from"./dialog-C5XhxJTd.js";import{s as d}from"./index-hUYwy-L-.js";import"./transition-CJunGcKy.js";import"./InputLabel-DlQ9EW2K.js";import"./PrimaryButton-C9utZRJW.js";import"./index-BCvnxMa-.js";import"./utils-CBfrqCZ4.js";import"./index-DUfoXKAx.js";import"./createLucideIcon-BCibPqi-.js";import"./index-B0seKdI2.js";import"./index-azXK0IiM.js";import"./index-0-18Hqup.js";function V({user:t,mustVerifyEmail:p,status:h}){const[c,x]=n.useState(t?.photo?`/storage/${t.photo}`:"/default-avatar.png"),[f,i]=n.useState(!1),m=n.useRef(null),a=v({photo:null}),g=o=>{const s=o.target.files[0];if(!s)return;a.setData("photo",s);const l=new FileReader;l.onloadend=()=>x(l.result),l.readAsDataURL(s)},u=o=>{o.preventDefault(),a.patch(d("profile.update"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{a.reset("photo"),i(!1)},onError:s=>console.log(s)})},j=o=>o.charAt(0).toUpperCase()+o.slice(1);return e.jsxs(N,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:t?.role?`${j(t.role)} Profile`:"Admin Profile"}),children:[e.jsx(w,{title:"Admin Profile"}),e.jsxs("div",{className:"py-12 space-y-6",children:[e.jsxs("div",{className:"max-w-lg mx-auto p-6 bg-white shadow-lg rounded-lg flex flex-col items-center space-y-4",children:[e.jsx("img",{src:c,alt:t?.name,className:"w-32 h-32 rounded-full object-cover border"}),e.jsx("h1",{className:"text-xl font-bold",children:t?.name}),e.jsx("p",{className:"text-sm text-gray-500",children:t?.email}),e.jsx("div",{className:"flex gap-3 mt-4",children:e.jsx(r,{onClick:()=>b.visit(d("face.register.page")),variant:"secondary",children:"Activate Face Recognition"})})]}),e.jsx("div",{className:"bg-white p-4 shadow sm:rounded-lg sm:p-8 max-w-xl mx-auto",children:e.jsx(D,{mustVerifyEmail:p,status:h})}),e.jsx("div",{className:"bg-white p-4 shadow sm:rounded-lg sm:p-8 max-w-xl mx-auto",children:e.jsx(y,{})}),e.jsx(P,{open:f,onOpenChange:i,children:e.jsxs(C,{className:"sm:max-w-md",children:[e.jsxs(A,{children:[e.jsx(S,{children:"Update Profile Photo"}),e.jsxs(F,{children:["Choose a new profile photo for ",t?.name,"."]})]}),e.jsxs("form",{onSubmit:u,className:"flex flex-col items-center gap-4 mt-2",encType:"multipart/form-data",children:[e.jsx("img",{src:c,alt:"Preview",className:"w-32 h-32 rounded-full object-cover border"}),e.jsx("input",{type:"file",accept:"image/*",ref:m,onChange:g,className:"hidden"}),e.jsx(r,{type:"button",variant:"secondary",onClick:()=>m.current.click(),children:"Choose Photo"}),a.data.photo&&e.jsx("span",{className:"text-sm text-gray-600",children:a.data.photo.name}),e.jsxs(R,{className:"mt-4",children:[e.jsx(r,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(r,{type:"submit",disabled:a.processing,children:a.processing?"Saving...":"Save"})]})]})]})})]})]})}export{V as default};
