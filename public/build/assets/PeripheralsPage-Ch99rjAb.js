import{r as i,j as r,L as g,b as w}from"./app-3fpj3-G5.js";import{B as c}from"./button-BkzWAJ5l.js";import{C as O,a as $}from"./card-CDFz9pkN.js";import{S as K,a as V,b as Y,c as G}from"./index-hy4J5mNt.js";import{S as J}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{T as Q,a as W,b as C,c as l,d as X,e as n}from"./table-Wr3jmx53.js";import{B as Z,a as ee,b as re,c as N,d as se}from"./breadcrumb-DVkc9P9Y.js";import{A as te}from"./app-sidebar-CGNIW3Da.js";import{I as ie}from"./input-Dkw6Upvm.js";import ne from"./EditPeripheralModal-Bd5F4jjt.js";import"./index-Dk1taLDt.js";import"./index-BmHnZ_rW.js";import"./index-26XVhzvm.js";import"./index-CguMraru.js";import"./dropdown-menu-D6ILbBn-.js";import"./index-CEAM0i9j.js";import"./chevron-right-H2wFA7jy.js";import"./index-3YVzaYc3.js";import"./dialog-CInYkmvr.js";import"./label-Ck0YwXSb.js";function ye({peripherals:o,search:y,existingRooms:T,existingUnits:L}){const[s,_]=i.useState(y||""),[b,f]=i.useState(null),[d,P]=i.useState("All Types"),[m,B]=i.useState("All Serials"),[h,F]=i.useState("All Conditions"),[u,k]=i.useState("All Rooms"),[x,R]=i.useState("All Unit Codes"),[a,j]=i.useState(1),p=10,z=["All Types",...new Set(o.map(e=>e.type||"N/A"))],E=["All Serials",...new Set(o.map(e=>e.serial_number||"N/A"))],q=["All Conditions",...new Set(o.map(e=>e.condition||"N/A"))],D=["All Rooms",...new Set(o.map(e=>e.room?.room_number||"N/A"))],I=["All Unit Codes",...new Set(o.map(e=>e.unit_code||"N/A"))];function U(e){J.fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&w.delete(`/admin/peripherals/${e}`)})}const M=e=>{e.key==="Enter"&&w.get("/admin/peripherals",{search:s})},S=i.useMemo(()=>o.filter(e=>{const t=s===""||e.peripheral_code?.toLowerCase().includes(s.toLowerCase())||e.type?.toLowerCase().includes(s.toLowerCase())||e.serial_number?.toLowerCase().includes(s.toLowerCase())||e.condition?.toLowerCase().includes(s.toLowerCase())||(e.room?.room_number||"N/A").toLowerCase().includes(s.toLowerCase())||e.unit_code?.toLowerCase().includes(s.toLowerCase()),H=(d==="All Types"||e.type===d)&&(m==="All Serials"||e.serial_number===m)&&(h==="All Conditions"||e.condition===h)&&(u==="All Rooms"||(e.room?.room_number||"N/A")===u)&&(x==="All Unit Codes"||e.unit_code===x);return t&&H}),[o,s,d,m,h,u,x]),v=Math.ceil(S.length/p),A=S.slice((a-1)*p,a*p);return r.jsxs(K,{children:[r.jsx(te,{}),r.jsxs(V,{children:[r.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 border-b bg-white",children:[r.jsx(Y,{}),r.jsx(G,{orientation:"vertical",className:"h-6 mx-3"}),r.jsx(Z,{children:r.jsx(ee,{children:r.jsxs(re,{children:[r.jsx(N,{href:"#",children:"Assets"}),r.jsx(se,{}),r.jsx(N,{href:"/admin/peripherals","aria-current":"page",className:"font-semibold text-foreground",children:"Peripherals"})]})})})]}),r.jsx("main",{children:r.jsxs("div",{className:"p-6",children:[r.jsx("h1",{className:"text-2xl font-bold mb-5",children:"Peripherals"}),r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx(ie,{placeholder:"Search peripherals...",value:s,onChange:e=>_(e.target.value),onKeyDown:M,className:"w-full sm:w-1/3"}),r.jsx("div",{className:"flex items-center space-x-4",children:r.jsx(g,{href:"/admin/peripherals/create",children:r.jsx(c,{children:"Add Peripheral"})})})]}),r.jsx(O,{children:r.jsxs($,{children:[r.jsxs(Q,{children:[r.jsx(W,{children:r.jsxs(C,{children:[r.jsx(l,{children:"#"}),r.jsx(l,{children:"Peripheral Code"}),r.jsx(l,{children:r.jsx("select",{className:"border rounded px-1 pr-7 py-0.5 text-xs",value:d,onChange:e=>P(e.target.value),children:z.map(e=>r.jsx("option",{value:e,children:e},e))})}),r.jsx(l,{children:r.jsx("select",{className:"border rounded px-1 pr-7 py-0.5 text-xs",value:m,onChange:e=>B(e.target.value),children:E.map(e=>r.jsx("option",{value:e,children:e},e))})}),r.jsx(l,{children:r.jsx("select",{className:"border rounded px-1 pr-7 py-0.5 text-xs",value:h,onChange:e=>F(e.target.value),children:q.map(e=>r.jsx("option",{value:e,children:e},e))})}),r.jsx(l,{children:r.jsx("select",{className:"border rounded px-1 pr-7 py-0.5 text-xs",value:u,onChange:e=>k(e.target.value),children:D.map(e=>r.jsx("option",{value:e,children:e},e))})}),r.jsx(l,{children:r.jsx("select",{className:"border rounded px-1 pr-7 py-0.5 text-xs",value:x,onChange:e=>R(e.target.value),children:I.map(e=>r.jsx("option",{value:e,children:e},e))})}),r.jsx(l,{children:"Actions"})]})}),r.jsx(X,{children:A.length>0?A.map((e,t)=>r.jsxs(C,{children:[r.jsx(n,{children:(a-1)*p+t+1}),r.jsx(n,{children:e.peripheral_code}),r.jsx(n,{children:e.type}),r.jsx(n,{children:e.serial_number}),r.jsx(n,{children:e.condition}),r.jsxs(n,{children:["ROOM"," ",e.room?e.room.room_number:"N/A"]}),r.jsx(n,{children:e.unit_code}),r.jsxs(n,{className:"space-x-2",children:[r.jsx(g,{href:`/admin/peripherals/${e.id}`,children:r.jsx(c,{variant:"secondary",size:"sm",children:"View"})}),r.jsx(c,{variant:"outline",size:"sm",onClick:()=>f(e),children:"Edit"}),r.jsx(c,{variant:"destructive",size:"sm",onClick:()=>U(e.id),children:"Delete"})]})]},e.id)):r.jsx(C,{children:r.jsx(n,{colSpan:"8",className:"text-center",children:"No peripherals found."})})})]}),r.jsxs("div",{className:"flex justify-center mt-4 space-x-2",children:[r.jsx(c,{variant:"outline",size:"sm",disabled:a===1,onClick:()=>j(a-1),children:"Previous"}),[...Array(v)].map((e,t)=>r.jsx(c,{variant:a===t+1?"default":"outline",size:"sm",onClick:()=>j(t+1),children:t+1},t)),r.jsx(c,{variant:"outline",size:"sm",disabled:a===v,onClick:()=>j(a+1),children:"Next"})]})]})})]})}),b&&r.jsx(ne,{peripheral:b,rooms:T,units:L,onClose:()=>f(null)})]})]})}export{ye as default};
