import{b as C,r as l,u as O,j as e}from"./app-dhsHMyn2.js";import{D as $,e as D,a as w,b as U,c as S}from"./dialog-CRX86v4K.js";import{I as d}from"./input-CexWGnSF.js";import{B as p}from"./button-B0Vu6fYc.js";import{L as a}from"./label-Cbt1RuJE.js";import{c as L}from"./utils-CBfrqCZ4.js";import"./index-CNfCCqky.js";import"./createLucideIcon-5xhtDGCO.js";import"./index-4G6T2Sah.js";import"./index-DfbWU6pQ.js";import"./index-C4EWm361.js";import"./index-BJdNYCPJ.js";const x=[{label:"Functional",color:"bg-green-500"},{label:"Needs Boot / Pending Check",color:"bg-orange-500"},{label:"Defective",color:"bg-red-500"},{label:"Under Maintenance",color:"bg-yellow-500"},{label:"Needs Upgrade",color:"bg-blue-500"},{label:"For Disposal",color:"bg-gray-500"}],M=["Working","Defective","Needs Upgrade","Under Maintenance","Not Present"],c=["Processor","RAM","Storage","GPU","Motherboard"];function G(){const{rooms:u}=C().props,[g,h]=l.useState(!1),{data:t,setData:n,post:j,processing:b,errors:r,reset:f}=O({unit_code:"",condition:"",room_id:"",...c.reduce((o,i)=>(o[`${i.toLowerCase()}_condition`]="",o[`${i.toLowerCase()}_remark`]="",o),{})}),v=o=>{const i=x.find(s=>s.label.toLowerCase()===o.toLowerCase());return i?i.color:"bg-muted"},_=o=>{o.preventDefault(),j("/admin/system-units",{onSuccess:()=>{f(),h(!1)}})},[m,N]=l.useState("");return l.useEffect(()=>{const o=u.find(i=>`ROOM ${i.room_number}`.toLowerCase()===m.toLowerCase());o?n("room_id",o.id):n("room_id","")},[m]),l.useEffect(()=>{const o=c.map(i=>t[`${i.toLowerCase()}_condition`]);o.includes("Defective")?n("condition","Defective"):o.includes("Needs Upgrade")?n("condition","Needs Upgrade"):o.includes("Under Maintenance")?n("condition","Under Maintenance"):o.includes("Not Present")?n("condition","Needs Upgrade"):n("condition","Functional")},c.map(o=>t[`${o.toLowerCase()}_condition`])),e.jsxs($,{open:g,onOpenChange:h,children:[e.jsx(D,{asChild:!0,children:e.jsx(p,{className:"bg-[hsl(142,31%,51%)] hover:bg-[hsl(142,31%,45%)] text-white font-medium",children:"Add Unit"})}),e.jsxs(w,{className:"sm:max-w-xl max-h-[90vh] overflow-y-auto",children:[e.jsx(U,{children:e.jsx(S,{children:"Add System Unit"})}),e.jsxs("form",{onSubmit:_,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"room_number",children:"Room"}),e.jsx(d,{id:"room_number",list:"room-options",value:m,onChange:o=>N(o.target.value),placeholder:"Search or select room"}),e.jsx("datalist",{id:"room-options",children:u.map(o=>e.jsx("option",{value:`ROOM ${o.room_number}`},o.id))}),r.room_id&&e.jsx("p",{className:"text-sm text-red-500",children:r.room_id})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"unit_code",children:"Unit Code"}),e.jsx(d,{id:"unit_code",name:"unit_code",value:t.unit_code,onChange:o=>n("unit_code",o.target.value),placeholder:"01",required:!0}),r.unit_code&&e.jsx("p",{className:"text-sm text-red-500",children:r.unit_code})]}),e.jsxs("div",{children:[e.jsx(a,{children:"Components & Conditions"}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:c.map(o=>{const i=o.toLowerCase();return e.jsxs("div",{children:[e.jsx(a,{htmlFor:`${i}_condition`,children:o}),e.jsx(d,{id:`${i}_condition`,list:`${i}-condition-options`,value:t[`${i}_condition`]||"",onChange:s=>n(`${i}_condition`,s.target.value),placeholder:`Select ${o} condition`}),e.jsx("datalist",{id:`${i}-condition-options`,children:M.map(s=>e.jsx("option",{value:s},s))}),t[`${i}_condition`]==="Defective"&&e.jsxs("div",{className:"mt-1",children:[e.jsx(a,{htmlFor:`${i}_remark`,children:"Describe the problem"}),e.jsx(d,{id:`${i}_remark`,value:t[`${i}_remark`],onChange:s=>n(`${i}_remark`,s.target.value),placeholder:`e.g. ${o} overheating`})]})]},o)})})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"condition",children:"Overall Condition"}),e.jsx(d,{id:"condition",list:"condition-options",value:t.condition,onChange:o=>n("condition",o.target.value),placeholder:"Overall PC condition"}),e.jsx("datalist",{id:"condition-options",children:x.map(o=>e.jsx("option",{value:o.label},o.label))}),t.condition&&e.jsxs("div",{className:"mt-1 text-sm flex items-center gap-2",children:[e.jsx("span",{className:L("inline-block w-3 h-3 rounded-full",v(t.condition))}),e.jsx("span",{className:"capitalize",children:t.condition})]}),r.condition&&e.jsx("p",{className:"text-sm text-red-500",children:r.condition})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(p,{type:"submit",disabled:b,className:"bg-[hsl(142,31%,51%)] hover:bg-[hsl(142,31%,45%)] text-white font-medium",children:"Submit"})})]})]})]})}export{G as default};
