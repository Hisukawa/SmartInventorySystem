import{b as x,r as m,j as e,H as p,c as h}from"./app-D-pK8PyR.js";import{S as i}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{S as u,a as f,b as j,c as y}from"./index-p330ADWp.js";import{N as g}from"./Notification-C6elp31H.js";import{B as N,a as b,b as v,c as n,d as w}from"./breadcrumb-BibrNlxV.js";import{A as S}from"./app-sidebar-Dxme39xN.js";import{T as B}from"./TopNavBar-BjmIPgLq.js";import"./createLucideIcon-CRkh4gDi.js";import"./index-CZN5TzR8.js";import"./index-DhCr2nDb.js";import"./index-BWB5gG2E.js";import"./button-BHMfL8Wb.js";import"./input-mrXRVT8I.js";import"./index-8Io04lE_.js";import"./dropdown-menu-Jbra3c4d.js";import"./index-Cdxd3jUw.js";import"./chevron-right-Bjn3_Jhk.js";import"./index-C7hSRA-w.js";import"./sparkles-3ahqg5cP.js";import"./user-CxfHRbel.js";import"./cpu-gnhQy1OD.js";import"./keyboard-CPoqRXoF.js";import"./hard-drive-C8D7cwCR.js";function Q(){const{histories:o}=x().props,[r,d]=m.useState(o.data||[]),[l,H]=m.useState(o),c=async t=>{i.fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(async s=>{if(s.isConfirmed)try{await h.delete(`/room-history/${t}`),d(r.filter(a=>a.id!==t)),i.fire({title:"Deleted!",text:"History has been deleted.",icon:"success",timer:1e3,showConfirmButton:!1})}catch(a){console.error("Error deleting history:",a),i.fire("Error!","Failed to delete history.","error")}})};return e.jsxs(u,{children:[e.jsx(S,{}),e.jsxs(f,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 border-b bg-white",children:[e.jsx(j,{}),e.jsx(y,{orientation:"vertical",className:"h-6 mx-3"}),e.jsx(N,{children:e.jsx(b,{children:e.jsxs(v,{children:[e.jsx(n,{href:"#",children:"Reports"}),e.jsx(w,{}),e.jsx(n,{href:"#","aria-current":"page",className:"font-semibold text-foreground",children:"Room History"})]})})}),e.jsx("div",{className:"flex-1"}),e.jsx(g,{})]}),e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsx(B,{}),e.jsx(p,{title:"Room Histories"}),e.jsx("h1",{className:"text-2xl text-center font-bold mt-5 mb-4",children:"Room Activity History"}),r.length===0?e.jsx("p",{className:"text-center mt-10",children:"No room activity found."}):e.jsxs("div",{className:"overflow-x-auto bg-white shadow rounded-lg",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500",children:"#"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500",children:"User Name"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500",children:"Role"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500",children:"Action"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500",children:"Old Value"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500",children:"New Value"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500",children:"Date & Time"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500",children:"Manage"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:s+1}),e.jsx("td",{className:"px-4 py-2",children:t.user_name}),e.jsx("td",{className:"px-4 py-2",children:t.role}),e.jsx("td",{className:"px-4 py-2",children:t.action}),e.jsx("td",{className:"px-4 py-2",children:t.old_value||"-"}),e.jsx("td",{className:"px-4 py-2",children:t.new_value||"-"}),e.jsx("td",{className:"px-4 py-2",children:new Date(t.created_at).toLocaleString()}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("button",{className:"px-2 py-1 text-sm text-red-600 hover:underline",onClick:()=>c(t.id),children:"Delete"})})]},t.id))})]}),l.links&&e.jsx("div",{className:"flex justify-center mt-4 space-x-2 mb-3",children:l.links.map((t,s)=>e.jsx("button",{disabled:!t.url,className:`px-3 py-1 rounded ${t.active?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,onClick:()=>{t.url&&(window.location.href=t.url)},dangerouslySetInnerHTML:{__html:t.label}},s))})]})]})]})]})}export{Q as default};
