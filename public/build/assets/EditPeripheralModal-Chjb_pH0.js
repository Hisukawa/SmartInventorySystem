import{u as f,r as h,j as e}from"./app-DuLcFkRW.js";import{D as N,a as C,b as y,c as S}from"./dialog-C7lXbbxl.js";import{L as n}from"./label-D4JzFQz_.js";import{I as s}from"./input-DnbGSlp8.js";import{B as F}from"./button-QxhSem_q.js";import{c as w}from"./utils-Bmfql_KC.js";import{S as D}from"./sweetalert2.esm.all-BQIkj5Wb.js";import"./index-pdbjQdbT.js";import"./index-3Q2Bja-H.js";import"./index-7XltJxxN.js";import"./index-ByCnq4qr.js";const p=[{label:"Functional",color:"bg-green-500"},{label:"Defective",color:"bg-red-500"},{label:"Intermittent Issue",color:"bg-yellow-500"},{label:"Needs Cleaning",color:"bg-blue-500"},{label:"For Replacement",color:"bg-orange-500"},{label:"For Disposal",color:"bg-gray-500"}];function z({peripheral:t,rooms:c=[],units:a=[],onClose:m}){console.log("Units from Laravel:",a);const{data:o,setData:r,put:b,processing:j,errors:l}=f({type:t?.type||"",brand:t?.brand||"",model:t?.model||"",serial_number:t?.serial_number||"",condition:t?.condition||"",room_id:t?.room_id||"",unit_id:t?.unit_id||""}),[u,x]=h.useState([]);h.useEffect(()=>{if(o.room_id){const i=a.filter(d=>String(d.room_id)===String(o.room_id));x(i),i.find(d=>String(d.id)===String(o.unit_id))||r("unit_id","")}else x([]),r("unit_id","")},[o.room_id,a]);const g=i=>{i.preventDefault(),b(route("peripherals.update",t.id),{onSuccess:()=>{D.fire({icon:"success",title:"Updated!",text:"Peripheral updated successfully.",timer:2e3,showConfirmButton:!1}),m()}})},_=i=>{const d=p.find(v=>v.label.toLowerCase()===i.toLowerCase());return d?d.color:"bg-gray-300"};return e.jsx(N,{open:!0,onOpenChange:i=>!i&&m(),children:e.jsxs(C,{className:"max-w-lg max-h-[80vh] overflow-y-auto",children:[e.jsx(y,{children:e.jsxs(S,{children:["Edit Peripheral â€“ ",t?.peripheral_code]})}),e.jsxs("form",{onSubmit:g,className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"type",children:"Type"}),e.jsx(s,{id:"type",value:o.type,onChange:i=>r("type",i.target.value),placeholder:"e.g. Keyboard, Mouse, Monitor"}),l.type&&e.jsx("p",{className:"text-sm text-red-500",children:l.type})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"serial_number",children:"Serial Number"}),e.jsx(s,{id:"serial_number",value:o.serial_number,onChange:i=>r("serial_number",i.target.value),placeholder:"Serial Number"}),l.serial_number&&e.jsx("p",{className:"text-sm text-red-500",children:l.serial_number})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"condition",children:"Condition"}),e.jsxs("select",{id:"condition",className:"w-full border rounded-md p-2",value:o.condition,onChange:i=>r("condition",i.target.value),children:[e.jsx("option",{value:"",children:"Select Condition"}),p.map(i=>e.jsx("option",{value:i.label,children:i.label},i.label))]}),o.condition&&e.jsxs("div",{className:"mt-1 text-sm flex items-center gap-2",children:[e.jsx("span",{className:w("inline-block w-3 h-3 rounded-full",_(o.condition))}),e.jsx("span",{className:"capitalize",children:o.condition})]}),l.condition&&e.jsx("p",{className:"text-sm text-red-500",children:l.condition})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"room_id",children:"Room"}),e.jsxs("select",{id:"room_id",className:"w-full border rounded-md p-2",value:o.room_id,onChange:i=>r("room_id",i.target.value),children:[e.jsx("option",{value:"",children:"Select Room"}),c.length>0?c.map(i=>e.jsx("option",{value:i.id,children:i.room_number},i.id)):e.jsx("option",{disabled:!0,children:"No rooms available"})]}),l.room_id&&e.jsx("p",{className:"text-sm text-red-500",children:l.room_id})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"unit_id",children:"Unit"}),e.jsxs("select",{id:"unit_id",className:"w-full border rounded-md p-2",value:o.unit_id,onChange:i=>r("unit_id",i.target.value),disabled:!o.room_id,children:[e.jsx("option",{value:"",children:"Select Unit"}),u.length>0?u.map(i=>e.jsx("option",{value:i.id,children:i.unit_code},i.id)):e.jsx("option",{disabled:!0,children:"No units available"})]}),l.unit_id&&e.jsx("p",{className:"text-sm text-red-500",children:l.unit_id})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"brand",children:"Brand"}),e.jsx(s,{id:"brand",value:o.brand,onChange:i=>r("brand",i.target.value),placeholder:"Enter brand"}),l.brand&&e.jsx("p",{className:"text-sm text-red-500",children:l.brand})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"model",children:"Model"}),e.jsx(s,{id:"model",value:o.model,onChange:i=>r("model",i.target.value),placeholder:"Enter model"}),l.model&&e.jsx("p",{className:"text-sm text-red-500",children:l.model})]}),e.jsx(F,{type:"submit",disabled:j,children:"Update"})]})]})})}export{z as default};
