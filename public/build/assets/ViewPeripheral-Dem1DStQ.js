import{r as c,j as e,H as B}from"./app-CWEMxtsh.js";import{A as L}from"./app-sidebar-B2fy3xEO.js";import{S as A,a as O,b as Q,c as $}from"./index-CHpEINxq.js";import{B as j}from"./button-DGsQDYeF.js";import{D,a as U,c as q}from"./dialog-DJezg2NZ.js";import{Q as p}from"./index-DdsCTNOr.js";import{B as I,a as P,b as T,c as l,d as w}from"./breadcrumb-Byqpuwis.js";import"./chevron-right-TMKxdGpT.js";import"./index-hGyW6E1r.js";import"./index-mtsx_XWt.js";import"./dropdown-menu-BWFnmYzf.js";import"./index-BpmniWEG.js";import"./index--U70LhPC.js";import"./input-tl2nyNtd.js";import"./index-BlWkWrIw.js";import"./index-C-J_2ZjC.js";function te({peripheral:s}){const[i,m]=c.useState(""),[x,h]=c.useState(""),[b,n]=c.useState(!1),f=o=>{const d=`${window.location.origin}/${o.qr_code_path.toLowerCase()}`;m(d),h(o.room?.room_number||"N/A"),n(!1)},N=async()=>{i&&(await navigator.clipboard.writeText(i),n(!0),setTimeout(()=>n(!1),2e3))},v=()=>{const o=document.getElementById("qr-download");if(!o)return;const d=new XMLSerializer().serializeToString(o),a=document.createElement("canvas"),C=a.getContext("2d"),g=window.URL||window.webkitURL||window,t=new Image,R=new Blob([d],{type:"image/svg+xml;charset=utf-8"}),u=g.createObjectURL(R);t.onload=()=>{a.width=t.width,a.height=t.height,C.drawImage(t,0,0),g.revokeObjectURL(u);const _=a.toDataURL("image/png").replace("image/png","image/octet-stream"),r=document.createElement("a"),k=x||"N/A",S=s.unit_code||"N/A",y=s.peripheral_code||"N/A";r.download=`ROOM-${k}_${S}_${y}-QR.png`,r.href=_,document.body.appendChild(r),r.click(),document.body.removeChild(r)},t.src=u};return e.jsxs(A,{children:[e.jsx(L,{}),e.jsxs(O,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 border-b bg-white",children:[e.jsx(Q,{}),e.jsx($,{orientation:"vertical",className:"h-6 mx-3"}),e.jsx(I,{children:e.jsx(P,{children:e.jsxs(T,{children:[e.jsx(l,{href:"#",children:"Assets"}),e.jsx(w,{}),e.jsx(l,{href:"/admin/peripherals",children:"Peripherals"}),e.jsx(w,{}),e.jsx(l,{href:`/admin/peripherals/${s.id}`,"aria-current":"page",className:"font-semibold text-foreground",children:"View Peripheral"})]})})})]}),e.jsx(B,{title:`View ${s.peripheral_code}`}),e.jsxs("main",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Peripheral Information"}),e.jsxs("div",{className:"bg-white shadow rounded p-6 max-w-3xl mx-auto grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Peripheral Code:"})," ",s.peripheral_code]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Type:"})," ",s.type]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Serial Number:"})," ",s.serial_number||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Condition:"})," ",s.condition]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Room:"})," ",s.room?`ROOM ${s.room.room_number}`:"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Unit Code:"})," ",s.unit_code]}),e.jsxs("div",{className:"col-span-2 flex flex-col items-center mt-4",children:[s.qr_code_path?e.jsx("div",{className:"w-32 h-32 bg-white p-2 rounded cursor-pointer",onClick:()=>f(s),children:e.jsx(p,{id:"qr-download",value:`${window.location.origin}/${s.qr_code_path.toLowerCase()}`,size:128})}):e.jsx("span",{className:"mt-2 text-sm text-muted-foreground",children:"No QR Available"}),e.jsx("span",{className:"mt-2 text-sm text-muted-foreground",children:"Click QR to enlarge"})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx(j,{variant:"secondary",onClick:()=>window.history.back(),children:"Go Back"})}),e.jsx(D,{open:!!i,onOpenChange:()=>{m(""),h(""),n(!1)},children:e.jsxs(U,{className:"max-w-sm text-center",children:[e.jsxs(q,{children:["ROOM ",x]}),e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"inline-block p-4 bg-white rounded cursor-pointer",onClick:o=>{o.stopPropagation(),N()},children:[e.jsx(p,{id:"qr-download",value:i,size:200}),e.jsx("p",{className:"text-xs mt-2 text-muted-foreground",children:"Click QR to copy link"})]}),b&&e.jsx("p",{className:"text-green-600 text-sm text-center mt-1",children:"Copied to clipboard!"}),e.jsx(j,{className:"mt-4",onClick:v,children:"Download QR"})]})]})})]})]})]})}export{te as default};
