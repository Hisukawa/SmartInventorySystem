import{r as t,j as e,H as E,a as o}from"./app-BIjSPbTs.js";import{C as M,b as H,c as P,a as q}from"./card-DYcyojCr.js";import{T as D,a as z,b,c as r,d as L,e as n}from"./table-D1w6lbLV.js";import{B as c}from"./button-zoQErkYR.js";import{S as i}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{S as R,a as V,b as U,c as $}from"./avatar-KF4Ic1q3.js";import{A as F}from"./app-sidebar-x6sI6Tl0.js";import{N as Y}from"./Notification-CVUmNKwE.js";import{B as G,a as J,b as K,c as O}from"./breadcrumb-DeHw0c_A.js";import{I as y}from"./input-Bd_sEB19.js";import{T as Q}from"./textarea-BS4e8Twv.js";import{S as W,a as X,b as Z,c as ee,d as se}from"./select-keRbX78U.js";import{c as te}from"./createLucideIcon-Bjp0wylh.js";import{P as ne}from"./pencil-DIYKGQLN.js";import{T as ae}from"./trash-2-Dm7oG2dy.js";import"./utils-CBfrqCZ4.js";import"./index-UR7owYEk.js";import"./index-JGFnjXQz.js";import"./index-CULORmfT.js";import"./index-C14JqLgY.js";import"./index-R7N4lbby.js";import"./dropdown-menu-CJfZ9yh7.js";import"./index-VxKqmO_x.js";import"./chevron-right-B6fVEe24.js";import"./index-D77uxBlS.js";import"./index-D2IJIATQ.js";import"./sparkles-CtYQg3C3.js";import"./bell-BzbtZq5b.js";import"./keyboard-xp-GjzOw.js";import"./boxes-B8l1w8L3.js";import"./users-x99q3xsF.js";import"./user-CUglbayW.js";import"./chevron-down-Cs6P9ygd.js";import"./index-DUiIT1ee.js";/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],le=te("megaphone",re);function Ve({announcements:N,rooms:C=[]}){const[S,T]=t.useState(N.data||[]),[w,A]=t.useState(N.links||[]),[d,m]=t.useState(""),[u,h]=t.useState(""),[x,p]=t.useState(""),[j,f]=t.useState(""),[l,v]=t.useState(null),_=s=>{s.preventDefault(),l?o.put(`/admin/announcements/${l}`,{title:d,message:u,room_id:x||null,scheduled_date:j||null},{onSuccess:()=>{g(),i.fire("Updated!","Announcement updated successfully.","success")}}):o.post("/admin/announcement",{title:d,message:u,room_id:x||null,scheduled_date:j||null},{onSuccess:()=>{g(),i.fire("Posted!","Announcement created successfully.","success")}})},g=()=>{m(""),h(""),p(""),f(""),v(null)},B=s=>{v(s.id),m(s.title),h(s.message),p(s.room_id?.toString()||""),f(s.scheduled_date||""),window.scrollTo({top:0,behavior:"smooth"})},k=s=>{i.fire({title:"Are you sure?",text:"This announcement will be deleted permanently.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!"}).then(a=>{a.isConfirmed&&o.delete(`/admin/announcements/${s}`,{onSuccess:()=>{i.fire("Deleted!","Announcement deleted successfully.","success")}})})},I=s=>{s&&o.get(s,{},{preserveScroll:!0,preserveState:!0,onSuccess:a=>{T(a.props.announcements.data),A(a.props.announcements.links)}})};return e.jsxs(R,{children:[e.jsx(E,{children:e.jsx("title",{children:"Announcements"})}),e.jsx(F,{}),e.jsxs(V,{children:[e.jsx("header",{className:"sticky top-0 z-20 bg-white border-b px-6 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{}),e.jsx($,{orientation:"vertical",className:"h-6 mx-3"}),e.jsx(G,{children:e.jsx(J,{children:e.jsx(K,{children:e.jsx(O,{href:"/admin/announcement","aria-current":"page",className:"font-semibold text-foreground",children:"Announcements"})})})}),e.jsx("div",{className:"flex-1"}),e.jsx(Y,{})]})}),e.jsx("main",{className:"w-full px-4 sm:px-6 py-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[" ",e.jsx("h1",{className:"text-2xl font-semibold",children:"Announcements"}),e.jsxs(M,{className:"rounded-2xl shadow-md bg-white",children:[e.jsxs(H,{className:"flex items-center gap-2 border-b pb-3",children:[e.jsx(le,{className:"w-6 h-6 text-teal-600"}),e.jsx(P,{className:"text-xl font-semibold",children:l?"Edit Announcement":"Make a New Announcement"})]}),e.jsx(q,{className:"pt-4",children:e.jsxs("form",{onSubmit:_,className:"space-y-4",children:[e.jsx(y,{placeholder:"Enter announcement title",value:d,onChange:s=>m(s.target.value),required:!0}),e.jsx(Q,{placeholder:"Enter announcement message",value:u,onChange:s=>h(s.target.value),rows:4,required:!0}),e.jsxs(W,{onValueChange:p,value:x,children:[e.jsx(X,{children:e.jsx(Z,{placeholder:"Select a room"})}),e.jsx(ee,{children:C.map(s=>e.jsx(se,{value:s.id.toString(),children:s.room_number},s.id))})]}),e.jsx(y,{type:"date",value:j,onChange:s=>f(s.target.value),required:!0}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(c,{type:"submit",className:"bg-[hsl(142,31%,51%)] hover:bg-[hsl(142,31%,45%)] text-white",children:l?"Update Announcement":"Post Announcement"}),l&&e.jsx(c,{type:"button",onClick:g,variant:"outline",children:"Cancel"})]})]})})]}),e.jsx("div",{className:"overflow-x-auto rounded-lg shadow-lg w-full",children:e.jsxs(D,{className:"min-w-[1100px] w-full bg-white",children:[" ",e.jsx(z,{children:e.jsxs(b,{className:"bg-[hsl(142,34%,85%)] text-[hsl(142,34%,25%)] hover:bg-[hsl(142,34%,80%)] h-12",children:[e.jsx(r,{className:"w-[15%]",children:"Title"}),e.jsx(r,{className:"w-[35%]",children:"Message"}),e.jsx(r,{className:"w-[15%]",children:"Room"}),e.jsx(r,{className:"w-[15%]",children:"Scheduled Date"}),e.jsx(r,{className:"w-[15%]",children:"Posted By"}),e.jsx(r,{className:"w-[15%] text-right",children:"Actions"})]})}),e.jsx(L,{children:S.length>0?S.map(s=>e.jsxs(b,{className:"h-14",children:[e.jsx(n,{className:"font-medium",children:s.title}),e.jsx(n,{className:"whitespace-pre-line",children:s.message}),e.jsx(n,{children:s.room?.room_number||"—"}),e.jsx(n,{children:s.scheduled_date||"—"}),e.jsx(n,{children:s.admin?.name||"Admin"}),e.jsxs(n,{className:"text-right flex gap-2 justify-end",children:[e.jsxs(c,{size:"sm",variant:"outline",onClick:()=>B(s),className:"flex items-center gap-1",children:[e.jsx(ne,{className:"w-4 h-4"})," Edit"]}),e.jsxs(c,{size:"sm",variant:"destructive",onClick:()=>k(s.id),className:"flex items-center gap-1",children:[e.jsx(ae,{className:"w-4 h-4"})," Delete"]})]})]},s.id)):e.jsx(b,{children:e.jsx(n,{colSpan:6,className:"text-center text-gray-500 py-6",children:"No announcements yet."})})})]})}),w.length>0&&e.jsx("div",{className:"flex justify-center gap-2 mt-4 flex-wrap",children:w.map((s,a)=>e.jsx(c,{size:"sm",variant:s.active?"default":"outline",onClick:()=>I(s.url),disabled:!s.url,dangerouslySetInnerHTML:{__html:s.label}},a))})]})})]})]})}export{Ve as default};
