import{b as Q,r as i,j as e,H as D}from"./app-BvBd1GnC.js";import{A as _}from"./app-sidebar-CXPjgdp6.js";import{S as $,a as L,b as T,c as I}from"./avatar-DqCZNyzw.js";import{B as f}from"./button-CdkOSgzJ.js";import{Q as b}from"./index-DywMcWXv.js";import{B as A,a as H,b as M,c as u,d as q}from"./breadcrumb-CV0RqJMr.js";import{D as V,a as U,b as P,c as G}from"./dialog-D2RyNaYZ.js";import"./dropdown-menu-BUQvar8H.js";import"./createLucideIcon-Cv1oO-Fl.js";import"./index-DehNsO9t.js";import"./index-BFcwglcI.js";import"./index-LbrfRVPk.js";import"./index-DyOr2Q4q.js";import"./index-Q3iTcOAL.js";import"./utils-CBfrqCZ4.js";import"./chevron-right-Cs5U5o47.js";import"./sparkles-D46oAnC7.js";import"./bell-DkAvZl62.js";import"./keyboard-NQiNEgJp.js";import"./boxes-BwU1BbTo.js";import"./users-BEBo_sYW.js";import"./user-DeS9jc4o.js";import"./chevron-down-aIWWTnPz.js";import"./input-BwOZc7Zq.js";import"./index-DvOpYEn3.js";import"./index-CoVr6EPs.js";import"./index-Cb-Ljacu.js";function ve(){const{props:S}=Q(),t=S.equipment,[w,h]=i.useState(!1),[v,g]=i.useState(!1),[n,N]=i.useState(""),[o,R]=i.useState(""),[a,C]=i.useState(""),c=i.useRef(null);if(!t)return e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("p",{className:"text-lg text-gray-500",children:"Loading equipment..."})});const d=`${window.location.origin}/equipment/${t.equipment_code}`,k=(l,j,m)=>{N(l),C(j),R(m),h(!0)},y=async()=>{n&&(await navigator.clipboard.writeText(n),g(!0),setTimeout(()=>g(!1),2e3))},z=()=>{if(!c.current)return;const l=c.current.querySelector("svg"),m=new XMLSerializer().serializeToString(l),B=new Blob([m],{type:"image/svg+xml;charset=utf-8"}),E=URL.createObjectURL(B),p=new Image;p.onload=()=>{const s=document.createElement("canvas"),r=s.getContext("2d");s.width=220,s.height=260,r.fillStyle="#fff",r.fillRect(0,0,s.width,s.height),r.drawImage(p,10,10,200,200),r.fillStyle="#000",r.font="bold 16px sans-serif",r.textAlign="center",r.fillText(`ROOM ${a} - ${o}`,s.width/2,235);const O=s.toDataURL("image/png"),x=document.createElement("a");x.href=O,x.download=`ROOM-${a}_${o}-QR.png`,x.click()},p.src=E};return e.jsxs($,{children:[e.jsx(_,{}),e.jsxs(L,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 border-b bg-white",children:[e.jsx(T,{}),e.jsx(I,{orientation:"vertical",className:"h-6 mx-3"}),e.jsx(A,{children:e.jsx(H,{children:e.jsxs(M,{children:[e.jsx(u,{href:"#","aria-current":"page",children:"Assets"}),e.jsx(q,{}),e.jsx(u,{href:"/equipments",children:"Equipments"}),e.jsx(q,{}),e.jsx(u,{href:`${d}`,"aria-current":"page",className:"font-semibold text-foreground",children:"View Equipment"})]})})})]}),e.jsx(D,{title:`View ${t.equipment_code}`}),e.jsxs("main",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Equipment Information"}),e.jsxs("div",{className:"bg-white shadow rounded p-6 max-w-3xl mx-auto grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Equipment Code:"})," ",t.equipment_code]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Equipment Name:"})," ",t.equipment_name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Type:"})," ",t.type]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Brand:"})," ",t.brand||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Condition:"})," ",t.condition]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Room Number:"})," ",t.room?.room_number]}),e.jsxs("div",{className:"col-span-2 flex flex-col items-center mt-4 cursor-pointer",onClick:()=>k(d,t.room?.room_number,t.equipment_code),children:[e.jsx(b,{value:d,size:128}),e.jsx("span",{className:"mt-2 text-sm text-muted-foreground",children:"Click QR code to expand"})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx(f,{variant:"secondary",onClick:()=>window.history.back(),children:"Go Back"})}),e.jsx(V,{open:w,onOpenChange:h,children:e.jsxs(U,{className:"max-w-sm mx-auto",children:[e.jsx(P,{children:e.jsxs(G,{children:["QR Code - ROOM ",a," -"," ",o]})}),e.jsxs("div",{className:"flex flex-col items-center",ref:c,children:[e.jsx(b,{id:"qr-download",value:n,size:200,className:"cursor-pointer",onClick:y}),e.jsx("p",{className:"text-xs mt-2 text-muted-foreground",children:"Click QR to copy link"}),v&&e.jsx("p",{className:"text-green-600 text-sm text-center mt-1",children:"Copied to clipboard!"}),e.jsx(f,{className:"mt-4",onClick:z,children:"Download QR"})]})]})})]})]})]})}export{ve as default};
