import{r as o,j as e,H as D,a as _}from"./app-CIkTpY6h.js";import{C as P,a as U}from"./card-CzcSgU6Z.js";import{D as w,a as F,b as I,c as M,d as T}from"./dialog-BBAqj5CN.js";import{S as q,a as A,b as E,a0 as B}from"./index-B7G2ZUjb.js";import{B as R,a as $,b as L,c as H}from"./breadcrumb-DwJEa0M-.js";import{A as W}from"./app-sidebar-B2Jjt4jQ.js";import"./input-BpDz82gW.js";import"./index-BQxaN_px.js";import"./index-DVsC1RVt.js";import"./index-D0woING1.js";function ee({room:j,equipments:g=[],systemUnits:b=[],peripherals:f=[]}){const[t,y]=o.useState(null),[c,p]=o.useState(""),[n,v]=o.useState(""),[l,N]=o.useState("All"),[r,i]=o.useState(1),m=10,x=o.useMemo(()=>{let s=[...g,...b,...f];if(l!=="All"&&(s=s.filter(a=>a.type===l)),n.trim()!==""){const a=n.toLowerCase();s=s.filter(d=>(d.name||d.equipment_code||d.unit_code||d.peripheral_code).toLowerCase().includes(a))}return s},[g,b,f,l,n]),u=Math.ceil(x.length/m),C=o.useMemo(()=>{const s=(r-1)*m;return x.slice(s,s+m)},[x,r]),S=s=>{y(s),p(s.condition||"Good")},h=()=>{y(null),p("")},k=async()=>{if(t)try{let s=t.type==="Equipment"?"equipments":t.type==="System Unit"?"system-units":"peripherals";await _.put(`/${s}/${t.id}`,{condition:c}),t.condition=c,h()}catch(s){console.error("Failed to update condition:",s)}};return e.jsxs(q,{children:[e.jsx(D,{children:e.jsx("title",{children:j?.room_path||"Room Dashboard"})}),e.jsx(W,{}),e.jsxs(A,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 border-b bg-white",children:[e.jsx(E,{}),e.jsx(B,{orientation:"vertical",className:"h-6 mx-3"}),e.jsx(R,{children:e.jsx($,{children:e.jsx(L,{children:e.jsx(H,{href:"/admin/rooms",className:"font-semibold text-foreground",children:"Dashboard"})})})})]}),e.jsxs("main",{className:"m-10",children:[e.jsx("h1",{className:"text-2xl sm:text-2xl font-bold mb-4",children:j?.room_path||"Room"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("select",{className:"border rounded p-2",value:l,onChange:s=>{N(s.target.value),i(1)},children:[e.jsx("option",{value:"All",children:"All Types"}),e.jsx("option",{value:"Equipment",children:"Equipment"}),e.jsx("option",{value:"System Unit",children:"System Unit"}),e.jsx("option",{value:"Peripheral",children:"Peripheral"})]}),e.jsx("input",{type:"text",placeholder:"Search by name or code...",value:n,onChange:s=>{v(s.target.value),i(1)},className:"border rounded p-2 flex-1"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:C.map(s=>{let a="";switch(s.condition){case"Functional":case"Working":a="text-green-600";break;case"Under Maintenance":a="text-yellow-600";break;case"Defective":a="text-red-600";break;case"Needs Upgrade":a="text-blue-600";break;case"For Disposal":a="text-gray-600";break;default:a="text-gray-600"}return e.jsx(P,{className:"cursor-pointer",onClick:()=>S(s),children:e.jsxs(U,{className:"mt-5",children:[e.jsx("h2",{className:"font-semibold text-sm sm:text-lg",children:s.name||s.equipment_code||s.unit_code||s.peripheral_code||"Unnamed Item"}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600",children:["Type: ",s.type]}),s.room_path&&e.jsxs("p",{className:"text-xs sm:text-sm text-gray-500",children:["Room: ",s.room_path]}),e.jsxs("p",{className:`mt-1 font-medium text-xs sm:text-sm ${a}`,children:["Status: ",s.condition||"Good"]})]})},`${s.type}-${s.id}`)})}),u>1&&e.jsxs("div",{className:"flex justify-center mt-6 gap-2",children:[e.jsx("button",{className:"px-3 py-1 border rounded disabled:opacity-50",disabled:r===1,onClick:()=>i(r-1),children:"Previous"}),e.jsxs("span",{className:"px-3 py-1",children:["Page ",r," of ",u]}),e.jsx("button",{className:"px-3 py-1 border rounded disabled:opacity-50",disabled:r===u,onClick:()=>i(r+1),children:"Next"})]}),t&&e.jsx(w,{open:!!t,onOpenChange:h,children:e.jsxs(F,{children:[e.jsx(I,{children:e.jsxs(M,{children:["Edit Condition -"," ",t.name||t.equipment_code||t.unit_code||t.peripheral_code||"Unnamed Item"]})}),e.jsx("div",{className:"p-4",children:e.jsxs("select",{className:"border rounded p-2 w-full",value:c,onChange:s=>p(s.target.value),children:[e.jsx("option",{value:"Functional",children:"Functional"}),e.jsx("option",{value:"Working",children:"Working"}),e.jsx("option",{value:"Under Maintenance",children:"Under Maintenance"}),e.jsx("option",{value:"Defective",children:"Defective"}),e.jsx("option",{value:"Needs Upgrade",children:"Needs Upgrade"}),e.jsx("option",{value:"For Disposal",children:"For Disposal"})]})}),e.jsxs(T,{children:[e.jsx("button",{onClick:k,className:"bg-blue-500 text-white px-4 py-2 rounded",children:"Save"}),e.jsx("button",{onClick:h,className:"ml-2 bg-gray-300 text-black px-4 py-2 rounded",children:"Cancel"})]})]})})]})]})]})}export{ee as default};
