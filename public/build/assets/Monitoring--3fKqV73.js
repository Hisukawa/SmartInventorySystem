import{r as t,j as e,H as k,c as y}from"./app-X2XQLKS3.js";import{S as M,a as E,b as Z,c as z}from"./avatar-CEgLhWWb.js";import{A as q}from"./app-sidebar-DleAGgmT.js";import{N as G}from"./Notification-B4M9gk23.js";import{C as _,a as w,b as S,c as C}from"./card-wISa5VZm.js";import{B as J,a as K,b as Q,c as U}from"./breadcrumb-BQWS_-1y.js";import{B as V}from"./badge-C-RHZI17.js";import{T as W,f as X,a as Y,b as o,c as i,d as ee,e as a}from"./table-gmNX_0J6.js";import{I as F}from"./input-Cq2JkAbx.js";import{B as g}from"./button-C62_EHzm.js";import{F as se}from"./funnel-C_-KVArY.js";import"./createLucideIcon-0p_GVwJf.js";import"./index-qYNOf9mi.js";import"./utils-CBfrqCZ4.js";import"./index-iDKACU5a.js";import"./index-CE5EMy0D.js";import"./index-Dz5glkNh.js";import"./index-BhjrTxbN.js";import"./dropdown-menu-BB3Za7hv.js";import"./index-BIgnMwzR.js";import"./chevron-right-D8htQa18.js";import"./index-D_NolL6N.js";import"./index-CDj-ShJ8.js";import"./sparkles-B2sX7EvK.js";import"./bell-Bcj3VjmY.js";import"./keyboard-dEYIgviQ.js";import"./boxes-BWz8K0Ih.js";import"./users-xZXbU29W.js";import"./chevron-down-Ckf9Hflw.js";function qe({children:te}){const[p,A]=t.useState([]),[j,L]=t.useState([]),[I,ae]=t.useState(1),[re,f]=t.useState(1),[n,ie]=t.useState(1),c=10,[d,T]=t.useState(""),[ne,le]=t.useState([]),[m,D]=t.useState(!1),[l,b]=t.useState(""),[P,B]=t.useState([]),[H,$]=t.useState([]),[x,R]=t.useState(""),[h,O]=t.useState(""),[oe,ce]=t.useState(""),[de,me]=t.useState(""),[xe,he]=t.useState([]),v=async()=>{try{const s=await y.get(`/api/admin/rooms-status?page=${I}&per_page=${c}`);A(s.data.data),f(s.data.meta.total_pages)}catch(s){console.error("Failed to fetch rooms:",s)}},u=async()=>{try{const s=await y.get("/admin/faculty-logs",{params:{page:n,search:d,faculty_id:x,room_id:h,log_date:l}});L(s.data.logs.data||[]),f(s.data.logs.last_page||1),s.data.facultyOptions&&B(s.data.facultyOptions),s.data.roomOptions&&$(s.data.roomOptions)}catch(s){console.error("Failed to fetch logs:",s)}};return t.useEffect(()=>{v(),u();const s=setInterval(()=>{v(),u()},5e3);return()=>clearInterval(s)},[n,d,x,h,l]),e.jsxs(M,{children:[e.jsx(k,{children:e.jsx("title",{children:"Dashboard"})}),e.jsx(q,{}),e.jsxs(E,{children:[e.jsx("header",{className:"sticky top-0 z-20 bg-white border-b px-6 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{}),e.jsx(z,{orientation:"vertical",className:"h-6 mx-3"}),e.jsx(J,{children:e.jsx(K,{children:e.jsx(Q,{children:e.jsx(U,{href:"/admin/monitoring","aria-current":"page",className:"font-semibold text-foreground",children:"Monitoring"})})})}),e.jsx("div",{className:"flex-1"}),e.jsx(G,{})]})}),e.jsx("main",{className:"w-full px-6 py-4",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Room Monitoring"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-8",children:[p.length===0&&e.jsx("p",{className:"col-span-full text-center text-gray-500",children:"No rooms found."}),p.map(s=>e.jsxs(_,{className:`rounded-2xl transition-all duration-200 ease-in-out shadow-md 
              hover:scale-[1.02] hover:shadow-lg
              ${s.is_active?"bg-[#59AC77]  border border-green-700 text-white":"bg-[#59AC77]  border border-gray-300 text-gray-900"}`,children:[e.jsxs(w,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(S,{className:`text-lg md:text-xl font-semibold ${s.is_active?"text-white":"text-gray-900"}`,children:s.name}),e.jsx(V,{className:`px-3 py-1 text-xs font-medium rounded-full ${s.is_active?"bg-white text-green-700":"bg-gray-500 text-white"}`,children:s.is_active?"Active":"Inactive"})]}),e.jsx(C,{children:e.jsxs("div",{className:"flex items-center space-x-4",children:[s.is_active&&s.last_scanned_user?.photo?e.jsx("img",{src:s.last_scanned_user.photo,alt:s.last_scanned_user.name,className:"w-20 h-20 rounded-full object-cover border-2 border-green-500"}):e.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 text-sm border-2 border-gray-300",children:"No Photo"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:`font-medium ${s.is_active?"text-white":"text-gray-900"}`,children:s.is_active&&s.last_scanned_user?s.last_scanned_user.name:"No Faculty"}),e.jsx("span",{className:`text-xs ${s.is_active?"text-green-100":"text-gray-600"}`,children:s.is_active&&s.last_scanned_at?new Date(s.last_scanned_at).toLocaleString("en-PH",{timeZone:"Asia/Manila",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"Not yet scanned"})]})]})})]},s.id))]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between w-full mb-4",children:[e.jsxs(g,{className:"flex items-center gap-2 bg-[hsl(142,34%,51%)] text-white border-none hover:bg-[hsl(142,34%,45%)]",onClick:()=>D(!m),children:[e.jsx(se,{className:"w-4 h-4"}),m?"Hide Filters":"Show Filters"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{type:"text",placeholder:"Search by faculty or room...",value:d,onChange:s=>T(s.target.value),className:"w-64"}),e.jsx(g,{onClick:u,className:"bg-[hsl(142,34%,51%)] text-white border-none hover:bg-[hsl(142,34%,45%)]",children:"Search"})]})]}),m&&e.jsxs("div",{className:"flex flex-wrap gap-5 items-end",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1",children:"Faculty"}),e.jsxs("select",{value:x,onChange:s=>R(s.target.value),className:"h-9 w-44 px-2 py-1 text-sm border rounded-md focus:ring-2 focus:ring-[hsl(142,34%,51%)] focus:outline-none",children:[e.jsx("option",{value:"",children:"All"}),P.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1",children:"Room"}),e.jsxs("select",{value:h,onChange:s=>O(s.target.value),className:"h-9 w-44 px-2 py-1 text-sm border rounded-md focus:ring-2 focus:ring-[hsl(142,34%,51%)] focus:outline-none",children:[e.jsx("option",{value:"",children:"All"}),H.map(s=>e.jsx("option",{value:s.id,children:s.room_number},s.id))]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1",children:"Login Date"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{type:"date",value:l,onChange:s=>b(s.target.value),className:"h-9 w-44 text-sm border rounded-md focus:ring-2 focus:ring-[hsl(142,34%,51%)] focus:outline-none"}),l&&e.jsx(g,{variant:"outline",size:"sm",onClick:()=>b(""),className:"text-xs border-gray-300",children:"Clear"})]})]})]}),e.jsxs(_,{className:"shadow-md rounded-2xl",children:[e.jsx(w,{children:e.jsx(S,{children:"Faculty Logs History"})}),e.jsx(C,{children:e.jsxs(W,{children:[e.jsx(X,{children:"A list of recent faculty room logs."}),e.jsx(Y,{children:e.jsxs(o,{className:"bg-[hsl(142,34%,85%)] text-[hsl(142,34%,25%)] hover:bg-[hsl(142,34%,80%)] h-10",children:[e.jsx(i,{children:"#"}),e.jsx(i,{children:"Faculty"}),e.jsx(i,{children:"LogIn Date"}),e.jsx(i,{children:"Logout Date"}),e.jsx(i,{children:"Room"})]})}),e.jsxs(ee,{children:[j.length===0&&e.jsx(o,{children:e.jsx(a,{colSpan:5,className:"text-center text-gray-500",children:"No logs found."})}),j.map((s,N)=>s.room_statuses&&s.room_statuses.length>0?s.room_statuses.map((r,ue)=>e.jsxs(o,{children:[e.jsx(a,{children:N+1+(n-1)*c}),e.jsx(a,{children:s.name}),e.jsx(a,{children:r.created_at?new Date(r.created_at).toLocaleString("en-PH",{timeZone:"Asia/Manila",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"—"}),e.jsx(a,{children:r.logged_out_at?new Date(r.logged_out_at).toLocaleString("en-PH",{timeZone:"Asia/Manila",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"—"}),e.jsx(a,{children:r.room?.room_number??"N/A"})]},`${s.id}-${r.id}`)):e.jsxs(o,{children:[e.jsx(a,{children:N+1+(n-1)*c}),e.jsx(a,{children:s.name}),e.jsx(a,{colSpan:3,className:"text-center text-gray-400",children:"No log recorded"})]},`no-log-${s.id}`))]})]})})]})]})]})})]})]})}export{qe as default};
