import{r as g,j as e,L as k,a as w}from"./app-z6Vw40qg.js";import{B as u}from"./button-C8lyBYc6.js";import{C as P,a as B}from"./card-C7Qc2-6c.js";import{S as V,a as D,b as z,c as I}from"./avatar-DtziOh3W.js";import{S as E}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{N as L}from"./Notification-D2-v6fQt.js";import{T as q,a as O,b as F,c as i,d as H,e as n}from"./table-CyPFlxRG.js";import{B as M,a as $,b as K,c as T,d as U}from"./breadcrumb-4akR97PS.js";import{A as X}from"./app-sidebar-DZk1Umid.js";import{I as Y}from"./input-DHKWE85y.js";import{P as G,a as J,b as Q,S as b,c as f,d as y,e as v,f as m}from"./select-0RLxlNpR.js";import{F as W}from"./funnel-C1fABeA3.js";import{X as A}from"./index-CV-8ncH2.js";import"./index-DOpt5hlj.js";import"./index-B8ua60HV.js";import"./createLucideIcon-B0WYDbjW.js";import"./index-C0fTul90.js";import"./dropdown-menu-BxwQN4Fw.js";import"./index-CKOI0W7X.js";import"./chevron-right-Bj5qHi4z.js";import"./index-B4P4VYbh.js";import"./sparkles-BKefO-Bw.js";import"./user-D47MYVJ3.js";import"./index-BdQq_4o_.js";import"./index-BtyE1H5J.js";function Z({filters:s,filterOptions:p,onApplyFilters:_,onResetFilters:N}){const[o,r]=g.useState(""),[x,t]=g.useState("");g.useEffect(()=>{s.condition?(r("condition"),t(s.condition)):s.room?(r("room"),t(s.room)):s.faculty?(r("faculty"),t(s.faculty)):s.reportable_type?(r("reportable_type"),t(s.reportable_type)):(r(""),t(""))},[s]);const h=a=>{const c=a==="all"?"":a;t(c);let C={...s};o&&(C[o]=c),_(C)},j=()=>{r(""),t(""),N()},S=[{value:"condition",label:"Condition"},{value:"room",label:"Room"},{value:"faculty",label:"Faculty"},{value:"reportable_type",label:"Report Type"}];return e.jsxs(G,{children:[e.jsx(J,{asChild:!0,children:e.jsxs(u,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4"}),"Filter",(s.condition||s.room||s.faculty||s.reportable_type)&&e.jsx(A,{className:"h-4 w-4 ml-1 cursor-pointer",onClick:a=>{a.stopPropagation(),a.preventDefault(),j()}})]})}),e.jsxs(Q,{className:"w-[calc(100vw-2rem)] sm:w-[400px] p-4",children:[e.jsx("h4",{className:"font-medium mb-3 text-lg",children:"Filter Options"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs(b,{value:o,onValueChange:a=>{r(a),t("")},children:[e.jsx(f,{className:"w-full",children:e.jsx(y,{placeholder:"Select Field"})}),e.jsx(v,{children:S.map(a=>e.jsx(m,{value:a.value,children:a.label},a.value))})]}),o==="condition"&&e.jsxs(b,{value:x||"all",onValueChange:h,children:[e.jsx(f,{className:"w-full",children:e.jsx(y,{placeholder:"Select Condition"})}),e.jsxs(v,{children:[e.jsx(m,{value:"all",children:"All"}),p.conditions.map((a,c)=>e.jsx(m,{value:a,children:a},c))]})]}),o==="room"&&e.jsxs(b,{value:x||"all",onValueChange:h,children:[e.jsx(f,{className:"w-full",children:e.jsx(y,{placeholder:"Select Room"})}),e.jsxs(v,{children:[e.jsx(m,{value:"all",children:"All"}),Object.entries(p.rooms).map(([a,c])=>e.jsxs(m,{value:a,children:["Room ",c]},a))]})]}),o==="faculty"&&e.jsxs(b,{value:x||"all",onValueChange:h,children:[e.jsx(f,{className:"w-full",children:e.jsx(y,{placeholder:"Select Faculty"})}),e.jsxs(v,{children:[e.jsx(m,{value:"all",children:"All"}),Object.entries(p.faculties).map(([a,c])=>e.jsx(m,{value:a,children:c},a))]})]}),o==="reportable_type"&&e.jsxs(b,{value:x||"all",onValueChange:h,children:[e.jsx(f,{className:"w-full",children:e.jsx(y,{placeholder:"Select Type"})}),e.jsxs(v,{children:[e.jsx(m,{value:"all",children:"All"}),p.reportable_types.map(a=>e.jsx(m,{value:a,children:a},a))]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(u,{size:"sm",variant:"outline",onClick:j,className:"w-auto px-3",children:[e.jsx(A,{className:"mr-1 h-4 w-4"})," Reset"]})})]})]})]})}function we({reports:s,filters:p={},filterOptions:_}){const[N,o]=g.useState(p.search||""),[r,x]=g.useState(1),t=10,h=Math.ceil(s.length/t),j=s.slice((r-1)*t,r*t);function S(l){const d=Object.fromEntries(Object.entries(l).filter(([ee,R])=>R!==""&&R!==void 0));w.get("/faculty/reports",{...d,search:N||void 0})}function a(){o(""),w.get(route("admin.reports.index"))}function c(l){l.key==="Enter"&&S(p)}function C(l){E.fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!"}).then(d=>{d.isConfirmed&&w.delete(`/admin/faculty-reports/${l}`)})}return e.jsxs(V,{children:[e.jsx(X,{}),e.jsxs(D,{children:[e.jsx("header",{className:"sticky top-0 z-20 bg-white border-b px-6 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{}),e.jsx(I,{orientation:"vertical",className:"h-6 mx-3"}),e.jsx(M,{children:e.jsx($,{children:e.jsxs(K,{children:[e.jsx(T,{href:"#","aria-current":"page",children:"Reports"}),e.jsx(U,{}),e.jsx(T,{href:"/admin/faculty/reports","aria-current":"page",className:"font-semibold text-foreground",children:"Faculty Reports"})]})})}),e.jsx("div",{className:"flex-1"}),e.jsx(L,{})]})}),e.jsx("main",{children:e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-5",children:"Faculty Reports"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-4",children:[e.jsx(Z,{filters:p,filterOptions:_,onApplyFilters:S,onResetFilters:a}),e.jsx(Y,{placeholder:"Search reports...",value:N,onChange:l=>o(l.target.value),onKeyDown:c,className:"flex-1 min-w-0 sm:max-w-xs w-full"})]}),e.jsx(P,{children:e.jsxs(B,{children:[e.jsxs(q,{children:[e.jsx(O,{children:e.jsxs(F,{children:[e.jsx(i,{children:"#"}),e.jsx(i,{children:"Faculty"}),e.jsx(i,{children:"Reports Type"}),e.jsx(i,{children:"Reports ID"}),e.jsx(i,{children:"Type"}),e.jsx(i,{children:"Code"}),e.jsx(i,{children:"Condition"}),e.jsx(i,{children:"Remarks"}),e.jsx(i,{children:"Room"}),e.jsx(i,{children:"Date"}),e.jsx(i,{children:"Actions"})]})}),e.jsx(H,{children:j.length>0?j.map((l,d)=>e.jsxs(F,{children:[e.jsx(n,{children:(r-1)*t+d+1}),e.jsx(n,{children:l.user?.name||"N/A"}),e.jsx(n,{children:l.reportable_type}),e.jsx(n,{children:l.reportable_id}),e.jsx(n,{children:l.reportable_type==="peripheral"?l.reportable?.type:l.reportable_type==="system_unit"?"System Unit":l.reportable_type==="equipment"?l.reportable?.equipment_type:"N/A"}),e.jsx(n,{children:l.reportable_type==="peripheral"?l.reportable?.peripheral_code:l.reportable_type==="system_unit"?l.reportable?.unit_code:l.reportable_type==="equipment"?l.reportable?.equipment_code:"N/A"}),e.jsx(n,{children:l.condition}),e.jsx(n,{children:l.remarks}),e.jsxs(n,{children:["ROOM"," ",l.room?l.room.room_number:"N/A"]}),e.jsx(n,{children:new Date(l.created_at).toLocaleDateString()}),e.jsxs(n,{className:"space-x-2",children:[e.jsx(k,{href:`/admin/faculty-reports/${l.id}/edit`,children:e.jsx(u,{variant:"outline",size:"sm",children:"Edit"})}),e.jsx(u,{variant:"destructive",size:"sm",onClick:()=>C(l.id),children:"Delete"})]})]},l.id)):e.jsx(F,{children:e.jsx(n,{colSpan:"11",className:"text-center",children:"No reports found."})})})]}),e.jsxs("div",{className:"flex justify-center mt-4 space-x-2",children:[e.jsx(u,{variant:"outline",size:"sm",disabled:r===1,onClick:()=>x(r-1),children:"Previous"}),[...Array(h)].map((l,d)=>e.jsx(u,{variant:r===d+1?"default":"outline",size:"sm",onClick:()=>x(d+1),children:d+1},d)),e.jsx(u,{variant:"outline",size:"sm",disabled:r===h,onClick:()=>x(r+1),children:"Next"})]})]})})]})})]})]})}export{we as default};
