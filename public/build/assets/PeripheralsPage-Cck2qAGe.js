import{r as n,j as s,L as v,b as A}from"./app-BpRUceEj.js";import{B as c}from"./button-CtASqKdi.js";import{C as U,a as E}from"./card-CUVFCT8Z.js";import{S as M,a as Q,b as H,c as O}from"./index-D-dKlfZW.js";import{S as $}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{Q as K}from"./index-BK9Zryhz.js";import{T as Y,a as G,b as C,c as i,d as J,e as a}from"./table-QMjgBLTn.js";import{B as V,a as W,b as X,c as g,d as Z}from"./breadcrumb-CFJhiBl5.js";import{A as ee}from"./app-sidebar-D2fNTURJ.js";import{I as se}from"./input-DKuu2mWd.js";import"./index-fql-_f0x.js";import"./index-DXlzJLfp.js";import"./index-D6KhA6T-.js";import"./index-CLFQsvd0.js";import"./dropdown-menu-SNzjHwqN.js";import"./index-ymmVuUgQ.js";import"./chevron-right-BtngIXb-.js";function ve({peripherals:o,search:w}){const[re,te]=n.useState(o||[]),[r,N]=n.useState(w||""),[d,y]=n.useState("All Types"),[m,_]=n.useState("All Serials"),[h,T]=n.useState("All Conditions"),[u,L]=n.useState("All Rooms"),[x,B]=n.useState("All Unit Codes"),[l,p]=n.useState(1),j=10,P=["All Types",...new Set(o.map(e=>e.type||"N/A"))],F=["All Serials",...new Set(o.map(e=>e.serial_number||"N/A"))],R=["All Conditions",...new Set(o.map(e=>e.condition||"N/A"))],k=["All Rooms",...new Set(o.map(e=>e.room?.room_number||"N/A"))],q=["All Unit Codes",...new Set(o.map(e=>e.unit_code||"N/A"))];function z(e){$.fire({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&A.delete(`/admin/peripherals/${e}`)})}const D=e=>{e.key==="Enter"&&A.get("/admin/peripherals",{search:r})},b=n.useMemo(()=>o.filter(e=>{const t=r===""||e.peripheral_code?.toLowerCase().includes(r.toLowerCase())||e.type?.toLowerCase().includes(r.toLowerCase())||e.serial_number?.toLowerCase().includes(r.toLowerCase())||e.condition?.toLowerCase().includes(r.toLowerCase())||(e.room?.room_number||"N/A").toLowerCase().includes(r.toLowerCase())||e.unit_code?.toLowerCase().includes(r.toLowerCase()),I=(d==="All Types"||e.type===d)&&(m==="All Serials"||e.serial_number===m)&&(h==="All Conditions"||e.condition===h)&&(u==="All Rooms"||(e.room?.room_number||"N/A")===u)&&(x==="All Unit Codes"||e.unit_code===x);return t&&I}),[o,r,d,m,h,u,x]),f=Math.ceil(b.length/j),S=b.slice((l-1)*j,l*j);return s.jsxs(M,{children:[s.jsx(ee,{}),s.jsxs(Q,{children:[s.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 border-b bg-white",children:[s.jsx(H,{}),s.jsx(O,{orientation:"vertical",className:"h-6 mx-3"}),s.jsx(V,{children:s.jsx(W,{children:s.jsxs(X,{children:[s.jsx(g,{href:"#",children:"Assets"}),s.jsx(Z,{}),s.jsx(g,{href:"/admin/peripherals","aria-current":"page",className:"font-semibold text-foreground",children:"Peripherals"})]})})})]}),s.jsx("main",{children:s.jsxs("div",{className:"p-6",children:[s.jsx("h1",{className:"text-2xl font-bold mb-5",children:"Peripherals"}),s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx(se,{placeholder:"Search peripherals...",value:r,onChange:e=>N(e.target.value),onKeyDown:D,className:"w-full sm:w-1/3"}),s.jsx("div",{className:"flex items-center space-x-4",children:s.jsx(v,{href:"/admin/peripherals/create",children:s.jsx(c,{children:"Add Peripheral"})})})]}),s.jsx(U,{children:s.jsxs(E,{children:[s.jsxs(Y,{children:[s.jsx(G,{children:s.jsxs(C,{children:[s.jsx(i,{children:"#"}),s.jsx(i,{children:"Peripheral Code"}),s.jsx(i,{children:s.jsx("select",{className:"border rounded px-1 pr-7 py-0.5 text-xs",value:d,onChange:e=>y(e.target.value),children:P.map(e=>s.jsx("option",{value:e,children:e},e))})}),s.jsx(i,{children:s.jsx("select",{className:"border rounded px-1 pr-7 py-0.5 text-xs",value:m,onChange:e=>_(e.target.value),children:F.map(e=>s.jsx("option",{value:e,children:e},e))})}),s.jsx(i,{children:s.jsx("select",{className:"border rounded px-1 pr-7 py-0.5 text-xs",value:h,onChange:e=>T(e.target.value),children:R.map(e=>s.jsx("option",{value:e,children:e},e))})}),s.jsx(i,{children:s.jsx("select",{className:"border rounded px-1 pr-7 py-0.5 text-xs",value:u,onChange:e=>L(e.target.value),children:k.map(e=>s.jsx("option",{value:e,children:e},e))})}),s.jsx(i,{children:s.jsx("select",{className:"border rounded px-1 pr-7 py-0.5 text-xs",value:x,onChange:e=>B(e.target.value),children:q.map(e=>s.jsx("option",{value:e,children:e},e))})}),s.jsx(i,{children:"QR Code"}),s.jsx(i,{children:"Actions"})]})}),s.jsx(J,{children:S.length>0?S.map((e,t)=>s.jsxs(C,{children:[s.jsx(a,{children:(l-1)*j+t+1}),s.jsx(a,{children:e.peripheral_code}),s.jsx(a,{children:e.type}),s.jsx(a,{children:e.serial_number}),s.jsx(a,{children:e.condition}),s.jsxs(a,{children:["ROOM"," ",e.room?e.room.room_number:"N/A"]}),s.jsx(a,{children:e.unit_code}),s.jsx(a,{children:e.qr_code_path&&s.jsx(K,{value:e.qr_code_path,size:48})}),s.jsxs(a,{className:"space-x-2",children:[s.jsx(v,{href:`/admin/peripherals/${e.id}/edit`,children:s.jsx(c,{variant:"outline",size:"sm",children:"Edit"})}),s.jsx(c,{variant:"destructive",size:"sm",onClick:()=>z(e.id),children:"Delete"})]})]},e.id)):s.jsx(C,{children:s.jsx(a,{colSpan:"9",className:"text-center",children:"No peripherals found."})})})]}),s.jsxs("div",{className:"flex justify-center mt-4 space-x-2",children:[s.jsx(c,{variant:"outline",size:"sm",disabled:l===1,onClick:()=>p(l-1),children:"Previous"}),[...Array(f)].map((e,t)=>s.jsx(c,{variant:l===t+1?"default":"outline",size:"sm",onClick:()=>p(t+1),children:t+1},t)),s.jsx(c,{variant:"outline",size:"sm",disabled:l===f,onClick:()=>p(l+1),children:"Next"})]})]})})]})})]})]})}export{ve as default};
