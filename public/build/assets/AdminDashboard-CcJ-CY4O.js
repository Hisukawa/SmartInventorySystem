import{r as o,j as e,R as Se,b as nt,H as rt,L as ot,c as E}from"./app-ZZeD7AEa.js";import{S as it,a as lt,b as ct,c as ut}from"./avatar-_p9bR5M7.js";import{N as dt}from"./Notification-CXAoybks.js";import{A as mt}from"./app-sidebar-BHgbwLmU.js";import{B as ce}from"./button-D2XOgySb.js";import{L as pt}from"./label-u56v7csZ.js";import{i as ft,u as Ae,D as je,a as Ne,b as we,c as G}from"./dropdown-menu-DHaW0RBu.js";import{B as ht,a as xt,b as gt,c as bt}from"./breadcrumb-CyFgCU8j.js";import{C as K,b as $,c as V,a as ue,e as yt}from"./card-Dp9uM7vm.js";import{u as vt,C as jt,a as Nt,b as wt}from"./react-spring_web.modern-B5VMf9Fj.js";import{c as Ie,P,a as Ee,u as Ce}from"./index-DecKJaCt.js";import{u as _e}from"./index-CGT50vQy.js";import{u as Fe,b as Ct}from"./index-BB61If3p.js";import{c as xe}from"./utils-CBfrqCZ4.js";import{B as Tt}from"./building-wOxzAvmb.js";import{M as Rt}from"./mouse-C3uW4i91.js";import{M as St}from"./monitor-yGA84J8g.js";import{U as Te}from"./users-BK4lCMFV.js";import{c as At}from"./createLucideIcon-CspqRzmy.js";import{C as z}from"./index-CwxihIIj.js";import{R as H,B as W,X as Y,Y as X,T as J,L as de,k as Q,j as Z}from"./BarChart-DGMgcotl.js";import{C as ee}from"./CartesianGrid-DYOBpUK8.js";import"./input-Dich0nct.js";import"./index-Ra53VMD9.js";import"./index-B4Nfmim5.js";import"./index-Ba96PHSF.js";import"./bell-4wUnqQjq.js";import"./house-y2PHMtxH.js";import"./user-DPZ2GJ56.js";import"./log-out-DT0aVyDc.js";import"./keyboard-ByfVLnjq.js";import"./boxes-DT35St24.js";import"./chevron-down-C-stR2TW.js";import"./chevron-right-CxLV49xI.js";import"./with-selector-CLVOsOiC.js";/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],Re=At("sliders-horizontal",It);function A(s,t,{checkForDefaultPrevented:n=!0}={}){return function(c){if(s?.(c),n===!1||!c.defaultPrevented)return t?.(c)}}var me="rovingFocusGroup.onEntryFocus",Et={bubbles:!1,cancelable:!0},O="RovingFocusGroup",[fe,De,_t]=ft(O),[Ft,Pe]=Ie(O,[_t]),[Dt,Pt]=Ft(O),ke=o.forwardRef((s,t)=>e.jsx(fe.Provider,{scope:s.__scopeRovingFocusGroup,children:e.jsx(fe.Slot,{scope:s.__scopeRovingFocusGroup,children:e.jsx(kt,{...s,ref:t})})}));ke.displayName=O;var kt=o.forwardRef((s,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:c=!1,dir:x,currentTabStopId:u,defaultCurrentTabStopId:g,onCurrentTabStopIdChange:p,onEntryFocus:m,preventScrollOnEntryFocus:i=!1,...f}=s,h=o.useRef(null),b=_e(t,h),N=Ae(x),[T,d]=Ee({prop:u,defaultProp:g??null,onChange:p,caller:O}),[j,R]=o.useState(!1),v=Ct(m),S=De(n),k=o.useRef(!1),[w,M]=o.useState(0);return o.useEffect(()=>{const y=h.current;if(y)return y.addEventListener(me,v),()=>y.removeEventListener(me,v)},[v]),e.jsx(Dt,{scope:n,orientation:r,dir:N,loop:c,currentTabStopId:T,onItemFocus:o.useCallback(y=>d(y),[d]),onItemShiftTab:o.useCallback(()=>R(!0),[]),onFocusableItemAdd:o.useCallback(()=>M(y=>y+1),[]),onFocusableItemRemove:o.useCallback(()=>M(y=>y-1),[]),children:e.jsx(P.div,{tabIndex:j||w===0?-1:0,"data-orientation":r,...f,ref:b,style:{outline:"none",...s.style},onMouseDown:A(s.onMouseDown,()=>{k.current=!0}),onFocus:A(s.onFocus,y=>{const be=!k.current;if(y.target===y.currentTarget&&be&&!j){const q=new CustomEvent(me,Et);if(y.currentTarget.dispatchEvent(q),!q.defaultPrevented){const _=S().filter(C=>C.focusable),L=_.find(C=>C.active),U=_.find(C=>C.id===T),oe=[L,U,..._].filter(Boolean).map(C=>C.ref.current);qe(oe,i)}}k.current=!1}),onBlur:A(s.onBlur,()=>R(!1))})})}),Me="RovingFocusGroupItem",Oe=o.forwardRef((s,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:c=!1,tabStopId:x,children:u,...g}=s,p=Fe(),m=x||p,i=Pt(Me,n),f=i.currentTabStopId===m,h=De(n),{onFocusableItemAdd:b,onFocusableItemRemove:N,currentTabStopId:T}=i;return o.useEffect(()=>{if(r)return b(),()=>N()},[r,b,N]),e.jsx(fe.ItemSlot,{scope:n,id:m,focusable:r,active:c,children:e.jsx(P.span,{tabIndex:f?0:-1,"data-orientation":i.orientation,...g,ref:t,onMouseDown:A(s.onMouseDown,d=>{r?i.onItemFocus(m):d.preventDefault()}),onFocus:A(s.onFocus,()=>i.onItemFocus(m)),onKeyDown:A(s.onKeyDown,d=>{if(d.key==="Tab"&&d.shiftKey){i.onItemShiftTab();return}if(d.target!==d.currentTarget)return;const j=qt(d,i.orientation,i.dir);if(j!==void 0){if(d.metaKey||d.ctrlKey||d.altKey||d.shiftKey)return;d.preventDefault();let v=h().filter(S=>S.focusable).map(S=>S.ref.current);if(j==="last")v.reverse();else if(j==="prev"||j==="next"){j==="prev"&&v.reverse();const S=v.indexOf(d.currentTarget);v=i.loop?Lt(v,S+1):v.slice(S+1)}setTimeout(()=>qe(v))}}),children:typeof u=="function"?u({isCurrentTabStop:f,hasTabStop:T!=null}):u})})});Oe.displayName=Me;var Mt={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Ot(s,t){return t!=="rtl"?s:s==="ArrowLeft"?"ArrowRight":s==="ArrowRight"?"ArrowLeft":s}function qt(s,t,n){const r=Ot(s.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Mt[r]}function qe(s,t=!1){const n=document.activeElement;for(const r of s)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function Lt(s,t){return s.map((n,r)=>s[(t+r)%s.length])}var Ut=ke,Bt=Oe;function Gt(s,t){return o.useReducer((n,r)=>t[n][r]??n,s)}var Le=s=>{const{present:t,children:n}=s,r=Kt(t),c=typeof n=="function"?n({present:r.isPresent}):o.Children.only(n),x=_e(r.ref,$t(c));return typeof n=="function"||r.isPresent?o.cloneElement(c,{ref:x}):null};Le.displayName="Presence";function Kt(s){const[t,n]=o.useState(),r=o.useRef(null),c=o.useRef(s),x=o.useRef("none"),u=s?"mounted":"unmounted",[g,p]=Gt(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return o.useEffect(()=>{const m=te(r.current);x.current=g==="mounted"?m:"none"},[g]),Ce(()=>{const m=r.current,i=c.current;if(i!==s){const h=x.current,b=te(m);s?p("MOUNT"):b==="none"||m?.display==="none"?p("UNMOUNT"):p(i&&h!==b?"ANIMATION_OUT":"UNMOUNT"),c.current=s}},[s,p]),Ce(()=>{if(t){let m;const i=t.ownerDocument.defaultView??window,f=b=>{const T=te(r.current).includes(CSS.escape(b.animationName));if(b.target===t&&T&&(p("ANIMATION_END"),!c.current)){const d=t.style.animationFillMode;t.style.animationFillMode="forwards",m=i.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=d)})}},h=b=>{b.target===t&&(x.current=te(r.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{i.clearTimeout(m),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else p("ANIMATION_END")},[t,p]),{isPresent:["mounted","unmountSuspended"].includes(g),ref:o.useCallback(m=>{r.current=m?getComputedStyle(m):null,n(m)},[])}}function te(s){return s?.animationName||"none"}function $t(s){let t=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?s.ref:(t=Object.getOwnPropertyDescriptor(s,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?s.props.ref:s.props.ref||s.ref)}var ne="Tabs",[Vt,Ds]=Ie(ne,[Pe]),Ue=Pe(),[zt,ge]=Vt(ne),Be=o.forwardRef((s,t)=>{const{__scopeTabs:n,value:r,onValueChange:c,defaultValue:x,orientation:u="horizontal",dir:g,activationMode:p="automatic",...m}=s,i=Ae(g),[f,h]=Ee({prop:r,onChange:c,defaultProp:x??"",caller:ne});return e.jsx(zt,{scope:n,baseId:Fe(),value:f,onValueChange:h,orientation:u,dir:i,activationMode:p,children:e.jsx(P.div,{dir:i,"data-orientation":u,...m,ref:t})})});Be.displayName=ne;var Ge="TabsList",Ke=o.forwardRef((s,t)=>{const{__scopeTabs:n,loop:r=!0,...c}=s,x=ge(Ge,n),u=Ue(n);return e.jsx(Ut,{asChild:!0,...u,orientation:x.orientation,dir:x.dir,loop:r,children:e.jsx(P.div,{role:"tablist","aria-orientation":x.orientation,...c,ref:t})})});Ke.displayName=Ge;var $e="TabsTrigger",Ve=o.forwardRef((s,t)=>{const{__scopeTabs:n,value:r,disabled:c=!1,...x}=s,u=ge($e,n),g=Ue(n),p=We(u.baseId,r),m=Ye(u.baseId,r),i=r===u.value;return e.jsx(Bt,{asChild:!0,...g,focusable:!c,active:i,children:e.jsx(P.button,{type:"button",role:"tab","aria-selected":i,"aria-controls":m,"data-state":i?"active":"inactive","data-disabled":c?"":void 0,disabled:c,id:p,...x,ref:t,onMouseDown:A(s.onMouseDown,f=>{!c&&f.button===0&&f.ctrlKey===!1?u.onValueChange(r):f.preventDefault()}),onKeyDown:A(s.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&u.onValueChange(r)}),onFocus:A(s.onFocus,()=>{const f=u.activationMode!=="manual";!i&&!c&&f&&u.onValueChange(r)})})})});Ve.displayName=$e;var ze="TabsContent",He=o.forwardRef((s,t)=>{const{__scopeTabs:n,value:r,forceMount:c,children:x,...u}=s,g=ge(ze,n),p=We(g.baseId,r),m=Ye(g.baseId,r),i=r===g.value,f=o.useRef(i);return o.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),e.jsx(Le,{present:c||i,children:({present:h})=>e.jsx(P.div,{"data-state":i?"active":"inactive","data-orientation":g.orientation,role:"tabpanel","aria-labelledby":p,hidden:!h,id:m,tabIndex:0,...u,ref:t,style:{...s.style,animationDuration:f.current?"0s":void 0},children:h&&x})})});He.displayName=ze;function We(s,t){return`${s}-trigger-${t}`}function Ye(s,t){return`${s}-content-${t}`}var Ht=Be,Xe=Ke,Je=Ve,Qe=He;const Wt=Ht,Ze=o.forwardRef(({className:s,...t},n)=>e.jsx(Xe,{ref:n,className:xe("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",s),...t}));Ze.displayName=Xe.displayName;const se=o.forwardRef(({className:s,...t},n)=>e.jsx(Je,{ref:n,className:xe("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",s),...t}));se.displayName=Je.displayName;const ae=o.forwardRef(({className:s,...t},n)=>e.jsx(Qe,{ref:n,className:xe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t}));ae.displayName=Qe.displayName;function he(){return he=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(s[r]=n[r])}return s},he.apply(this,arguments)}var pe=function(t){return function(){return t}},Yt=function(t){var n=t.render,r=n===void 0?pe(null):n,c=t.style,x=c===void 0?pe({}):c,u=t.ratio,g=t.posX,p=t.posY,m=t.square,i=m===void 0?!1:m,f=t.height,h=f===void 0?"2rem":f,b=t.value,N=t.onClick;return Se.createElement("div",{onClick:function(){return(N||pe({}))(g,p)},style:he({border:"1px solid #fff",borderWidth:"1px 1px 0 0",textAlign:"center",color:"rgb(0, 0, 0, "+(u/2+.4)+")",overflow:"hidden",boxSizing:"border-box",flexGrow:i?0:1,flexBasis:i?h:0,flexShrink:0,height:h,lineHeight:h,borderRadius:"4px",fontSize:".8rem",cursor:N?"pointer":"initial",background:"rgb(12, 160, 44, "+(u+.05)+")"},x(g,p,u))},r(g,p,b))};Se.memo(Yt);function Ps(){const{auth:s}=nt().props,t=s.user,[n,r]=o.useState({totalRooms:0,totalSystemUnits:0,totalPeripherals:0,totalEquipments:0,occupiedRooms:0,pendingRequests:0,forRepair:0,activeUsers:0,totalUsers:0}),[c,x]=o.useState([]),[u,g]=o.useState([]),[p,m]=o.useState({system_units:{},peripherals:{},peripherals_type:{},equipments:{}}),[i,f]=o.useState({system_units:{},peripherals:{},peripherals_type:{},equipments:{}}),[h,b]=o.useState([]),[N,T]=o.useState([]),[d,j]=o.useState(""),[R,v]=o.useState(""),[S,k]=o.useState([]),[w,M]=o.useState(""),[y,be]=o.useState("");o.useEffect(()=>{(async()=>{try{const l=await E.get("/admin/rooms-list");b(Array.isArray(l.data)?l.data:[]);const I=await E.get("/admin/peripheral-types");T(Array.isArray(I.data)?I.data:[]);const ve=await E.get("/admin/equipment-types");k(Array.isArray(ve.data)?ve.data:[])}catch(l){console.error("Error fetching filters:",l)}})()},[]);const q=async()=>{try{const a=await E.get("/admin/equipment-condition-filtered",{params:{room_id:d,type:R}});console.log("Rooms:",h),m(a.data)}catch(a){console.error(a)}},_=a=>p[a]?Object.entries(p[a]).map(([l,I])=>({name:l,value:I})):[],L=_("system_units"),U=_("peripherals"),re=_("equipments"),oe=async()=>{try{const a=await E.get("/admin/equipment-condition",{params:{room_id:w||void 0}});f(a.data)}catch(a){console.error(a)}},C=async()=>{try{const a=await E.get("/admin/dashboard-stats");r(a.data);const l=await E.get("/admin/rooms-status");g(l.data);const I=await E.get("/admin/activity-logs");x(I.data),await q(),await oe()}catch(a){console.error(a)}};o.useEffect(()=>{C();const a=setInterval(C,5e3);return()=>clearInterval(a)},[d,R,w]);const F=a=>vt({val:a,from:{val:0}}),et=a=>e.jsx(wt.p,{className:"text-lg font-bold text-black",children:a.val.to(l=>Math.floor(l))}),tt=[{title:"Total Rooms",value:F(n.totalRooms),icon:Tt,link:"/admin/rooms"},{title:"Computers",value:F(d||R?Object.values(p.system_units).reduce((a,l)=>a+l,0):n.totalSystemUnits),icon:jt,link:"/admin/system-units"},{title:"Peripherals",value:F(d||R?Object.values(p.peripherals).reduce((a,l)=>a+l,0):n.totalPeripherals),icon:Rt,link:"/admin/peripherals"},{title:"Room Equipments",value:F(d||R?Object.values(p.equipments).reduce((a,l)=>a+l,0):n.totalEquipments),icon:St,link:"/equipments"},{title:"Pending Requests",value:F(n.pendingRequests),icon:Nt,link:"/admin/faculty/reports"},{title:"Total Users",value:F(n.totalUsers),icon:Te,link:"/admin/users"}];i.system_units&&Object.values(i.system_units).reduce((a,l)=>a+l,0),i.peripherals&&Object.values(i.peripherals).reduce((a,l)=>a+l,0),i.equipments&&Object.values(i.equipments).reduce((a,l)=>a+l,0);const ie=a=>Object.values(a||{}).reduce((l,I)=>l+I,0),ye=[{name:"PCs",value:ie(i.system_units)},{name:"Peripherals",value:ie(i.peripherals)},{name:"Equipment",value:ie(i.equipments)}],D=["#16a34a","#facc15","#dc2626","#3b82f6","#9333ea"],[le,st]=o.useState(!1),[Xt,Jt]=o.useState("type"),B=u.details?u.details.filter(a=>a.is_active):[],at=le?B:B.slice(0,2);return e.jsxs(it,{children:[e.jsx(rt,{children:e.jsx("title",{children:"Admin Dashboard"})}),e.jsx(mt,{}),e.jsxs(lt,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 border-b bg-white",children:[e.jsx(ct,{}),e.jsx(ut,{orientation:"vertical",className:"h-6 mx-3"}),e.jsx(ht,{children:e.jsx(xt,{children:e.jsx(gt,{children:e.jsx(bt,{href:"#","aria-current":"page",children:"Dashboard"})})})}),e.jsx("div",{className:"flex-1"}),e.jsx(dt,{})]}),e.jsxs("main",{className:"w-full px-6 py-6 space-y-6",children:[e.jsxs("div",{className:"relative rounded-2xl bg-gradient-to-r from-[#A8D5BA] via-[#7FCF9E] to-[#59AC77] p-6 text-white shadow-lg",children:[e.jsxs("h1",{className:"text-3xl font-bold",children:["Welcome back, ",t.name.split(" ")[0],"."]}),e.jsx("p",{className:"text-sm opacity-90 mt-1",children:"Hereâ€™s a summary of your ICT inventory system."})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 mb-6",children:tt.map((a,l)=>e.jsx(ot,{href:a.link,className:"block",children:e.jsxs(K,{className:"rounded-xl shadow-sm bg-white hover:shadow-md transition-all duration-300 cursor-pointer p-3",children:[e.jsx($,{className:"flex flex-row items-center justify-between space-y-0 pb-1",children:e.jsxs(V,{className:"text-xs font-medium flex items-center gap-1 text-gray-500",children:[e.jsx(a.icon,{className:"h-4 w-4 text-[hsl(142,34%,51%)]"}),a.title]})}),e.jsx(ue,{children:et(a.value)})]})},l))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(K,{className:"col-span-2",children:[e.jsx($,{children:e.jsx(V,{children:"Condition of PCs, Peripherals, Equipment Across Room"})}),e.jsxs(ue,{children:[e.jsxs("div",{className:"mb-4 w-full sm:max-w-xs",children:[e.jsx(pt,{className:"font-medium",children:"Filter by Room"}),e.jsxs(je,{children:[e.jsx(Ne,{asChild:!0,children:e.jsxs(ce,{variant:"outline",className:"flex items-center gap-2 text-gray-700 font-medium justify-between",children:[d?h.find(a=>a.id===d)?.room_number:"All Rooms",e.jsx(Re,{className:"h-4 w-4 opacity-70"})]})}),e.jsxs(we,{align:"start",className:"max-h-60 overflow-y-auto bg-white shadow-lg border rounded-lg",children:[e.jsxs(G,{className:`cursor-pointer ${d===""?"bg-green-100 text-green-700 font-semibold":"hover:bg-gray-100"}`,onClick:()=>j(""),children:["All Rooms",d===""&&e.jsx(z,{className:"ml-auto h-4 w-4 text-green-600"})]}),h.map(a=>e.jsxs(G,{className:`cursor-pointer ${d===a.id?"bg-green-100 text-green-700 font-semibold":"hover:bg-gray-100"}`,onClick:()=>j(a.id),children:[a.room_number,d===a.id&&e.jsx(z,{className:"ml-auto h-4 w-4 text-green-600"})]},a.id))]})]})]}),e.jsxs(Wt,{defaultValue:"system_units",className:"w-full",children:[e.jsxs(Ze,{children:[e.jsx(se,{value:"system_units",children:"PCs"}),e.jsx(se,{value:"peripherals",children:"Peripherals"}),e.jsx(se,{value:"equipments",children:"Equipment"})]}),e.jsx(ae,{value:"system_units",children:e.jsx(H,{width:"100%",height:300,children:e.jsxs(W,{data:L,children:[e.jsx(ee,{strokeDasharray:"3 3"}),e.jsx(Y,{dataKey:"name"}),e.jsx(X,{}),e.jsx(J,{}),e.jsx(de,{}),e.jsx(Q,{dataKey:"value",fill:"#3b82f6",children:L.map((a,l)=>e.jsx(Z,{fill:D[l%D.length]},`su-${l}`))})]})})}),e.jsx(ae,{value:"peripherals",children:e.jsx(H,{width:"100%",height:300,children:e.jsxs(W,{data:U,children:[e.jsx(ee,{strokeDasharray:"3 3"}),e.jsx(Y,{dataKey:"name"}),e.jsx(X,{}),e.jsx(J,{}),e.jsx(de,{}),e.jsx(Q,{dataKey:"value",fill:"#16a34a",children:U.map((a,l)=>e.jsx(Z,{fill:D[l%D.length]},`per-${l}`))})]})})}),e.jsx(ae,{value:"equipments",children:e.jsx(H,{width:"100%",height:300,children:e.jsxs(W,{data:re,children:[e.jsx(ee,{strokeDasharray:"3 3"}),e.jsx(Y,{dataKey:"name"}),e.jsx(X,{}),e.jsx(J,{}),e.jsx(de,{}),e.jsx(Q,{dataKey:"value",fill:"#f59e0b",children:re.map((a,l)=>e.jsx(Z,{fill:D[l%D.length]},`eq-${l}`))})]})})})]})]})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(K,{className:"col-span-2",children:[e.jsx($,{children:e.jsx(V,{children:"Total PCs, Peripherals, and Equipment Across All Rooms"})}),e.jsxs(ue,{children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsxs(je,{children:[e.jsx(Ne,{asChild:!0,children:e.jsxs(ce,{variant:"outline",className:"flex items-center gap-2 text-gray-700 font-medium justify-between max-w-[200px]",children:[w?h.find(a=>a.id===w)?.room_number:"All Rooms",e.jsx(Re,{className:"h-4 w-4 opacity-70"})]})}),e.jsxs(we,{align:"start",className:"w-[180px] max-h-60 overflow-y-auto bg-white shadow-lg border rounded-lg",children:[e.jsxs(G,{className:`cursor-pointer ${w===""?"bg-green-100 text-green-700 font-semibold":"hover:bg-gray-100"}`,onClick:()=>M(""),children:["All Rooms",w===""&&e.jsx(z,{className:"ml-auto h-4 w-4 text-green-600"})]}),h.map(a=>e.jsxs(G,{className:`cursor-pointer ${w===a.id?"bg-green-100 text-green-700 font-semibold":"hover:bg-gray-100"}`,onClick:()=>M(a.id),children:[a.room_number,w===a.id&&e.jsx(z,{className:"ml-auto h-4 w-4 text-green-600"})]},a.id))]})]})}),e.jsx(H,{width:"100%",height:340,children:e.jsxs(W,{data:ye,layout:"vertical",barCategoryGap:"30%",margin:{top:20,right:30,left:80,bottom:20},children:[e.jsx(ee,{strokeDasharray:"3 3"}),e.jsx(Y,{type:"number"}),e.jsx(X,{dataKey:"name",type:"category",width:100}),e.jsx(J,{}),e.jsx(Q,{dataKey:"value",barSize:50,children:ye.map((a,l)=>e.jsx(Z,{fill:["#3b82f6","#16a34a","#f59e0b","#ef4444","#8b5cf6"][l%5]},`cell-${l}`))})]})})]})]})})]}),e.jsx("div",{className:"lg:col-span-1 flex justify-center",children:e.jsxs(K,{className:"rounded-2xl shadow-md bg-white h-full max-w-xl w-full",children:[e.jsx($,{className:"flex flex-col items-center",children:e.jsxs(V,{className:"flex items-center gap-2 text-[#2F4F2F] justify-center",children:[e.jsx(Te,{className:"w-5 h-5 text-[#59AC77]"}),"Active Room Occupancy"]})}),e.jsx("div",{className:"space-y-6 p-4",children:B.length===0?e.jsx("p",{className:"text-[#3B5C47] text-sm text-center",children:"No active rooms right now"}):at.map(a=>e.jsxs("div",{className:"flex items-center gap-6 border-b pb-6 last:border-b-0",children:[a.faculty_photo?e.jsx("img",{src:a.faculty_photo,alt:a.last_scanned_by||"Faculty",className:"w-28 h-28 rounded-full object-cover border-4 border-[#59AC77] shadow-lg",onError:l=>{l.target.onerror=null,l.target.src="/default-avatar.png"}}):e.jsx("img",{src:"/default-avatar.png",alt:"No Faculty",className:"w-28 h-28 rounded-full object-cover border-4 border-gray-300 shadow-lg"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-base font-semibold text-[#2F4F2F]",children:["Room"," ",a.room_number]}),e.jsxs("p",{className:"text-sm text-[#3B5C47]",children:["Scanned by"," ",e.jsx("span",{className:"font-medium text-[#2F4F2F]",children:a.last_scanned_by??"Unknown"}),a.faculty_role&&e.jsxs("span",{className:"text-xs text-gray-600 ml-2",children:["(",a.faculty_role,")"]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:a.last_scanned_at?new Date(a.last_scanned_at).toLocaleString():"No scan time"})]})]},a.id))}),B.length>2&&e.jsx(yt,{className:"flex justify-center",children:e.jsx(ce,{variant:"outline",size:"sm",onClick:()=>st(!le),children:le?"Show Less":"View All Active Rooms"})})]})})]})]})]})}export{Ps as default};
