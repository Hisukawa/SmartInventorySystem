import{r as h,j as e}from"./app-BXEL7I3D.js";import{S as v,a as y,b as w,c as C}from"./avatar-VePTvp79.js";import{A as S}from"./app-sidebar-BkqBmsXw.js";import{C as D,a as B}from"./card-CsoS8_7x.js";import{T as _,a as A,b as p,c as l,d as k,e as n}from"./table-CVIUJvmR.js";import{D as R,a as T,c as z}from"./dialog-CDb98rS0.js";import{B as d}from"./button-CXIWFdOM.js";import{B as P,a as L,b as I,c as b,d as O}from"./breadcrumb-CwAhrUmb.js";import{C as $}from"./chevron-right-C5dNCxl-.js";import"./index-DZGxOCx4.js";import"./utils-CBfrqCZ4.js";import"./input-DuaXU4SU.js";import"./index-CXW272yM.js";import"./index-CJgs40Fr.js";import"./createLucideIcon-C4nke5B-.js";import"./index-DYsNqI6P.js";import"./dropdown-menu-B1e4DepK.js";import"./index-CaIAb45n.js";import"./index-C7R1yl_2.js";import"./index-DSoZh-_N.js";import"./house-ClUO6xOi.js";import"./user-Cg-2Q1EP.js";import"./log-out-DZCODJYO.js";import"./keyboard-BDnFpmg_.js";import"./boxes-Cqi7D-sc.js";import"./users-Cbm18cet.js";import"./chevron-down-D_3W57lQ.js";function xe({auditReports:o}){const[f,m]=h.useState(!1),[a,u]=h.useState(null),i=10,[r,x]=h.useState(1),j=Math.ceil(o.length/i),g=o.slice((r-1)*i,r*i),N=s=>{u(s),m(!0)},c=s=>{switch(s?.toLowerCase()||""){case"working":return"bg-green-100 text-green-800";case"repaired":case"needs repair":case"intermittent issue":case"minor damage":case"intermittent connectivity":case"no signal":case"needs configuration":case"to be diagnosed":case"not working":return"bg-red-100 text-red-800";case"for replacement":case"for disposal":case"condemned":return"bg-orange-100 text-orange-800";case"needs cleaning":case"under maintenance":return"bg-blue-100 text-blue-800";case"expired":case"needs refill":case"rusting":case"needs maintenance":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs(v,{children:[e.jsx(S,{}),e.jsxs(y,{children:[e.jsx("header",{className:"sticky top-0 z-20 bg-white border-b px-6 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{}),e.jsx(C,{orientation:"vertical",className:"h-6 mx-3"}),e.jsx(P,{children:e.jsx(L,{children:e.jsxs(I,{children:[e.jsx(b,{href:"#","aria-current":"page",children:"Reports"}),e.jsx(O,{}),e.jsx(b,{href:"/admin/audit-reports","aria-current":"page",className:"font-semibold text-foreground",children:"Audit Reports"})]})})})]})}),e.jsxs("main",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-5",children:"Audit Reports"}),e.jsx(D,{children:e.jsxs(B,{className:"p-0",children:[e.jsxs(_,{children:[e.jsx(A,{children:e.jsxs(p,{className:"bg-[hsl(142,34%,85%)] text-[hsl(142,34%,25%)] hover:bg-[hsl(142,34%,80%)]",children:[e.jsx(l,{children:"#"}),e.jsx(l,{children:"Resolved By"}),e.jsx(l,{children:"Old Condition"}),e.jsx(l,{children:"New Condition"}),e.jsx(l,{children:"Date Resolved"}),e.jsx(l,{})]})}),e.jsx(k,{children:g.length>0?g.map((s,t)=>e.jsxs(p,{className:"cursor-pointer hover:bg-gray-50 transition-colors duration-200",onClick:()=>N(s),children:[e.jsx(n,{children:(r-1)*i+t+1}),e.jsx(n,{children:s.resolver?.name||"N/A"}),e.jsx(n,{children:e.jsx("span",{className:`px-2 py-1 rounded-full text-sm font-semibold ${c(s.old_condition)}`,children:s.old_condition})}),e.jsx(n,{children:e.jsx("span",{className:`px-2 py-1 rounded-full text-sm font-semibold ${c(s.new_condition)}`,children:s.new_condition})}),e.jsx(n,{children:new Date(s.created_at).toLocaleString()}),e.jsx(n,{className:"text-gray-400",children:e.jsx($,{size:18})})]},s.id)):e.jsx(p,{children:e.jsx(n,{colSpan:"6",className:"text-center",children:"No audit reports found."})})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-4 p-2 gap-2",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Showing"," ",o.length===0?0:(r-1)*i+1," ","â€“"," ",Math.min(r*i,o.length)," ","of ",o.length," reports"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(d,{variant:"outline",size:"sm",disabled:r===1,onClick:()=>x(r-1),children:"Previous"}),[...Array(j)].map((s,t)=>e.jsx(d,{variant:r===t+1?"default":"outline",size:"sm",onClick:()=>x(t+1),children:t+1},t)),e.jsx(d,{variant:"outline",size:"sm",disabled:r===j,onClick:()=>x(r+1),children:"Next"})]})]})]})}),e.jsx(R,{open:f,onOpenChange:m,children:e.jsx(T,{className:"max-w-lg w-full",children:a&&e.jsxs("div",{className:"bg-white rounded-xl shadow-xl overflow-hidden",children:[e.jsx("div",{className:"bg-[hsl(142,34%,25%)] p-4",children:e.jsx(z,{className:"text-white text-lg font-bold",children:"Audit Report Details"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 font-semibold",children:"Report ID:"}),e.jsx("p",{className:"text-gray-800 font-medium",children:a.report_id})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 font-semibold",children:"Resolved By:"}),e.jsx("p",{className:"text-gray-800 font-medium",children:a.resolver?.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 font-semibold",children:"Old Condition:"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-sm font-semibold ${c(a.old_condition)}`,children:a.old_condition})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 font-semibold",children:"New Condition:"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-sm font-semibold ${c(a.new_condition)}`,children:a.new_condition})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("p",{className:"text-gray-500 font-semibold",children:"Details:"}),e.jsx("p",{className:"text-gray-800",children:a.details||"-"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("p",{className:"text-gray-500 font-semibold",children:"Date Resolved:"}),e.jsx("p",{className:"text-gray-800",children:new Date(a.created_at).toLocaleString()})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(d,{onClick:()=>m(!1),className:"bg-[hsl(142,34%,25%)] text-white hover:bg-[hsl(142,34%,20%)]",children:"Close"})})]})]})})})]})]})]})}export{xe as default};
