import{b as pe,r as a,j as e,H as ue,L as je,c as o}from"./app-C-B9TlcY.js";import{S as ge,a as ye,b as fe,c as be}from"./avatar-DS3XPo2i.js";import{N as Ne}from"./Notification-DKkJEDFH.js";import{A as ve}from"./app-sidebar-BJkvZRAm.js";import{B as g}from"./button-Dlf9emKC.js";import{D as v,a as w,b as C,c as d}from"./dropdown-menu-BViXam8K.js";import{B as we,a as Ce,b as Ae,c as ke}from"./breadcrumb-IPofeKCn.js";import{C as y,b as f,c as b,a as A,e as Re}from"./card-DVogG68j.js";import{u as Se,C as _e,a as qe,A as X,b as Fe}from"./react-spring_web.modern-Dr1Zhuti.js";import{B as Te}from"./building-Dj_e_4wZ.js";import{M as De}from"./mouse-CDnfoPat.js";import{M as Y}from"./monitor-CBrxBHe1.js";import{U as D}from"./users-BCtjCzt2.js";import{a as W}from"./utils-BdMZOZVK.js";import{C as m}from"./index-BoTetdDi.js";import{R as k,P as E,a as B,C as L,T as R,L as S,B as Ee,X as Be,Y as Le,b as P}from"./PieChart-bzEPmO_m.js";import{C as Pe}from"./CartesianGrid-BbD36QUE.js";import"./index-DNZIXyea.js";import"./index-BtdNQtQo.js";import"./input-BQA-u3bd.js";import"./index-D8HOCO93.js";import"./index-Djxu1FSO.js";import"./index-CXhUfNup.js";import"./index-CJNcF3NT.js";import"./bell-MQfnj5ZO.js";import"./sparkles-C2g9SwwG.js";import"./keyboard-DNQSvuIL.js";import"./boxes-B3K64wII.js";import"./file-text-Dbd68T30.js";import"./chevron-down-Daa8mBWc.js";import"./chevron-right-CJqmmTIA.js";import"./with-selector-C0AR-N7u.js";/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],G=W("chart-no-axes-column-increasing",Ue);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],_=W("sliders-horizontal",Oe);function bs(){const{auth:$}=pe().props,J=$.user,[i,Q]=a.useState({totalRooms:0,totalSystemUnits:0,totalPeripherals:0,totalEquipments:0,occupiedRooms:0,pendingRequests:0,forRepair:0,activeUsers:0,totalUsers:0}),[q,Z]=a.useState([]),[U,ee]=a.useState([]),[r,se]=a.useState({system_units:{},peripherals:{},peripherals_type:{},equipments:{}}),[h,te]=a.useState({system_units:{},peripherals:{},peripherals_type:{},equipments:{}}),[O,ae]=a.useState([]),[ie,re]=a.useState([]),[n,K]=a.useState(""),[c,M]=a.useState(""),[le,ne]=a.useState([]),[j,z]=a.useState(""),[F,I]=a.useState("");a.useEffect(()=>{(async()=>{try{const t=await o.get("/admin/rooms-list");ae(Array.isArray(t.data)?t.data:[]);const u=await o.get("/admin/peripheral-types");re(Array.isArray(u.data)?u.data:[]);const V=await o.get("/admin/equipment-types");ne(Array.isArray(V.data)?V.data:[])}catch(t){console.error("Error fetching filters:",t)}})()},[]);const ce=async()=>{try{const s=await o.get("/admin/equipment-condition-filtered",{params:{room_id:n,type:c}});se(s.data)}catch(s){console.error(s)}},oe=async()=>{try{const s=await o.get("/admin/equipment-condition",{params:{room_id:j||void 0}});te(s.data)}catch(s){console.error(s)}},H=async()=>{try{const s=await o.get("/admin/dashboard-stats");Q(s.data);const t=await o.get("/admin/rooms-status");ee(t.data);const u=await o.get("/admin/activity-logs");Z(u.data),await ce(),await oe()}catch(s){console.error(s)}};a.useEffect(()=>{H();const s=setInterval(H,5e3);return()=>clearInterval(s)},[n,c,j]);const l=s=>Se({val:s,from:{val:0}}),de=s=>e.jsx(Fe.p,{className:"text-lg font-bold text-black",children:s.val.to(t=>Math.floor(t))}),me=[{title:"Total Rooms",value:l(i.totalRooms),icon:Te,link:"/admin/rooms"},{title:"Computers",value:l(n||c?Object.values(r.system_units).reduce((s,t)=>s+t,0):i.totalSystemUnits),icon:_e,link:"/admin/system-units"},{title:"Peripherals",value:l(n||c?Object.values(r.peripherals).reduce((s,t)=>s+t,0):i.totalPeripherals),icon:De,link:"/admin/peripherals"},{title:"Room Equipments",value:l(n||c?Object.values(r.equipments).reduce((s,t)=>s+t,0):i.totalEquipments),icon:Y,link:"/admin/equipments"},{title:"Occupied Rooms",value:l(i.occupiedRooms),icon:D,link:"/admin/monitoring"},{title:"Pending Requests",value:l(i.pendingRequests),icon:qe,link:"/admin/maintenance-requests"},{title:"For Repair",value:l(i.forRepair),icon:X,link:"/admin/repairs"},{title:"Active Users",value:l(i.activeUsers),icon:Y,link:"/admin/users"},{title:"Total Users",value:l(i.totalUsers),icon:D,link:"/admin/users"}],x=["#16a34a","#facc15","#dc2626","#3b82f6","#9333ea"],p=s=>Object.entries(s).map(([t,u])=>({name:t,value:u})),[T,he]=a.useState(!1),[Ke,Me]=a.useState("type"),N=U.details?U.details.filter(s=>s.is_active):[],xe=T?N:N.slice(0,2);return e.jsxs(ge,{children:[e.jsx(ue,{children:e.jsx("title",{children:"Admin Dashboard"})}),e.jsx(ve,{}),e.jsxs(ye,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 border-b bg-white",children:[e.jsx(fe,{}),e.jsx(be,{orientation:"vertical",className:"h-6 mx-3"}),e.jsx(we,{children:e.jsx(Ce,{children:e.jsx(Ae,{children:e.jsx(ke,{href:"#","aria-current":"page",children:"Dashboard"})})})}),e.jsx("div",{className:"flex-1"}),e.jsx(Ne,{})]}),e.jsxs("main",{className:"w-full px-6 py-6 space-y-6",children:[e.jsxs("div",{className:"relative rounded-2xl bg-gradient-to-r from-[#A8D5BA] via-[#7FCF9E] to-[#59AC77] p-6 text-white shadow-lg",children:[e.jsxs("h1",{className:"text-3xl font-bold",children:["Welcome back, ",J.name.split(" ")[0],"."]}),e.jsx("p",{className:"text-sm opacity-90 mt-1",children:"Hereâ€™s a summary of your ICT inventory system."})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4 mb-6",children:me.map((s,t)=>e.jsx(je,{href:s.link,className:"block",children:e.jsxs(y,{className:"rounded-xl shadow-sm bg-white hover:shadow-md transition-all duration-300 cursor-pointer p-3",children:[e.jsx(f,{className:"flex flex-row items-center justify-between space-y-0 pb-1",children:e.jsxs(b,{className:"text-xs font-medium flex items-center gap-1 text-gray-500",children:[e.jsx(s.icon,{className:"h-4 w-4 text-[hsl(142,34%,51%)]"}),s.title]})}),e.jsx(A,{children:de(s.value)})]})},t))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-6 gap-6 mb-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(y,{className:"rounded-2xl shadow-md bg-white h-full",children:[e.jsx(f,{children:e.jsxs(b,{className:"flex items-center gap-2 text-[#2F4F2F]",children:[e.jsx(D,{className:"w-5 h-5 text-[#59AC77]"}),"Active Room Occupancy"]})}),e.jsx("div",{className:"space-y-6 p-4",children:N.length===0?e.jsx("p",{className:"text-[#3B5C47] text-sm text-center",children:"No active rooms right now"}):xe.map(s=>e.jsxs("div",{className:"flex items-center gap-6 border-b pb-6 last:border-b-0",children:[e.jsx("img",{src:s.faculty_photo||"/default-avatar.png",alt:"Faculty",className:"w-16 h-16 rounded-full object-cover border-4 border-[#59AC77]"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-base font-semibold text-[#2F4F2F]",children:["Room"," ",s.room_number]}),e.jsxs("p",{className:"text-sm text-[#3B5C47]",children:["Scanned by"," ",e.jsx("span",{className:"font-medium text-[#2F4F2F]",children:s.last_scanned_by??"Unknown"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:s.last_scanned_at?new Date(s.last_scanned_at).toLocaleString():"No scan time"})]})]},s.id))}),N.length>2&&e.jsx(Re,{className:"flex justify-center",children:e.jsx(g,{variant:"outline",size:"sm",onClick:()=>he(!T),children:T?"Show Less":"View All Active Rooms"})})]})}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs(y,{className:"rounded-2xl shadow-md bg-white",children:[e.jsxs(f,{className:"flex justify-between items-center",children:[e.jsxs(b,{className:"flex items-center gap-2 text-[#2F4F2F]",children:[e.jsx(G,{className:"w-5 h-5 text-[#59AC77]"}),"Equipment Condition"]}),e.jsxs(v,{children:[e.jsx(w,{asChild:!0,children:e.jsxs(g,{size:"lg",className:"flex items-center gap-2 bg-green-600 text-white hover:bg-green-700",children:[e.jsx(_,{className:"w-5 h-5"}),n||"All Rooms"]})}),e.jsxs(C,{children:[e.jsxs(d,{onClick:()=>K(""),children:[n===""&&e.jsx(m,{className:"w-4 h-4 mr-1"}),"All Rooms"]}),O.map(s=>e.jsxs(d,{onClick:()=>K(s.id),children:[n===s.id&&e.jsx(m,{className:"w-4 h-4 mr-1"}),s.room_number]},s.id))]})]})]}),e.jsx(A,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 h-72",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-center font-semibold mb-1",children:"Computers"}),e.jsx(k,{width:"100%",height:"90%",children:e.jsxs(E,{children:[e.jsx(B,{data:p(r.system_units),dataKey:"value",nameKey:"name",outerRadius:60,label:!0,children:p(r.system_units).map((s,t)=>e.jsx(L,{fill:x[t%x.length]},t))}),e.jsx(R,{}),e.jsx(S,{verticalAlign:"bottom",height:36})]})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-center items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold",children:"Peripherals"}),e.jsxs(v,{children:[e.jsx(w,{asChild:!0,children:e.jsxs(g,{size:"lg",className:"flex items-center gap-2 bg-green-600 text-white hover:bg-green-700",children:[e.jsx(_,{className:"w-5 h-5"}),c||"All Types"]})}),e.jsxs(C,{children:[e.jsxs(d,{onClick:()=>M(""),children:[c===""&&e.jsx(m,{className:"w-4 h-4 mr-1"}),"All Types"]}),ie.map(s=>e.jsxs(d,{onClick:()=>M(s),children:[c===s&&e.jsx(m,{className:"w-4 h-4 mr-1"}),s]},s))]})]})]}),e.jsx(k,{width:"100%",height:"80%",children:e.jsxs(E,{children:[e.jsx(B,{data:p(r.peripherals),dataKey:"value",nameKey:"name",outerRadius:60,label:!0,children:p(r.peripherals).map((s,t)=>e.jsx(L,{fill:x[t%x.length]},t))}),e.jsx(R,{}),e.jsx(S,{verticalAlign:"bottom",height:36})]})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-center items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-semibold",children:"Equipments"}),e.jsxs(v,{children:[e.jsx(w,{asChild:!0,children:e.jsxs(g,{size:"lg",className:"flex items-center gap-2 bg-green-600 text-white hover:bg-green-700",children:[e.jsx(_,{className:"w-5 h-5"}),F||"All Types"]})}),e.jsxs(C,{children:[e.jsxs(d,{onClick:()=>I(""),children:[F===""&&e.jsx(m,{className:"w-4 h-4 mr-1"}),"All Types"]}),le.map(s=>e.jsxs(d,{onClick:()=>I(s),children:[F===s&&e.jsx(m,{className:"w-4 h-4 mr-1"}),s]},s))]})]})]}),e.jsx(k,{width:"100%",height:"80%",children:e.jsxs(E,{children:[e.jsx(B,{data:p(r.equipments),dataKey:"value",nameKey:"name",outerRadius:60,label:!0,children:p(r.equipments).map((s,t)=>e.jsx(L,{fill:x[t%x.length]},t))}),e.jsx(R,{}),e.jsx(S,{verticalAlign:"bottom",height:36})]})})]})]})})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(y,{className:"rounded-2xl shadow-md bg-white",children:[e.jsxs(f,{className:"flex justify-between items-center",children:[e.jsxs(b,{className:"flex items-center gap-2 text-[#2F4F2F]",children:[e.jsx(G,{className:"w-5 h-5 text-[#59AC77]"}),"Total Rooms Assets"]}),e.jsxs(v,{children:[e.jsx(w,{asChild:!0,children:e.jsxs(g,{size:"lg",className:"flex items-center gap-2 bg-green-600 text-white hover:bg-green-700",children:[e.jsx(_,{className:"w-5 h-5"}),j||"All Rooms"]})}),e.jsxs(C,{children:[e.jsxs(d,{onClick:()=>z(""),children:[j===""&&e.jsx(m,{className:"w-4 h-4 mr-1"}),"All Rooms"]}),O.map(s=>e.jsxs(d,{onClick:()=>z(s.id),children:[j===s.id&&e.jsx(m,{className:"w-4 h-4 mr-1"}),s.room_number]},s.id))]})]})]}),e.jsx(A,{children:e.jsx(k,{width:"100%",height:300,children:e.jsxs(Ee,{data:[{name:"Total",Computers:h.system_units?Object.values(h.system_units).reduce((s,t)=>s+t,0):0,Peripherals:h.peripherals_type?Object.values(h.peripherals_type).reduce((s,t)=>s+t,0):0,Equipments:h.equipments?Object.values(h.equipments).reduce((s,t)=>s+t,0):0}],margin:{top:20,right:20,left:0,bottom:5},children:[e.jsx(Pe,{strokeDasharray:"3 3"}),e.jsx(Be,{dataKey:"name"}),e.jsx(Le,{}),e.jsx(R,{})," ",e.jsx(S,{}),e.jsx(P,{dataKey:"Computers",fill:"#59AC77"}),e.jsx(P,{dataKey:"Peripherals",fill:"#FFD700"}),e.jsx(P,{dataKey:"Equipments",fill:"#FF6B6B"})]})})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(y,{className:"rounded-2xl shadow-md bg-white h-full",children:[e.jsx(f,{children:e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-5 h-5 text-green-600"}),"Recent Activity"]})}),e.jsx(A,{children:e.jsx("ul",{className:"space-y-3 max-h-72 overflow-y-auto",children:Array.isArray(q)&&q.length>0?q.map((s,t)=>e.jsxs("li",{className:"text-sm border-b pb-2",children:[e.jsx("span",{className:"font-semibold",children:s.user?.name??"Unknown"})," ",s.action,e.jsx("span",{className:"block text-xs text-gray-500",children:s.timestamp})]},t)):e.jsx("li",{className:"text-gray-500",children:"No activity logs found"})})})]})}),e.jsx("div",{className:"lg:col-span-1"})]})]})]})]})}export{bs as default};
