import{u as f,r as h,j as e}from"./app-D0ukwV4V.js";import{D as N,a as C,b as y,c as S}from"./dialog-DCOYICMi.js";import{L as d}from"./label-Cb5VrISx.js";import{I as s}from"./input-iT34sivn.js";import{B as F}from"./button-7h9e-nrn.js";import{T as w}from"./textarea-S5OCBMnT.js";import{c as D}from"./utils-CBfrqCZ4.js";import{S as E}from"./sweetalert2.esm.all-BQIkj5Wb.js";import"./index-EWyFFTkd.js";import"./createLucideIcon-Dm3TL6X0.js";import"./index-Cx_VTeFO.js";import"./index-CNnj97AZ.js";import"./index-DWVpd6m9.js";import"./index-BinTdfJw.js";const p=[{label:"Functional",color:"bg-green-500"},{label:"Defective",color:"bg-red-500"},{label:"Intermittent Issue",color:"bg-yellow-500"},{label:"Needs Cleaning",color:"bg-blue-500"},{label:"For Replacement",color:"bg-orange-500"},{label:"For Disposal",color:"bg-gray-500"}];function q({peripheral:l,rooms:c=[],units:a=[],onClose:m}){console.log("Units from Laravel:",a);const{data:o,setData:n,put:b,processing:j,errors:t}=f({type:l?.type||"",brand:l?.brand||"",model:l?.model||"",serial_number:l?.serial_number||"",condition:l?.condition||"",condition_details:l?.condition_details||"",room_id:l?.room_id||"",unit_id:l?.unit_id||""}),[u,x]=h.useState([]);h.useEffect(()=>{if(o.room_id){const i=a.filter(r=>String(r.room_id)===String(o.room_id));x(i),i.find(r=>String(r.id)===String(o.unit_id))||n("unit_id","")}else x([]),n("unit_id","")},[o.room_id,a]);const g=i=>{i.preventDefault(),b(route("peripherals.update",l.id),{onSuccess:()=>{E.fire({icon:"success",title:"Updated!",text:"Peripheral updated successfully.",timer:2e3,showConfirmButton:!1}),m()}})},_=i=>{const r=p.find(v=>v.label.toLowerCase()===i.toLowerCase());return r?r.color:"bg-gray-300"};return e.jsx(N,{open:!0,onOpenChange:i=>!i&&m(),children:e.jsxs(C,{className:"max-w-lg max-h-[80vh] overflow-y-auto",children:[e.jsx(y,{children:e.jsxs(S,{children:["Edit Peripheral â€“ ",l?.peripheral_code]})}),e.jsxs("form",{onSubmit:g,className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"type",children:"Type"}),e.jsx(s,{id:"type",value:o.type,onChange:i=>n("type",i.target.value),placeholder:"e.g. Keyboard, Mouse, Monitor"}),t.type&&e.jsx("p",{className:"text-sm text-red-500",children:t.type})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"serial_number",children:"Serial Number"}),e.jsx(s,{id:"serial_number",value:o.serial_number,onChange:i=>n("serial_number",i.target.value),placeholder:"Serial Number"}),t.serial_number&&e.jsx("p",{className:"text-sm text-red-500",children:t.serial_number})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"condition",children:"Condition"}),e.jsxs("select",{id:"condition",className:"w-full border rounded-md p-2",value:o.condition,onChange:i=>n("condition",i.target.value),children:[e.jsx("option",{value:"",children:"Select Condition"}),p.map(i=>e.jsx("option",{value:i.label,children:i.label},i.label))]}),o.condition&&e.jsxs("div",{className:"mt-1 text-sm flex items-center gap-2",children:[e.jsx("span",{className:D("inline-block w-3 h-3 rounded-full",_(o.condition))}),e.jsx("span",{className:"capitalize",children:o.condition})]}),t.condition&&e.jsx("p",{className:"text-sm text-red-500",children:t.condition})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"condition_details",children:"Condition Details"}),e.jsx(w,{id:"condition_details",value:o.condition_details,onChange:i=>n("condition_details",i.target.value),placeholder:"Add more details about the condition (e.g., missing keys, dim screen, loose cable)",rows:3}),t.condition_details&&e.jsx("p",{className:"text-sm text-red-500",children:t.condition_details})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"room_id",children:"Room"}),e.jsxs("select",{id:"room_id",className:"w-full border rounded-md p-2",value:o.room_id,onChange:i=>n("room_id",i.target.value),children:[e.jsx("option",{value:"",children:"Select Room"}),c.length>0?c.map(i=>e.jsx("option",{value:i.id,children:i.room_number},i.id)):e.jsx("option",{disabled:!0,children:"No rooms available"})]}),t.room_id&&e.jsx("p",{className:"text-sm text-red-500",children:t.room_id})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"unit_id",children:"Unit"}),e.jsxs("select",{id:"unit_id",className:"w-full border rounded-md p-2",value:o.unit_id,onChange:i=>n("unit_id",i.target.value),disabled:!o.room_id,children:[e.jsx("option",{value:"",children:"Select Unit"}),u.length>0?u.map(i=>e.jsx("option",{value:i.id,children:i.unit_code},i.id)):e.jsx("option",{disabled:!0,children:"No units available"})]}),t.unit_id&&e.jsx("p",{className:"text-sm text-red-500",children:t.unit_id})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"brand",children:"Brand"}),e.jsx(s,{id:"brand",value:o.brand,onChange:i=>n("brand",i.target.value),placeholder:"Enter brand"}),t.brand&&e.jsx("p",{className:"text-sm text-red-500",children:t.brand})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"model",children:"Model"}),e.jsx(s,{id:"model",value:o.model,onChange:i=>n("model",i.target.value),placeholder:"Enter model"}),t.model&&e.jsx("p",{className:"text-sm text-red-500",children:t.model})]}),e.jsx(F,{type:"submit",disabled:j,children:"Update"})]})]})})}export{q as default};
